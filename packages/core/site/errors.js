!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=73)}([function(t,e,n){(function(t,i){var r;(function(){function a(t,e){if(t!==e){var n=null===t,i=t===M,r=t===t,a=null===e,o=e===M,s=e===e;if(t>e&&!a||!r||n&&!o&&s||i&&s)return 1;if(t<e&&!n||!s||a&&!i&&r||o&&r)return-1}return 0}function o(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function s(t,e,n){if(e!==e)return m(t,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function u(t){return"function"==typeof t||!1}function l(t){return null==t?"":t+""}function c(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}function h(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function f(t,e){return a(t.criteria,e.criteria)||t.index-e.index}function d(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,u=n.length;++i<s;){var l=a(r[i],o[i]);if(l){if(i>=u)return l;var c=n[i];return l*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function g(t){return Yt[t]}function p(t){return Gt[t]}function v(t,e,n){return e?t=Jt[t]:n&&(t=Xt[t]),"\\"+t}function _(t){return"\\"+Xt[t]}function m(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var a=t[r];if(a!==a)return r}return-1}function y(t){return!!t&&"object"==typeof t}function w(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function b(t,e){for(var n=-1,i=t.length,r=-1,a=[];++n<i;)t[n]===e&&(t[n]=Y,a[++r]=n);return a}function x(t,e){for(var n,i=-1,r=t.length,a=-1,o=[];++i<r;){var s=t[i],u=e?e(s,i,t):s;i&&n===u||(n=u,o[++a]=s)}return o}function S(t){for(var e=-1,n=t.length;++e<n&&w(t.charCodeAt(e)););return e}function C(t){for(var e=t.length;e--&&w(t.charCodeAt(e)););return e}function A(t){return Zt[t]}function P(t){function e(t){if(y(t)&&!Ts(t)&&!(t instanceof r)){if(t instanceof i)return t;if(to.call(t,"__chain__")&&to.call(t,"__wrapped__"))return di(t)}return new i(t)}function n(){}function i(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oo,this.__views__=[]}function w(){var t=new r(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function Q(){if(this.__filtered__){var t=new r(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function it(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ts(t),i=e<0,r=n?t.length:0,a=Yn(0,r,this.__views__),o=a.start,s=a.end,u=s-o,l=i?s:o-1,c=this.__iteratees__,h=c.length,f=0,d=So(u,this.__takeCount__);if(!n||r<U||r==u&&d==u)return nn(i&&n?t.reverse():t,this.__actions__);var g=[];t:for(;u--&&f<d;){l+=e;for(var p=-1,v=t[l];++p<h;){var _=c[p],m=_.iteratee,y=_.type,w=m(v);if(y==H)v=w;else if(!w){if(y==V)continue t;break t}}g[f++]=v}return g}function at(){this.__data__={}}function Yt(t){return this.has(t)&&delete this.__data__[t]}function Gt(t){return"__proto__"==t?M:this.__data__[t]}function Zt(t){return"__proto__"!=t&&to.call(this.__data__,t)}function $t(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Jt(t){var e=t?t.length:0;for(this.data={hash:_o(null),set:new co};e--;)this.push(t[e])}function Xt(t,e){var n=t.data;return("string"==typeof e||jr(e)?n.set.has(e):n.hash[e])?0:-1}function Kt(t){var e=this.data;"string"==typeof t||jr(t)?e.set.add(t):e.hash[t]=!0}function Qt(t,e){for(var n=-1,i=t.length,r=-1,a=e.length,o=Fa(i+a);++n<i;)o[n]=t[n];for(;++r<a;)o[n++]=e[r];return o}function te(t,e){var n=-1,i=t.length;for(e||(e=Fa(i));++n<i;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function ne(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function ae(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function oe(t,e,n,i){for(var r=-1,a=t.length,o=i,s=o;++r<a;){var u=t[r],l=+e(u);n(l,o)&&(o=l,s=u)}return s}function se(t,e){for(var n=-1,i=t.length,r=-1,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[++r]=o)}return a}function ue(t,e){for(var n=-1,i=t.length,r=Fa(i);++n<i;)r[n]=e(t[n],n,t);return r}function le(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function ce(t,e,n,i){var r=-1,a=t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function he(t,e,n,i){var r=t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function fe(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function de(t,e){for(var n=t.length,i=0;n--;)i+=+e(t[n])||0;return i}function ge(t,e){return t===M?e:t}function pe(t,e,n,i){return t!==M&&to.call(i,n)?t:e}function ve(t,e,n){for(var i=-1,r=Fs(e),a=r.length;++i<a;){var o=r[i],s=t[o],u=n(s,e[o],o,t,e);(u===u?u===s:s!==s)&&(s!==M||o in t)||(t[o]=u)}return t}function _e(t,e){return null==e?t:ye(e,Fs(e),t)}function me(t,e){for(var n=-1,i=null==t,r=!i&&Xn(t),a=r?t.length:0,o=e.length,s=Fa(o);++n<o;){var u=e[n];s[n]=r?Kn(u,a)?t[u]:M:i?M:t[u]}return s}function ye(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var a=e[i];n[a]=t[a]}return n}function we(t,e,n){var i=typeof t;return"function"==i?e===M?t:on(t,e,n):null==t?Ma:"object"==i?Re(t):e===M?La(t):Fe(t,e)}function be(t,e,n,i,r,a,o){var s;if(n&&(s=r?n(t,i,r):n(t)),s!==M)return s;if(!jr(t))return t;var u=Ts(t);if(u){if(s=Gn(t),!e)return te(t,s)}else{var l=no.call(t),c=l==K;if(l!=et&&l!=G&&(!c||r))return Wt[l]?$n(t,l,e):r?t:{};if(s=Zn(c?{}:t),!e)return _e(s,t)}a||(a=[]),o||(o=[]);for(var h=a.length;h--;)if(a[h]==t)return o[h];return a.push(t),o.push(s),(u?ee:Ie)(t,function(i,r){s[r]=be(i,e,n,r,t,a,o)}),s}function xe(t,e,n){if("function"!=typeof t)throw new $a(W);return ho(function(){t.apply(M,n)},e)}function Se(t,e){var n=t?t.length:0,i=[];if(!n)return i;var r=-1,a=Vn(),o=a==s,u=o&&e.length>=U?pn(e):null,l=e.length;u&&(a=Xt,o=!1,e=u);t:for(;++r<n;){var c=t[r];if(o&&c===c){for(var h=l;h--;)if(e[h]===c)continue t;i.push(c)}else a(e,c,0)<0&&i.push(c)}return i}function Ce(t,e){var n=!0;return No(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Ae(t,e,n,i){var r=i,a=r;return No(t,function(t,o,s){var u=+e(t,o,s);(n(u,r)||u===i&&u===a)&&(r=u,a=t)}),a}function Pe(t,e,n,i){var r=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>r?0:r+n),i=i===M||i>r?r:+i||0,i<0&&(i+=r),r=n>i?0:i>>>0,n>>>=0;n<r;)t[n++]=e;return t}function Me(t,e){var n=[];return No(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Oe(t,e,n,i){var r;return n(t,function(t,n,a){if(e(t,n,a))return r=i?n:t,!1}),r}function Te(t,e,n,i){i||(i=[]);for(var r=-1,a=t.length;++r<a;){var o=t[r];y(o)&&Xn(o)&&(n||Ts(o)||Ar(o))?e?Te(o,e,n,i):le(i,o):n||(i[i.length]=o)}return i}function ke(t,e){return Do(t,e,ta)}function Ie(t,e){return Do(t,e,Fs)}function Ee(t,e){return Ro(t,e,Fs)}function Le(t,e){for(var n=-1,i=e.length,r=-1,a=[];++n<i;){var o=e[n];Lr(t[o])&&(a[++r]=o)}return a}function je(t,e,n){if(null!=t){n!==M&&n in hi(t)&&(e=[n]);for(var i=0,r=e.length;null!=t&&i<r;)t=t[e[i++]];return i&&i==r?t:M}}function ze(t,e,n,i,r,a){return t===e||(null==t||null==e||!jr(t)&&!y(e)?t!==t&&e!==e:Ne(t,e,ze,n,i,r,a))}function Ne(t,e,n,i,r,a,o){var s=Ts(t),u=Ts(e),l=Z,c=Z;s||(l=no.call(t),l==G?l=et:l!=et&&(s=Vr(t))),u||(c=no.call(e),c==G?c=et:c!=et&&(u=Vr(e)));var h=l==et,f=c==et,d=l==c;if(d&&!s&&!h)return Rn(t,e,l);if(!r){var g=h&&to.call(t,"__wrapped__"),p=f&&to.call(e,"__wrapped__");if(g||p)return n(g?t.value():t,p?e.value():e,i,r,a,o)}if(!d)return!1;a||(a=[]),o||(o=[]);for(var v=a.length;v--;)if(a[v]==t)return o[v]==e;a.push(t),o.push(e);var _=(s?Dn:Fn)(t,e,n,i,r,a,o);return a.pop(),o.pop(),_}function Be(t,e,n){var i=e.length,r=i,a=!n;if(null==t)return!r;for(t=hi(t);i--;){var o=e[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<r;){o=e[i];var s=o[0],u=t[s],l=o[1];if(a&&o[2]){if(u===M&&!(s in t))return!1}else{var c=n?n(u,l,s):M;if(!(c===M?ze(l,u,n,!0):c))return!1}}return!0}function De(t,e){var n=-1,i=Xn(t)?Fa(t.length):[];return No(t,function(t,r,a){i[++n]=e(t,r,a)}),i}function Re(t){var e=Hn(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null!=t&&(t[n]===i&&(i!==M||n in hi(t)))}}return function(t){return Be(t,e)}}function Fe(t,e){var n=Ts(t),i=ti(t)&&ii(e),r=t+"";return t=fi(t),function(a){if(null==a)return!1;var o=r;if(a=hi(a),(n||!i)&&!(o in a)){if(null==(a=1==t.length?a:je(a,Ze(t,0,-1))))return!1;o=Pi(t),a=hi(a)}return a[o]===e?e!==M||o in a:ze(e,a[o],M,!0)}}function qe(t,e,n,i,r){if(!jr(t))return t;var a=Xn(e)&&(Ts(e)||Vr(e)),o=a?M:Fs(e);return ee(o||e,function(s,u){if(o&&(u=s,s=e[u]),y(s))i||(i=[]),r||(r=[]),Ue(t,e,u,qe,n,i,r);else{var l=t[u],c=n?n(l,s,u,t,e):M,h=c===M;h&&(c=s),c===M&&(!a||u in t)||!h&&(c===c?c===l:l!==l)||(t[u]=c)}}),t}function Ue(t,e,n,i,r,a,o){for(var s=a.length,u=e[n];s--;)if(a[s]==u)return void(t[n]=o[s]);var l=t[n],c=r?r(l,u,n,t,e):M,h=c===M;h&&(c=u,Xn(u)&&(Ts(u)||Vr(u))?c=Ts(l)?l:Xn(l)?te(l):[]:Fr(u)||Ar(u)?c=Ar(l)?Zr(l):Fr(l)?l:{}:h=!1),a.push(u),o.push(c),h?t[n]=i(c,u,r,a,o):(c===c?c!==l:l===l)&&(t[n]=c)}function Ve(t){return function(e){return null==e?M:e[t]}}function He(t){var e=t+"";return t=fi(t),function(n){return je(n,t,e)}}function We(t,e){for(var n=t?e.length:0;n--;){var i=e[n];if(i!=r&&Kn(i)){var r=i;fo.call(t,i,1)}}return t}function Ye(t,e){return t+mo(Po()*(e-t+1))}function Ge(t,e,n,i,r){return r(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function Ze(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,e<0&&(e=-e>r?0:r+e),n=n===M||n>r?r:+n||0,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=Fa(r);++i<r;)a[i]=t[i+e];return a}function $e(t,e){var n;return No(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function Je(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Xe(t,e,n){var i=qn(),r=-1;return e=ue(e,function(t){return i(t)}),Je(De(t,function(t){return{criteria:ue(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return d(t,e,n)})}function Ke(t,e){var n=0;return No(t,function(t,i,r){n+=+e(t,i,r)||0}),n}function Qe(t,e){var n=-1,i=Vn(),r=t.length,a=i==s,o=a&&r>=U,u=o?pn():null,l=[];u?(i=Xt,a=!1):(o=!1,u=e?[]:l);t:for(;++n<r;){var c=t[n],h=e?e(c,n,t):c;if(a&&c===c){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),l.push(c)}else i(u,h,0)<0&&((e||o)&&u.push(h),l.push(c))}return l}function tn(t,e){for(var n=-1,i=e.length,r=Fa(i);++n<i;)r[n]=t[e[n]];return r}function en(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?Ze(t,i?0:a,i?a+1:r):Ze(t,i?a+1:0,i?r:a)}function nn(t,e){var n=t;n instanceof r&&(n=n.value());for(var i=-1,a=e.length;++i<a;){var o=e[i];n=o.func.apply(o.thisArg,le([n],o.args))}return n}function rn(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e===e&&r<=Io){for(;i<r;){var a=i+r>>>1,o=t[a];(n?o<=e:o<e)&&null!==o?i=a+1:r=a}return r}return an(t,e,Ma,n)}function an(t,e,n,i){e=n(e);for(var r=0,a=t?t.length:0,o=e!==e,s=null===e,u=e===M;r<a;){var l=mo((r+a)/2),c=n(t[l]),h=c!==M,f=c===c;if(o)var d=f||i;else d=s?f&&h&&(i||null!=c):u?f&&(i||h):null!=c&&(i?c<=e:c<e);d?r=l+1:a=l}return So(a,ko)}function on(t,e,n){if("function"!=typeof t)return Ma;if(e===M)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,a){return t.call(e,n,i,r,a)};case 5:return function(n,i,r,a,o){return t.call(e,n,i,r,a,o)}}return function(){return t.apply(e,arguments)}}function sn(t){var e=new ao(t.byteLength);return new go(e).set(new go(t)),e}function un(t,e,n){for(var i=n.length,r=-1,a=xo(t.length-i,0),o=-1,s=e.length,u=Fa(s+a);++o<s;)u[o]=e[o];for(;++r<i;)u[n[r]]=t[r];for(;a--;)u[o++]=t[r++];return u}function ln(t,e,n){for(var i=-1,r=n.length,a=-1,o=xo(t.length-r,0),s=-1,u=e.length,l=Fa(o+u);++a<o;)l[a]=t[a];for(var c=a;++s<u;)l[c+s]=e[s];for(;++i<r;)l[c+n[i]]=t[a++];return l}function cn(t,e){return function(n,i,r){var a=e?e():{};if(i=qn(i,r,3),Ts(n))for(var o=-1,s=n.length;++o<s;){var u=n[o];t(a,u,i(u,o,n),n)}else No(n,function(e,n,r){t(a,e,i(e,n,r),r)});return a}}function hn(t){return _r(function(e,n){var i=-1,r=null==e?0:n.length,a=r>2?n[r-2]:M,o=r>2?n[2]:M,s=r>1?n[r-1]:M;for("function"==typeof a?(a=on(a,s,5),r-=2):(a="function"==typeof s?s:M,r-=a?1:0),o&&Qn(n[0],n[1],o)&&(a=r<3?M:a,r=1);++i<r;){var u=n[i];u&&t(e,u,a)}return e})}function fn(t,e){return function(n,i){var r=n?Uo(n):0;if(!ni(r))return t(n,i);for(var a=e?r:-1,o=hi(n);(e?a--:++a<r)&&i(o[a],a,o)!==!1;);return n}}function dn(t){return function(e,n,i){for(var r=hi(e),a=i(e),o=a.length,s=t?o:-1;t?s--:++s<o;){var u=a[s];if(n(r[u],u,r)===!1)break}return e}}function gn(t,e){function n(){return(this&&this!==ie&&this instanceof n?i:t).apply(e,arguments)}var i=_n(t);return n}function pn(t){return _o&&co?new Jt(t):null}function vn(t){return function(e){for(var n=-1,i=Ca(ca(e)),r=i.length,a="";++n<r;)a=t(a,i[n],n);return a}}function _n(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=zo(t.prototype),i=t.apply(n,e);return jr(i)?i:n}}function mn(t){function e(n,i,r){r&&Qn(n,i,r)&&(i=M);var a=Bn(n,t,M,M,M,M,M,i);return a.placeholder=e.placeholder,a}return e}function yn(t,e){return _r(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(M,n))})}function wn(t,e){return function(n,i,r){if(r&&Qn(n,i,r)&&(i=M),i=qn(i,r,3),1==i.length){n=Ts(n)?n:ci(n);var a=oe(n,i,t,e);if(!n.length||a!==e)return a}return Ae(n,i,t,e)}}function bn(t,e){return function(n,i,r){if(i=qn(i,r,3),Ts(n)){var a=o(n,i,e);return a>-1?n[a]:M}return Oe(n,i,t)}}function xn(t){return function(e,n,i){return e&&e.length?(n=qn(n,i,3),o(e,n,t)):-1}}function Sn(t){return function(e,n,i){return n=qn(n,i,3),Oe(e,n,t,!0)}}function Cn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,a=0,o=Fa(n);t?r--:++r<n;){var s=o[a++]=arguments[r];if("function"!=typeof s)throw new $a(W);!e&&i.prototype.thru&&"wrapper"==Un(s)&&(e=new i([],!0))}for(r=e?-1:n;++r<n;){s=o[r];var u=Un(s),l="wrapper"==u?qo(s):M;e=l&&ei(l[0])&&l[1]==(N|E|j|B)&&!l[4].length&&1==l[9]?e[Un(l[0])].apply(e,l[3]):1==s.length&&ei(s)?e[u]():e.thru(s)}return function(){var t=arguments,i=t[0];if(e&&1==t.length&&Ts(i)&&i.length>=U)return e.plant(i).value();for(var r=0,a=n?o[r].apply(this,t):i;++r<n;)a=o[r].call(this,a);return a}}}function An(t,e){return function(n,i,r){return"function"==typeof i&&r===M&&Ts(n)?t(n,i):e(n,on(i,r,3))}}function Pn(t){return function(e,n,i){return"function"==typeof n&&i===M||(n=on(n,i,3)),t(e,n,ta)}}function Mn(t){return function(e,n,i){return"function"==typeof n&&i===M||(n=on(n,i,3)),t(e,n)}}function On(t){return function(e,n,i){var r={};return n=qn(n,i,3),Ie(e,function(e,i,a){var o=n(e,i,a);i=t?o:i,e=t?e:o,r[i]=e}),r}}function Tn(t){return function(e,n,i){return e=l(e),(t?e:"")+Ln(e,n,i)+(t?"":e)}}function kn(t){var e=_r(function(n,i){return Bn(n,t,M,i,b(i,e.placeholder))});return e}function In(t,e){return function(n,i,r,a){var o=arguments.length<3;return"function"==typeof i&&a===M&&Ts(n)?t(n,i,r,o):Ge(n,qn(i,a,4),r,o,e)}}function En(t,e,n,i,r,a,o,s,u,l){function c(){for(var m=arguments.length,y=m,w=Fa(m);y--;)w[y]=arguments[y];if(i&&(w=un(w,i,r)),a&&(w=ln(w,a,o)),g||v){var x=c.placeholder,S=b(w,x);if((m-=S.length)<l){var C=s?te(s):M,A=xo(l-m,0),P=g?S:M,O=g?M:S,I=g?w:M,E=g?M:w;e|=g?j:z,e&=~(g?z:j),p||(e&=~(T|k));var L=[t,e,n,I,P,E,O,C,u,A],N=En.apply(M,L);return ei(t)&&Vo(N,L),N.placeholder=x,N}}var B=f?n:this,D=d?B[t]:t;return s&&(w=ui(w,s)),h&&u<w.length&&(w.length=u),this&&this!==ie&&this instanceof c&&(D=_||_n(t)),D.apply(B,w)}var h=e&N,f=e&T,d=e&k,g=e&E,p=e&I,v=e&L,_=d?M:_n(t);return c}function Ln(t,e,n){var i=t.length;if(e=+e,i>=e||!wo(e))return"";var r=e-i;return n=null==n?" ":n+"",va(n,vo(r/n.length)).slice(0,r)}function jn(t,e,n,i){function r(){for(var e=-1,s=arguments.length,u=-1,l=i.length,c=Fa(l+s);++u<l;)c[u]=i[u];for(;s--;)c[u++]=arguments[++e];return(this&&this!==ie&&this instanceof r?o:t).apply(a?n:this,c)}var a=e&T,o=_n(t);return r}function zn(t){var e=Ha[t];return function(t,n){return n=n===M?0:+n||0,n?(n=uo(10,n),e(t*n)/n):e(t)}}function Nn(t){return function(e,n,i,r){var a=qn(i);return null==i&&a===we?rn(e,n,t):an(e,n,a(i,r,1),t)}}function Bn(t,e,n,i,r,a,o,s){var u=e&k;if(!u&&"function"!=typeof t)throw new $a(W);var l=i?i.length:0;if(l||(e&=~(j|z),i=r=M),l-=r?r.length:0,e&z){var c=i,h=r;i=r=M}var f=u?M:qo(t),d=[t,e,n,i,r,c,h,a,o,s];if(f&&(ri(d,f),e=d[1],s=d[9]),d[9]=null==s?u?0:t.length:xo(s-l,0)||0,e==T)var g=gn(d[0],d[2]);else g=e!=j&&e!=(T|j)||d[4].length?En.apply(M,d):jn.apply(M,d);return(f?Fo:Vo)(g,d)}function Dn(t,e,n,i,r,a,o){var s=-1,u=t.length,l=e.length;if(u!=l&&!(r&&l>u))return!1;for(;++s<u;){var c=t[s],h=e[s],f=i?i(r?h:c,r?c:h,s):M;if(f!==M){if(f)continue;return!1}if(r){if(!fe(e,function(t){return c===t||n(c,t,i,r,a,o)}))return!1}else if(c!==h&&!n(c,h,i,r,a,o))return!1}return!0}function Rn(t,e,n){switch(n){case $:case J:return+t==+e;case X:return t.name==e.name&&t.message==e.message;case tt:return t!=+t?e!=+e:t==+e;case nt:case rt:return t==e+""}return!1}function Fn(t,e,n,i,r,a,o){var s=Fs(t),u=s.length;if(u!=Fs(e).length&&!r)return!1;for(var l=u;l--;){var c=s[l];if(!(r?c in e:to.call(e,c)))return!1}for(var h=r;++l<u;){c=s[l];var f=t[c],d=e[c],g=i?i(r?d:f,r?f:d,c):M;if(!(g===M?n(f,d,i,r,a,o):g))return!1;h||(h="constructor"==c)}if(!h){var p=t.constructor,v=e.constructor;if(p!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof p&&p instanceof p&&"function"==typeof v&&v instanceof v))return!1}return!0}function qn(t,n,i){var r=e.callback||Aa;return r=r===Aa?we:r,i?r(t,n,i):r}function Un(t){for(var e=t.name,n=jo[e],i=n?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function Vn(t,n,i){var r=e.indexOf||Ci;return r=r===Ci?s:r,t?r(t,n,i):r}function Hn(t){for(var e=ea(t),n=e.length;n--;)e[n][2]=ii(e[n][1]);return e}function Wn(t,e){var n=null==t?M:t[e];return Br(n)?n:M}function Yn(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=So(e,t+o);break;case"takeRight":t=xo(t,e-o)}}return{start:t,end:e}}function Gn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&to.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Zn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ya),new e}function $n(t,e,n){var i=t.constructor;switch(e){case ot:return sn(t);case $:case J:return new i(+t);case st:case ut:case lt:case ct:case ht:case ft:case dt:case gt:case pt:var r=t.buffer;return new i(n?sn(r):r,t.byteOffset,t.length);case tt:case rt:return new i(t);case nt:var a=new i(t.source,jt.exec(t));a.lastIndex=t.lastIndex}return a}function Jn(t,e,n){null==t||ti(e,t)||(e=fi(e),t=1==e.length?t:je(t,Ze(e,0,-1)),e=Pi(e));var i=null==t?t:t[e];return null==i?M:i.apply(t,n)}function Xn(t){return null!=t&&ni(Uo(t))}function Kn(t,e){return t="number"==typeof t||Bt.test(t)?+t:-1,e=null==e?Eo:e,t>-1&&t%1==0&&t<e}function Qn(t,e,n){if(!jr(n))return!1;var i=typeof e;if("number"==i?Xn(n)&&Kn(e,n.length):"string"==i&&e in n){var r=n[e];return t===t?t===r:r!==r}return!1}function ti(t,e){var n=typeof t;return!!("string"==n&&Mt.test(t)||"number"==n)||!Ts(t)&&(!Pt.test(t)||null!=e&&t in hi(e))}function ei(t){var n=Un(t);if(!(n in r.prototype))return!1;var i=e[n];if(t===i)return!0;var a=qo(i);return!!a&&t===a[0]}function ni(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Eo}function ii(t){return t===t&&!jr(t)}function ri(t,e){var n=t[1],i=e[1],r=n|i,a=r<N,o=i==N&&n==E||i==N&&n==B&&t[7].length<=e[8]||i==(N|B)&&n==E;if(!a&&!o)return t;i&T&&(t[2]=e[2],r|=n&T?0:I);var s=e[3];if(s){var u=t[3];t[3]=u?un(u,s,e[4]):te(s),t[4]=u?b(t[3],Y):te(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?ln(u,s,e[6]):te(s),t[6]=u?b(t[5],Y):te(e[6])),s=e[7],s&&(t[7]=te(s)),i&N&&(t[8]=null==t[8]?e[8]:So(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function ai(t,e){return t===M?e:ks(t,e,ai)}function oi(t,e){t=hi(t);for(var n=-1,i=e.length,r={};++n<i;){var a=e[n];a in t&&(r[a]=t[a])}return r}function si(t,e){var n={};return ke(t,function(t,i,r){e(t,i,r)&&(n[i]=t)}),n}function ui(t,e){for(var n=t.length,i=So(e.length,n),r=te(t);i--;){var a=e[i];t[i]=Kn(a,n)?r[a]:M}return t}function li(t){for(var e=ta(t),n=e.length,i=n&&t.length,r=!!i&&ni(i)&&(Ts(t)||Ar(t)),a=-1,o=[];++a<n;){var s=e[a];(r&&Kn(s,i)||to.call(t,s))&&o.push(s)}return o}function ci(t){return null==t?[]:Xn(t)?jr(t)?t:Ya(t):aa(t)}function hi(t){return jr(t)?t:Ya(t)}function fi(t){if(Ts(t))return t;var e=[];return l(t).replace(Ot,function(t,n,i,r){e.push(i?r.replace(Et,"$1"):n||t)}),e}function di(t){return t instanceof r?t.clone():new i(t.__wrapped__,t.__chain__,te(t.__actions__))}function gi(t,e,n){e=(n?Qn(t,e,n):null==e)?1:xo(mo(e)||1,1);for(var i=0,r=t?t.length:0,a=-1,o=Fa(vo(r/e));i<r;)o[++a]=Ze(t,i,i+=e);return o}function pi(t){for(var e=-1,n=t?t.length:0,i=-1,r=[];++e<n;){var a=t[e];a&&(r[++i]=a)}return r}function vi(t,e,n){return(t?t.length:0)?((n?Qn(t,e,n):null==e)&&(e=1),Ze(t,e<0?0:e)):[]}function _i(t,e,n){var i=t?t.length:0;return i?((n?Qn(t,e,n):null==e)&&(e=1),e=i-(+e||0),Ze(t,0,e<0?0:e)):[]}function mi(t,e,n){return t&&t.length?en(t,qn(e,n,3),!0,!0):[]}function yi(t,e,n){return t&&t.length?en(t,qn(e,n,3),!0):[]}function wi(t,e,n,i){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Qn(t,e,n)&&(n=0,i=r),Pe(t,e,n,i)):[]}function bi(t){return t?t[0]:M}function xi(t,e,n){var i=t?t.length:0;return n&&Qn(t,e,n)&&(e=!1),i?Te(t,e):[]}function Si(t){return(t?t.length:0)?Te(t,!0):[]}function Ci(t,e,n){var i=t?t.length:0;if(!i)return-1;if("number"==typeof n)n=n<0?xo(i+n,0):n;else if(n){var r=rn(t,e);return r<i&&(e===e?e===t[r]:t[r]!==t[r])?r:-1}return s(t,e,n||0)}function Ai(t){return _i(t,1)}function Pi(t){var e=t?t.length:0;return e?t[e-1]:M}function Mi(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(n<0?xo(i+n,0):So(n||0,i-1))+1;else if(n){r=rn(t,e,!0)-1;var a=t[r];return(e===e?e===a:a!==a)?r:-1}if(e!==e)return m(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function Oi(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,i=Vn(),r=t.length;++n<r;)for(var a=0,o=t[n];(a=i(e,o,a))>-1;)fo.call(e,a,1);return e}function Ti(t,e,n){var i=[];if(!t||!t.length)return i;var r=-1,a=[],o=t.length;for(e=qn(e,n,3);++r<o;){var s=t[r];e(s,r,t)&&(i.push(s),a.push(r))}return We(t,a),i}function ki(t){return vi(t,1)}function Ii(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Qn(t,e,n)&&(e=0,n=i),Ze(t,e,n)):[]}function Ei(t,e,n){return(t?t.length:0)?((n?Qn(t,e,n):null==e)&&(e=1),Ze(t,0,e<0?0:e)):[]}function Li(t,e,n){var i=t?t.length:0;return i?((n?Qn(t,e,n):null==e)&&(e=1),e=i-(+e||0),Ze(t,e<0?0:e)):[]}function ji(t,e,n){return t&&t.length?en(t,qn(e,n,3),!1,!0):[]}function zi(t,e,n){return t&&t.length?en(t,qn(e,n,3)):[]}function Ni(t,e,n,i){if(!(t?t.length:0))return[];null!=e&&"boolean"!=typeof e&&(i=n,n=Qn(t,e,i)?M:e,e=!1);var r=qn();return null==n&&r===we||(n=r(n,i,3)),e&&Vn()==s?x(t,n):Qe(t,n)}function Bi(t){if(!t||!t.length)return[];var e=-1,n=0;t=se(t,function(t){if(Xn(t))return n=xo(t.length,n),!0});for(var i=Fa(n);++e<n;)i[e]=ue(t,Ve(e));return i}function Di(t,e,n){if(!(t?t.length:0))return[];var i=Bi(t);return null==e?i:(e=on(e,n,4),ue(i,function(t){return ce(t,e,M,!0)}))}function Ri(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Xn(n))var i=i?le(Se(i,n),Se(n,i)):n}return i?Qe(i):[]}function Fi(t,e){var n=-1,i=t?t.length:0,r={};for(!i||e||Ts(t[0])||(e=[]);++n<i;){var a=t[n];e?r[a]=e[n]:a&&(r[a[0]]=a[1])}return r}function qi(t){var n=e(t);return n.__chain__=!0,n}function Ui(t,e,n){return e.call(n,t),t}function Vi(t,e,n){return e.call(n,t)}function Hi(){return qi(this)}function Wi(){return new i(this.value(),this.__chain__)}function Yi(t){for(var e,i=this;i instanceof n;){var r=di(i);e?a.__wrapped__=r:e=r;var a=r;i=i.__wrapped__}return a.__wrapped__=t,e}function Gi(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof r){var n=t;return this.__actions__.length&&(n=new r(this)),n=n.reverse(),n.__actions__.push({func:Vi,args:[e],thisArg:M}),new i(n,this.__chain__)}return this.thru(e)}function Zi(){return this.value()+""}function $i(){return nn(this.__wrapped__,this.__actions__)}function Ji(t,e,n){var i=Ts(t)?ae:Ce;return n&&Qn(t,e,n)&&(e=M),"function"==typeof e&&n===M||(e=qn(e,n,3)),i(t,e)}function Xi(t,e,n){var i=Ts(t)?se:Me;return e=qn(e,n,3),i(t,e)}function Ki(t,e){return rs(t,Re(e))}function Qi(t,e,n,i){var r=t?Uo(t):0;return ni(r)||(t=aa(t),r=t.length),n="number"!=typeof n||i&&Qn(e,n,i)?0:n<0?xo(r+n,0):n||0,"string"==typeof t||!Ts(t)&&Ur(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Vn(t,e,n)>-1}function tr(t,e,n){var i=Ts(t)?ue:De;return e=qn(e,n,3),i(t,e)}function er(t,e){return tr(t,La(e))}function nr(t,e,n){var i=Ts(t)?se:Me;return e=qn(e,n,3),i(t,function(t,n,i){return!e(t,n,i)})}function ir(t,e,n){if(n?Qn(t,e,n):null==e){t=ci(t);var i=t.length;return i>0?t[Ye(0,i-1)]:M}var r=-1,a=Gr(t),i=a.length,o=i-1;for(e=So(e<0?0:+e||0,i);++r<e;){var s=Ye(r,o),u=a[s];a[s]=a[r],a[r]=u}return a.length=e,a}function rr(t){return ir(t,Oo)}function ar(t){var e=t?Uo(t):0;return ni(e)?e:Fs(t).length}function or(t,e,n){var i=Ts(t)?fe:$e;return n&&Qn(t,e,n)&&(e=M),"function"==typeof e&&n===M||(e=qn(e,n,3)),i(t,e)}function sr(t,e,n){if(null==t)return[];n&&Qn(t,e,n)&&(e=M);var i=-1;return e=qn(e,n,3),Je(De(t,function(t,n,r){return{criteria:e(t,n,r),index:++i,value:t}}),f)}function ur(t,e,n,i){return null==t?[]:(i&&Qn(e,n,i)&&(n=M),Ts(e)||(e=null==e?[]:[e]),Ts(n)||(n=null==n?[]:[n]),Xe(t,e,n))}function lr(t,e){return Xi(t,Re(e))}function cr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new $a(W);var n=t;t=e,e=n}return t=wo(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function hr(t,e,n){return n&&Qn(t,e,n)&&(e=M),e=t&&null==e?t.length:xo(+e||0,0),Bn(t,N,M,M,M,M,e)}function fr(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new $a(W);var i=t;t=e,e=i}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=M),n}}function dr(t,e,n){function i(){d&&oo(d),l&&oo(l),p=0,l=d=g=M}function r(e,n){n&&oo(n),l=d=g=M,e&&(p=ps(),c=t.apply(f,u),d||l||(u=f=M))}function a(){var t=e-(ps()-h);t<=0||t>e?r(g,l):d=ho(a,t)}function o(){r(_,d)}function s(){if(u=arguments,h=ps(),f=this,g=_&&(d||!m),v===!1)var n=m&&!d;else{l||m||(p=h);var i=v-(h-p),r=i<=0||i>v;r?(l&&(l=oo(l)),p=h,c=t.apply(f,u)):l||(l=ho(o,i))}return r&&d?d=oo(d):d||e===v||(d=ho(a,e)),n&&(r=!0,c=t.apply(f,u)),!r||d||l||(u=f=M),c}var u,l,c,h,f,d,g,p=0,v=!1,_=!0;if("function"!=typeof t)throw new $a(W);if(e=e<0?0:+e||0,n===!0){var m=!0;_=!1}else jr(n)&&(m=!!n.leading,v="maxWait"in n&&xo(+n.maxWait||0,e),_="trailing"in n?!!n.trailing:_);return s.cancel=i,s}function gr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new $a(W);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new gr.Cache,n}function pr(t){if("function"!=typeof t)throw new $a(W);return function(){return!t.apply(this,arguments)}}function vr(t){return fr(2,t)}function _r(t,e){if("function"!=typeof t)throw new $a(W);return e=xo(e===M?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,r=xo(n.length-e,0),a=Fa(r);++i<r;)a[i]=n[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var o=Fa(e+1);for(i=-1;++i<e;)o[i]=n[i];return o[e]=a,t.apply(this,o)}}function mr(t){if("function"!=typeof t)throw new $a(W);return function(e){return t.apply(this,e)}}function yr(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new $a(W);return n===!1?i=!1:jr(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),dr(t,e,{leading:i,maxWait:+e,trailing:r})}function wr(t,e){return e=null==e?Ma:e,Bn(e,j,M,[t],[])}function br(t,e,n,i){return e&&"boolean"!=typeof e&&Qn(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?be(t,e,on(n,i,1)):be(t,e)}function xr(t,e,n){return"function"==typeof e?be(t,!0,on(e,n,1)):be(t,!0)}function Sr(t,e){return t>e}function Cr(t,e){return t>=e}function Ar(t){return y(t)&&Xn(t)&&to.call(t,"callee")&&!lo.call(t,"callee")}function Pr(t){return t===!0||t===!1||y(t)&&no.call(t)==$}function Mr(t){return y(t)&&no.call(t)==J}function Or(t){return!!t&&1===t.nodeType&&y(t)&&!Fr(t)}function Tr(t){return null==t||(Xn(t)&&(Ts(t)||Ur(t)||Ar(t)||y(t)&&Lr(t.splice))?!t.length:!Fs(t).length)}function kr(t,e,n,i){n="function"==typeof n?on(n,i,3):M;var r=n?n(t,e):M;return r===M?ze(t,e,n):!!r}function Ir(t){return y(t)&&"string"==typeof t.message&&no.call(t)==X}function Er(t){return"number"==typeof t&&wo(t)}function Lr(t){return jr(t)&&no.call(t)==K}function jr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function zr(t,e,n,i){return n="function"==typeof n?on(n,i,3):M,Be(t,Hn(e),n)}function Nr(t){return Rr(t)&&t!=+t}function Br(t){return null!=t&&(Lr(t)?ro.test(Qa.call(t)):y(t)&&Nt.test(t))}function Dr(t){return null===t}function Rr(t){return"number"==typeof t||y(t)&&no.call(t)==tt}function Fr(t){var e;if(!y(t)||no.call(t)!=et||Ar(t)||!to.call(t,"constructor")&&"function"==typeof(e=t.constructor)&&!(e instanceof e))return!1;var n;return ke(t,function(t,e){n=e}),n===M||to.call(t,n)}function qr(t){return jr(t)&&no.call(t)==nt}function Ur(t){return"string"==typeof t||y(t)&&no.call(t)==rt}function Vr(t){return y(t)&&ni(t.length)&&!!Ht[no.call(t)]}function Hr(t){return t===M}function Wr(t,e){return t<e}function Yr(t,e){return t<=e}function Gr(t){var e=t?Uo(t):0;return ni(e)?e?te(t):[]:aa(t)}function Zr(t){return ye(t,ta(t))}function $r(t,e,n){var i=zo(t);return n&&Qn(t,e,n)&&(e=M),e?_e(i,e):i}function Jr(t){return Le(t,ta(t))}function Xr(t,e,n){var i=null==t?M:je(t,fi(e),e+"");return i===M?n:i}function Kr(t,e){if(null==t)return!1;var n=to.call(t,e);if(!n&&!ti(e)){if(e=fi(e),null==(t=1==e.length?t:je(t,Ze(e,0,-1))))return!1;e=Pi(e),n=to.call(t,e)}return n||ni(t.length)&&Kn(e,t.length)&&(Ts(t)||Ar(t))}function Qr(t,e,n){n&&Qn(t,e,n)&&(e=M);for(var i=-1,r=Fs(t),a=r.length,o={};++i<a;){var s=r[i],u=t[s];e?to.call(o,u)?o[u].push(s):o[u]=[s]:o[u]=s}return o}function ta(t){if(null==t)return[];jr(t)||(t=Ya(t));var e=t.length;e=e&&ni(e)&&(Ts(t)||Ar(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,a=Fa(e),o=e>0;++i<e;)a[i]=i+"";for(var s in t)o&&Kn(s,e)||"constructor"==s&&(r||!to.call(t,s))||a.push(s);return a}function ea(t){t=hi(t);for(var e=-1,n=Fs(t),i=n.length,r=Fa(i);++e<i;){var a=n[e];r[e]=[a,t[a]]}return r}function na(t,e,n){var i=null==t?M:t[e];return i===M&&(null==t||ti(e,t)||(e=fi(e),t=1==e.length?t:je(t,Ze(e,0,-1)),i=null==t?M:t[Pi(e)]),i=i===M?n:i),Lr(i)?i.call(t):i}function ia(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||ti(e,t)?[i]:fi(e);for(var r=-1,a=e.length,o=a-1,s=t;null!=s&&++r<a;){var u=e[r];jr(s)&&(r==o?s[u]=n:null==s[u]&&(s[u]=Kn(e[r+1])?[]:{})),s=s[u]}return t}function ra(t,e,n,i){var r=Ts(t)||Vr(t);if(e=qn(e,i,4),null==n)if(r||jr(t)){var a=t.constructor;n=r?Ts(t)?new a:[]:zo(Lr(a)?a.prototype:M)}else n={};return(r?ee:Ie)(t,function(t,i,r){return e(n,t,i,r)}),n}function aa(t){return tn(t,Fs(t))}function oa(t){return tn(t,ta(t))}function sa(t,e,n){return e=+e||0,n===M?(n=e,e=0):n=+n||0,t>=So(e,n)&&t<xo(e,n)}function ua(t,e,n){n&&Qn(t,e,n)&&(e=n=M);var i=null==t,r=null==e;if(null==n&&(r&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,r=!0)),i&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=Po();return So(t+a*(e-t+so("1e-"+((a+"").length-1))),e)}return Ye(t,e)}function la(t){return(t=l(t))&&t.charAt(0).toUpperCase()+t.slice(1)}function ca(t){return(t=l(t))&&t.replace(Dt,g).replace(It,"")}function ha(t,e,n){t=l(t),e+="";var i=t.length;return n=n===M?i:So(n<0?0:+n||0,i),(n-=e.length)>=0&&t.indexOf(e,n)==n}function fa(t){return t=l(t),t&&xt.test(t)?t.replace(wt,p):t}function da(t){return t=l(t),t&&kt.test(t)?t.replace(Tt,v):t||"(?:)"}function ga(t,e,n){t=l(t),e=+e;var i=t.length;if(i>=e||!wo(e))return t;var r=(e-i)/2,a=mo(r);return n=Ln("",vo(r),n),n.slice(0,a)+t+n}function pa(t,e,n){return(n?Qn(t,e,n):null==e)?e=0:e&&(e=+e),t=ya(t),Ao(t,e||(zt.test(t)?16:10))}function va(t,e){var n="";if(t=l(t),(e=+e)<1||!t||!wo(e))return n;do{e%2&&(n+=t),e=mo(e/2),t+=t}while(e);return n}function _a(t,e,n){return t=l(t),n=null==n?0:So(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function ma(t,n,i){var r=e.templateSettings;i&&Qn(t,n,i)&&(n=i=M),t=l(t),n=ve(_e({},i||n),r,pe);var a,o,s=ve(_e({},n.imports),r.imports,pe),u=Fs(s),c=tn(s,u),h=0,f=n.interpolate||Rt,d="__p += '",g=Ga((n.escape||Rt).source+"|"+f.source+"|"+(f===At?Lt:Rt).source+"|"+(n.evaluate||Rt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Vt+"]")+"\n";t.replace(g,function(e,n,i,r,s,u){return i||(i=r),d+=t.slice(h,u).replace(Ft,_),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),d+="';\n";var v=n.variable;v||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(vt,""):d).replace(_t,"$1").replace(mt,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Xs(function(){return Va(u,p+"return "+d).apply(M,c)});if(m.source=d,Ir(m))throw m;return m}function ya(t,e,n){var i=t;return(t=l(t))?(n?Qn(i,e,n):null==e)?t.slice(S(t),C(t)+1):(e+="",t.slice(c(t,e),h(t,e)+1)):t}function wa(t,e,n){var i=t;return t=l(t),t?(n?Qn(i,e,n):null==e)?t.slice(S(t)):t.slice(c(t,e+"")):t}function ba(t,e,n){var i=t;return t=l(t),t?(n?Qn(i,e,n):null==e)?t.slice(0,C(t)+1):t.slice(0,h(t,e+"")+1):t}function xa(t,e,n){n&&Qn(t,e,n)&&(e=M);var i=D,r=R;if(null!=e)if(jr(e)){var a="separator"in e?e.separator:a;i="length"in e?+e.length||0:i,r="omission"in e?l(e.omission):r}else i=+e||0;if(t=l(t),i>=t.length)return t;var o=i-r.length;if(o<1)return r;var s=t.slice(0,o);if(null==a)return s+r;if(qr(a)){if(t.slice(o).search(a)){var u,c,h=t.slice(0,o);for(a.global||(a=Ga(a.source,(jt.exec(a)||"")+"g")),a.lastIndex=0;u=a.exec(h);)c=u.index;s=s.slice(0,null==c?o:c)}}else if(t.indexOf(a,o)!=o){var f=s.lastIndexOf(a);f>-1&&(s=s.slice(0,f))}return s+r}function Sa(t){return t=l(t),t&&bt.test(t)?t.replace(yt,A):t}function Ca(t,e,n){return n&&Qn(t,e,n)&&(e=M),t=l(t),t.match(e||qt)||[]}function Aa(t,e,n){return n&&Qn(t,e,n)&&(e=M),y(t)?Oa(t):we(t,e)}function Pa(t){return function(){return t}}function Ma(t){return t}function Oa(t){return Re(be(t,!0))}function Ta(t,e){return Fe(t,be(e,!0))}function ka(t,e,n){if(null==n){var i=jr(e),r=i?Fs(e):M,a=r&&r.length?Le(e,r):M;(a?a.length:i)||(a=!1,n=e,e=t,t=this)}a||(a=Le(e,Fs(e)));var o=!0,s=-1,u=Lr(t),l=a.length;n===!1?o=!1:jr(n)&&"chain"in n&&(o=n.chain);for(;++s<l;){var c=a[s],h=e[c];t[c]=h,u&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(o||n){var i=t(this.__wrapped__);return(i.__actions__=te(this.__actions__)).push({func:e,args:arguments,thisArg:t}),i.__chain__=n,i}return e.apply(t,le([this.value()],arguments))}}(h))}return t}function Ia(){return ie._=io,this}function Ea(){}function La(t){return ti(t)?Ve(t):He(t)}function ja(t){return function(e){return je(t,fi(e),e+"")}}function za(t,e,n){n&&Qn(t,e,n)&&(e=n=M),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,r=xo(vo((e-t)/(n||1)),0),a=Fa(r);++i<r;)a[i]=t,t+=n;return a}function Na(t,e,n){if((t=mo(t))<1||!wo(t))return[];var i=-1,r=Fa(So(t,To));for(e=on(e,n,1);++i<t;)i<To?r[i]=e(i):e(i);return r}function Ba(t){var e=++eo;return l(t)+e}function Da(t,e){return(+t||0)+(+e||0)}function Ra(t,e,n){return n&&Qn(t,e,n)&&(e=M),e=qn(e,n,3),1==e.length?de(Ts(t)?t:ci(t),e):Ke(t,e)}t=t?re.defaults(ie.Object(),t,re.pick(ie,Ut)):ie;var Fa=t.Array,qa=t.Date,Ua=t.Error,Va=t.Function,Ha=t.Math,Wa=t.Number,Ya=t.Object,Ga=t.RegExp,Za=t.String,$a=t.TypeError,Ja=Fa.prototype,Xa=Ya.prototype,Ka=Za.prototype,Qa=Va.prototype.toString,to=Xa.hasOwnProperty,eo=0,no=Xa.toString,io=ie._,ro=Ga("^"+Qa.call(to).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ao=t.ArrayBuffer,oo=t.clearTimeout,so=t.parseFloat,uo=Ha.pow,lo=Xa.propertyIsEnumerable,co=Wn(t,"Set"),ho=t.setTimeout,fo=Ja.splice,go=t.Uint8Array,po=Wn(t,"WeakMap"),vo=Ha.ceil,_o=Wn(Ya,"create"),mo=Ha.floor,yo=Wn(Fa,"isArray"),wo=t.isFinite,bo=Wn(Ya,"keys"),xo=Ha.max,So=Ha.min,Co=Wn(qa,"now"),Ao=t.parseInt,Po=Ha.random,Mo=Wa.NEGATIVE_INFINITY,Oo=Wa.POSITIVE_INFINITY,To=4294967295,ko=To-1,Io=To>>>1,Eo=9007199254740991,Lo=po&&new po,jo={};e.support={};e.templateSettings={escape:St,evaluate:Ct,interpolate:At,variable:"",imports:{_:e}};var zo=function(){function t(){}return function(e){if(jr(e)){t.prototype=e;var n=new t;t.prototype=M}return n||{}}}(),No=fn(Ie),Bo=fn(Ee,!0),Do=dn(),Ro=dn(!0),Fo=Lo?function(t,e){return Lo.set(t,e),t}:Ma,qo=Lo?function(t){return Lo.get(t)}:Ea,Uo=Ve("length"),Vo=function(){var t=0,e=0;return function(n,i){var r=ps(),a=q-(r-e);if(e=r,a>0){if(++t>=F)return n}else t=0;return Fo(n,i)}}(),Ho=_r(function(t,e){return y(t)&&Xn(t)?Se(t,Te(e,!1,!0)):[]}),Wo=xn(),Yo=xn(!0),Go=_r(function(t){for(var e=t.length,n=e,i=Fa(h),r=Vn(),a=r==s,o=[];n--;){var u=t[n]=Xn(u=t[n])?u:[];i[n]=a&&u.length>=120?pn(n&&u):null}var l=t[0],c=-1,h=l?l.length:0,f=i[0];t:for(;++c<h;)if(u=l[c],(f?Xt(f,u):r(o,u,0))<0){for(var n=e;--n;){var d=i[n];if((d?Xt(d,u):r(t[n],u,0))<0)continue t}f&&f.push(u),o.push(u)}return o}),Zo=_r(function(t,e){e=Te(e);var n=me(t,e);return We(t,e.sort(a)),n}),$o=Nn(),Jo=Nn(!0),Xo=_r(function(t){return Qe(Te(t,!1,!0))}),Ko=_r(function(t,e){return Xn(t)?Se(t,e):[]}),Qo=_r(Bi),ts=_r(function(t){var e=t.length,n=e>2?t[e-2]:M,i=e>1?t[e-1]:M;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof i?(--e,i):M,i=M),t.length=e,Di(t,n,i)}),es=_r(function(t){return t=Te(t),this.thru(function(e){return Qt(Ts(e)?e:[hi(e)],t)})}),ns=_r(function(t,e){return me(t,Te(e))}),is=cn(function(t,e,n){to.call(t,n)?++t[n]:t[n]=1}),rs=bn(No),as=bn(Bo,!0),os=An(ee,No),ss=An(ne,Bo),us=cn(function(t,e,n){to.call(t,n)?t[n].push(e):t[n]=[e]}),ls=cn(function(t,e,n){t[n]=e}),cs=_r(function(t,e,n){var i=-1,r="function"==typeof e,a=ti(e),o=Xn(t)?Fa(t.length):[];return No(t,function(t){var s=r?e:a&&null!=t?t[e]:M;o[++i]=s?s.apply(t,n):Jn(t,e,n)}),o}),hs=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),fs=In(ce,No),ds=In(he,Bo),gs=_r(function(t,e){if(null==t)return[];var n=e[2];return n&&Qn(e[0],e[1],n)&&(e.length=1),Xe(t,Te(e),[])}),ps=Co||function(){return(new qa).getTime()},vs=_r(function(t,e,n){var i=T;if(n.length){var r=b(n,vs.placeholder);i|=j}return Bn(t,i,e,n,r)}),_s=_r(function(t,e){e=e.length?Te(e):Jr(t);for(var n=-1,i=e.length;++n<i;){var r=e[n];t[r]=Bn(t[r],T,t)}return t}),ms=_r(function(t,e,n){var i=T|k;if(n.length){var r=b(n,ms.placeholder);i|=j}return Bn(e,i,t,n,r)}),ys=mn(E),ws=mn(L),bs=_r(function(t,e){return xe(t,1,e)}),xs=_r(function(t,e,n){return xe(t,e,n)}),Ss=Cn(),Cs=Cn(!0),As=_r(function(t,e){if(e=Te(e),"function"!=typeof t||!ae(e,u))throw new $a(W);var n=e.length;return _r(function(i){for(var r=So(i.length,n);r--;)i[r]=e[r](i[r]);return t.apply(this,i)})}),Ps=kn(j),Ms=kn(z),Os=_r(function(t,e){return Bn(t,B,M,M,M,Te(e))}),Ts=yo||function(t){return y(t)&&ni(t.length)&&no.call(t)==Z},ks=hn(qe),Is=hn(function(t,e,n){return n?ve(t,e,n):_e(t,e)}),Es=yn(Is,ge),Ls=yn(ks,ai),js=Sn(Ie),zs=Sn(Ee),Ns=Pn(Do),Bs=Pn(Ro),Ds=Mn(Ie),Rs=Mn(Ee),Fs=bo?function(t){var e=null==t?M:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Xn(t)?li(t):jr(t)?bo(t):[]}:li,qs=On(!0),Us=On(),Vs=_r(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Te(e),Za);return oi(t,Se(ta(t),e))}var n=on(e[0],e[1],3);return si(t,function(t,e,i){return!n(t,e,i)})}),Hs=_r(function(t,e){return null==t?{}:"function"==typeof e[0]?si(t,on(e[0],e[1],3)):oi(t,Te(e))}),Ws=vn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Ys=vn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Gs=Tn(),Zs=Tn(!0),$s=vn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Js=vn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Xs=_r(function(t,e){try{return t.apply(M,e)}catch(t){return Ir(t)?t:new Ua(t)}}),Ks=_r(function(t,e){return function(n){return Jn(n,t,e)}}),Qs=_r(function(t,e){return function(n){return Jn(t,n,e)}}),tu=zn("ceil"),eu=zn("floor"),nu=wn(Sr,Mo),iu=wn(Wr,Oo),ru=zn("round");return e.prototype=n.prototype,i.prototype=zo(n.prototype),i.prototype.constructor=i,r.prototype=zo(n.prototype),r.prototype.constructor=r,at.prototype.delete=Yt,at.prototype.get=Gt,at.prototype.has=Zt,at.prototype.set=$t,Jt.prototype.push=Kt,gr.Cache=at,e.after=cr,e.ary=hr,e.assign=Is,e.at=ns,e.before=fr,e.bind=vs,e.bindAll=_s,e.bindKey=ms,e.callback=Aa,e.chain=qi,e.chunk=gi,e.compact=pi,e.constant=Pa,e.countBy=is,e.create=$r,e.curry=ys,e.curryRight=ws,e.debounce=dr,e.defaults=Es,e.defaultsDeep=Ls,e.defer=bs,e.delay=xs,e.difference=Ho,e.drop=vi,e.dropRight=_i,e.dropRightWhile=mi,e.dropWhile=yi,e.fill=wi,e.filter=Xi,e.flatten=xi,e.flattenDeep=Si,e.flow=Ss,e.flowRight=Cs,e.forEach=os,e.forEachRight=ss,e.forIn=Ns,e.forInRight=Bs,e.forOwn=Ds,e.forOwnRight=Rs,e.functions=Jr,e.groupBy=us,e.indexBy=ls,e.initial=Ai,e.intersection=Go,e.invert=Qr,e.invoke=cs,e.keys=Fs,e.keysIn=ta,e.map=tr,e.mapKeys=qs,e.mapValues=Us,e.matches=Oa,e.matchesProperty=Ta,e.memoize=gr,e.merge=ks,e.method=Ks,e.methodOf=Qs,e.mixin=ka,e.modArgs=As,e.negate=pr,e.omit=Vs,e.once=vr,e.pairs=ea,e.partial=Ps,e.partialRight=Ms,e.partition=hs,e.pick=Hs,e.pluck=er,e.property=La,e.propertyOf=ja,e.pull=Oi,e.pullAt=Zo,e.range=za,e.rearg=Os,e.reject=nr,e.remove=Ti,e.rest=ki,e.restParam=_r,e.set=ia,e.shuffle=rr,e.slice=Ii,e.sortBy=sr,e.sortByAll=gs,e.sortByOrder=ur,e.spread=mr,e.take=Ei,e.takeRight=Li,e.takeRightWhile=ji,e.takeWhile=zi,e.tap=Ui,e.throttle=yr,e.thru=Vi,e.times=Na,e.toArray=Gr,e.toPlainObject=Zr,e.transform=ra,e.union=Xo,e.uniq=Ni,e.unzip=Bi,e.unzipWith=Di,e.values=aa,e.valuesIn=oa,e.where=lr,e.without=Ko,e.wrap=wr,e.xor=Ri,e.zip=Qo,e.zipObject=Fi,e.zipWith=ts,e.backflow=Cs,e.collect=tr,e.compose=Cs,e.each=os,e.eachRight=ss,e.extend=Is,e.iteratee=Aa,e.methods=Jr,e.object=Fi,e.select=Xi,e.tail=ki,e.unique=Ni,ka(e,e),e.add=Da,e.attempt=Xs,e.camelCase=Ws,e.capitalize=la,e.ceil=tu,e.clone=br,e.cloneDeep=xr,e.deburr=ca,e.endsWith=ha,e.escape=fa,e.escapeRegExp=da,e.every=Ji,e.find=rs,e.findIndex=Wo,e.findKey=js,e.findLast=as,e.findLastIndex=Yo,e.findLastKey=zs,e.findWhere=Ki,e.first=bi,e.floor=eu,e.get=Xr,e.gt=Sr,e.gte=Cr,e.has=Kr,e.identity=Ma,e.includes=Qi,e.indexOf=Ci,e.inRange=sa,e.isArguments=Ar,e.isArray=Ts,e.isBoolean=Pr,e.isDate=Mr,e.isElement=Or,e.isEmpty=Tr,e.isEqual=kr,e.isError=Ir,e.isFinite=Er,e.isFunction=Lr,e.isMatch=zr,e.isNaN=Nr,e.isNative=Br,e.isNull=Dr,e.isNumber=Rr,e.isObject=jr,e.isPlainObject=Fr,e.isRegExp=qr,e.isString=Ur,e.isTypedArray=Vr,e.isUndefined=Hr,e.kebabCase=Ys,e.last=Pi,e.lastIndexOf=Mi,e.lt=Wr,e.lte=Yr,e.max=nu,e.min=iu,e.noConflict=Ia,e.noop=Ea,e.now=ps,e.pad=ga,e.padLeft=Gs,e.padRight=Zs,e.parseInt=pa,e.random=ua,e.reduce=fs,e.reduceRight=ds,e.repeat=va,e.result=na,e.round=ru,e.runInContext=P,e.size=ar,e.snakeCase=$s,e.some=or,e.sortedIndex=$o,e.sortedLastIndex=Jo,e.startCase=Js,e.startsWith=_a,e.sum=Ra,e.template=ma,e.trim=ya,e.trimLeft=wa,e.trimRight=ba,e.trunc=xa,e.unescape=Sa,e.uniqueId=Ba,e.words=Ca,e.all=Ji,e.any=or,e.contains=Qi,e.eq=kr,e.detect=rs,e.foldl=fs,e.foldr=ds,e.head=bi,e.include=Qi,e.inject=fs,ka(e,function(){var t={};return Ie(e,function(n,i){e.prototype[i]||(t[i]=n)}),t}(),!1),e.sample=ir,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ir(e,t)}):ir(this.value())},e.VERSION=O,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){r.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new r(this);n=null==n?1:xo(mo(n)||0,0);var a=this.clone();return i?a.__takeCount__=So(a.__takeCount__,n):a.__views__.push({size:n,type:t+(a.__dir__<0?"Right":"")}),a},r.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n!=H;r.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:qn(t,e,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");r.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");r.prototype[t]=function(){return this.__filtered__?new r(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?Re:La;r.prototype[t]=function(t){return this[n](i(t))}}),r.prototype.compact=function(){return this.filter(Ma)},r.prototype.reject=function(t,e){return t=qn(t,e,1),this.filter(function(e){return!t(e)})},r.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new r(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==M&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n)},r.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},r.prototype.toArray=function(){return this.take(Oo)},Ie(r.prototype,function(t,n){var a=/^(?:filter|map|reject)|While$/.test(n),o=/^(?:first|last)$/.test(n),s=e[o?"take"+("last"==n?"Right":""):n];s&&(e.prototype[n]=function(){var e=o?[1]:arguments,n=this.__chain__,u=this.__wrapped__,l=!!this.__actions__.length,c=u instanceof r,h=e[0],f=c||Ts(u);f&&a&&"function"==typeof h&&1!=h.length&&(c=f=!1);var d=function(t){return o&&n?s(t,1)[0]:s.apply(M,le([t],e))},g={func:Vi,args:[d],thisArg:M},p=c&&!l;if(o&&!n)return p?(u=u.clone(),u.__actions__.push(g),t.call(u)):s.call(M,this.value())[0];if(!o&&f){u=p?u:new r(this);var v=t.apply(u,e);return v.__actions__.push(g),new i(v,n)}return this.thru(d)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Ka:Ja)[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?n.apply(this.value(),t):this[i](function(e){return n.apply(e,t)})}}),Ie(r.prototype,function(t,n){var i=e[n];if(i){var r=i.name;(jo[r]||(jo[r]=[])).push({name:n,func:i})}}),jo[En(M,k).name]=[{name:"wrapper",func:M}],r.prototype.clone=w,r.prototype.reverse=Q,r.prototype.value=it,e.prototype.chain=Hi,e.prototype.commit=Wi,e.prototype.concat=es,e.prototype.plant=Yi,e.prototype.reverse=Gi,e.prototype.toString=Zi,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=$i,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var M,O="3.10.1",T=1,k=2,I=4,E=8,L=16,j=32,z=64,N=128,B=256,D=30,R="...",F=150,q=16,U=200,V=1,H=2,W="Expected a function",Y="__lodash_placeholder__",G="[object Arguments]",Z="[object Array]",$="[object Boolean]",J="[object Date]",X="[object Error]",K="[object Function]",Q="[object Map]",tt="[object Number]",et="[object Object]",nt="[object RegExp]",it="[object Set]",rt="[object String]",at="[object WeakMap]",ot="[object ArrayBuffer]",st="[object Float32Array]",ut="[object Float64Array]",lt="[object Int8Array]",ct="[object Int16Array]",ht="[object Int32Array]",ft="[object Uint8Array]",dt="[object Uint8ClampedArray]",gt="[object Uint16Array]",pt="[object Uint32Array]",vt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39|#96);/g,wt=/[&<>"'`]/g,bt=RegExp(yt.source),xt=RegExp(wt.source),St=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Tt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,kt=RegExp(Tt.source),It=/[\u0300-\u036f\ufe20-\ufe23]/g,Et=/\\(\\)?/g,Lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jt=/\w*$/,zt=/^0[xX]/,Nt=/^\[object .+?Constructor\]$/,Bt=/^\d+$/,Dt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Rt=/($^)/,Ft=/['\n\r\u2028\u2029\\]/g,qt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Ut=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Vt=-1,Ht={};Ht[st]=Ht[ut]=Ht[lt]=Ht[ct]=Ht[ht]=Ht[ft]=Ht[dt]=Ht[gt]=Ht[pt]=!0,Ht[G]=Ht[Z]=Ht[ot]=Ht[$]=Ht[J]=Ht[X]=Ht[K]=Ht[Q]=Ht[tt]=Ht[et]=Ht[nt]=Ht[it]=Ht[rt]=Ht[at]=!1;var Wt={};Wt[G]=Wt[Z]=Wt[ot]=Wt[$]=Wt[J]=Wt[st]=Wt[ut]=Wt[lt]=Wt[ct]=Wt[ht]=Wt[tt]=Wt[et]=Wt[nt]=Wt[rt]=Wt[ft]=Wt[dt]=Wt[gt]=Wt[pt]=!0,Wt[X]=Wt[K]=Wt[Q]=Wt[it]=Wt[at]=!1;var Yt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Zt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},$t={function:!0,object:!0},Jt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Xt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kt=$t[typeof e]&&e&&!e.nodeType&&e,Qt=$t[typeof t]&&t&&!t.nodeType&&t,te=Kt&&Qt&&"object"==typeof i&&i&&i.Object&&i,ee=$t[typeof self]&&self&&self.Object&&self,ne=$t[typeof window]&&window&&window.Object&&window,ie=(Qt&&Qt.exports,te||ne!==(this&&this.window)&&ne||ee||this),re=P();ie._=re,(r=function(){return re}.call(e,n,e,t))!==M&&(t.exports=r)}).call(this)}).call(e,n(70)(t),n(41))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={type:{score:"score",staff:"staff",system:"system",slur:"slur",line:"line",voice:"voice",measure:"measure",note:"note",rest:"rest",chord:"chord",chordSymbol:"chordSymbol",clef:"clef",key:"key",timeSig:"timeSig",dynamic:"dynamic",page:"page",repeat:"repeat",text:"text"},font:{clefs:{treble:"9",base:"8",alto:"7"},timeSigs:{common:"«",half:"ª"},accidentals:{flat:"O",b:"O",doubleFlat:"X",natural:"p",sharp:"♕","#":"♕",doubleSharp:"♓"},flags:{eighth:{down:"♟",up:"¡"},sixteenth:{down:"¢",up:"£"},thirtysecond:{down:"¤",up:"¥"},sixtyfourth:{down:"¦",up:"§"},onehundredtwentyeighth:{down:"¨",up:"©"}},noteheads:{solid:"_",hollow:"`",whole:"♔"},rests:{1:"♞",2:"♛",4:"~",8:"t",16:"♜",32:"♗",64:"♘",128:"♙"}},clefs:{treble:"treble",base:"base",alto:"alto",tenor:"tenor"},noteTypes:[.5,1,2,4,8,16,32,64,128],measure:{defaultLength:200,minLength:75}};e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];return t.concat([e])}function o(t,e,n){return[].concat(r(t.slice(0,e)),[n],r(t.slice(e+1)))}function s(t,e){var n=void 0;return y.default.reduce(t,function(t,i){var r=e(i);if(n===r&&t[t.length-1])t[t.length-1].push(i);else{var a=[i];t.push(a)}return n=r,t},[])}function u(t,e){return y.default.reduce(t,function(t,n){if(e(n)||!t[t.length-1]){var i=[n];t.push(i)}else t[t.length-1].push(n);return t},[])}function l(t,e){for(var n=[],i=0;i<t;i++)n.push(e(i));return n}function c(t){return y.default.filter([t.type,t,y.default.map(t.children,c)],function(t){return y.default.size(t)})}function h(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var r=y.default.min(n.map(function(t){return t.length})),a=new Array(r),o=function(e){var i=n.map(function(t){return t[e]});a[e]=t.apply(null,i)},s=0;s<r;s++)o(s);return a}function f(t,e,n){var i=0;return y.default.map(e,function(e){var r=y.default.slice(n,i,i+e.length);return i+=e.length,t(e,r)})}function d(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.map(function(e){return e(t)})}}function g(t,e,n){var i=void 0,r=1,a=0;for(y.default.isUndefined(n)?(i=new Array(e.length),i[0]=e[0],a++):(i=new Array(e.length+1),i[0]=n);a<e.length;a++,r++)i[r]=t(i[r-1],e[a]);return i}function p(t){return!(t%2)}function v(t){return!p(t)}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.constructor,i=t.children?y.default.map(t.children,_):void 0;return new n(Object.assign({},t,e),i)}Object.defineProperty(e,"__esModule",{value:!0}),e.set=e.clone=e.isOdd=e.isEven=e.reductions=e.juxt=e.mapDeep=e.map=e.partitionWhen=e.partitionBy=e.serialize=e.doTimes=e.concat=void 0;var m=n(0),y=i(m),w=n(1);i(w);e.concat=a,e.doTimes=l,e.serialize=c,e.partitionBy=s,e.partitionWhen=u,e.map=h,e.mapDeep=f,e.juxt=d,e.reductions=g,e.isEven=p,e.isOdd=v,e.clone=_,e.set=o},function(t,e,n){var i,r,a=function(o,s){o=o||n(72);var u=o.window,l=o.document,c=new function(){function t(t,i,r,a,s){function l(n,l){"string"==typeof(l=l||(l=o(i,n))&&(l.get?l:l.value))&&"#"===l[0]&&(l=t[l.substring(1)]||l);var h,f="function"==typeof l,d=l,g=s||f&&!l.base?l&&l.get?n in t:t[n]:null;s&&g||(f&&g&&(l.base=g),f&&a!==!1&&(h=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(c[h[3].toLowerCase()+h[4]]=h[2]),d&&!f&&d.get&&"function"==typeof d.get&&e.isPlainObject(d)||(d={value:d,writable:!0}),(o(t,n)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=r),u(t,n,d))}var c={};if(i){for(var h in i)i.hasOwnProperty(h)&&!n.test(h)&&l(h);for(var h in c){var f=c[h],d=t["set"+f],g=t["get"+f]||d&&t["is"+f];!g||a!==!0&&0!==g.length||l(h,{get:g,set:d})}}return t}function e(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n)}return this}var n=/^(statics|enumerable|beans|preserve)$/,i=[],r=i.slice,a=Object.create,o=Object.getOwnPropertyDescriptor,u=Object.defineProperty,l=i.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},c=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},h=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},f=function(t,e,n){if(t){var i=o(t,"length");(i&&"number"==typeof i.value?l:c).call(t,e,n=n||t)}return n};return t(e,{inject:function(e){if(e){var n=e.statics===!0?e:e.statics,i=e.beans,r=e.preserve;n!==e&&t(this.prototype,e,e.enumerable,i,r),t(this,n,!0,i,r)}for(var a=1,o=arguments.length;a<o;a++)this.inject(arguments[a]);return this},extend:function(){for(var e,n,i,r=this,o=0,s=arguments.length;o<s&&(!e||!n);o++)i=arguments[o],e=e||i.initialize,n=n||i.prototype;return e=e||function(){r.apply(this,arguments)},n=e.prototype=n||a(this.prototype),u(n,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this,!0),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}},!0).inject({initialize:e,set:e,inject:function(){for(var e=0,n=arguments.length;e<n;e++){var i=arguments[e];i&&t(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){var t=a(this);return t.inject.apply(t,arguments)},each:function(t,e){return f(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:h,each:f,create:a,define:u,describe:o,clone:function(t){return h(new t.constructor,t)},isPlainObject:function(t){var n=null!=t&&t.constructor;return n&&(n===Object||n===e||"Object"===n.name)},pick:function(t,e){return t!==s?t:e},slice:function(t,e,n){return r.call(t,e,n)}}})};t.exports=c,c.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?g.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},set:function(t,e){return t&&c.filter(this,t,e,this._prioritize),this},statics:{exports:{enumerable:!0},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(!c.equals(t[n],e[n]))return!1}else{var i=Object.keys(t),n=i.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!c.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===c){var r=this.peek(t,e);return t.__index++,r}var a=this.prototype,o=a._readIndex,u=e||o&&t.__index||0,l=t.length,h=t[u];return i=i||l-u,h instanceof this||n&&n.readNull&&null==h&&i<=1?(o&&(t.__index=u+1),h&&n&&n.clone?h.clone():h):(h=c.create(a),o&&(h.__read=!0),h=h.initialize.apply(h,u>0||u+i<l?c.slice(t,u,u+i):t)||h,o&&(t.__index=u+h.__read,h.__read=s),h)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,a=[],o=e||0,s=i?o+i:t.length,u=o;u<s;u++)a.push(Array.isArray(r=t[u])?this.read(r,0,n):this.read(t,u,n,1));return a},readNamed:function(t,e,n,i,r){var a=this.getNamed(t,e),o=a!==s;if(o){var u=t._filtered;u||(u=t._filtered=c.create(t[0]),u._unfiltered=t[0]),u[e]=s}return this.read(o?[a]:t,n,i,r)},getNamed:function(t,e){var n=t[0];if(t._hasObject===s&&(t._hasObject=1===t.length&&c.isPlainObject(n)),t._hasObject)return e?n[e]:t._filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,i){function r(i){if(!(n&&i in n||a&&i in a)){var r=e[i];r!==s&&(t[i]=r)}}var a;if(i){for(var o,u={},l=0,c=i.length;l<c;l++)(o=i[l])in e&&(r(o),u[o]=!0);a=u}return Object.keys(e._unfiltered||e).forEach(r),t},isPlainValue:function(t,e){return c.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,a=!i;if(a&&(e.formatter=new g(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),a=t._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!a&&n||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var s=0,u=t.length;s<u;s++)r[s]=c.serialize(t[s],e,n,i)}else if(c.isPlainObject(t)){r={};for(var l=Object.keys(t),s=0,u=l.length;s<u;s++){var h=l[s];r[h]=c.serialize(t[h],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return a&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var a=t,o=!n,s=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],l="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];u=c.exports[u],a=[];for(var h=u?1:0,f=t.length;h<f;h++)a.push(c.deserialize(t[h],e,n,l,s));if(u){var d=a;e?a=e(u,d,o||r):(a=c.create(u.prototype),u.apply(a,d))}}else if(c.isPlainObject(t)){a={},i&&(n.dictionary=a);for(var g in t)a[g]=c.deserialize(t[g],e,n)}return s?a[1]:a},exportJSON:function(t,e){var n=c.serialize(t,e);return e&&e.asString===!1?n:JSON.stringify(n)},importJSON:function(t,e){return c.deserialize("string"==typeof t?JSON.parse(t):t,function(t,n,i){var r=i&&e&&e.constructor===t,a=r?e:c.create(t.prototype);if(1===n.length&&a instanceof P&&(r||!(a instanceof O))){var o=n[0];c.isPlainObject(o)&&(o.insert=!1)}return(r?a.set:t).apply(a,n),r&&(e=null),a})},splice:function(t,e,n,i){var r=e&&e.length,a=n===s;(n=a?t.length:n)>t.length&&(n=t.length);for(var o=0;o<r;o++)e[o]._index=n+o;if(a)return t.push.apply(t,e),[];var u=[n,i];e&&u.push.apply(u,e);for(var l=t.splice.apply(t,u),o=0,c=l.length;o<c;o++)l[o]._index=s;for(var o=n+r,c=t.length;o<c;o++)t[o]._index=o;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(t,e){if("string"!=typeof t)c.each(t,function(t,e){this.on(e,t)},this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};r=r[t]=r[t]||[],r.indexOf(e)===-1&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"!=typeof t)return void c.each(t,function(t,e){this.off(e,t)},this);var n,i=this._eventTypes,r=i&&i[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||(n=a.indexOf(e))!==-1&&1===a.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):n!==-1&&a.splice(n,1)),this},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=c.slice(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(n[a].apply(this,i)===!1){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var a=e[r],o=a&&a[i];o&&o.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};c.each(n,function(t,n){var r="string"==typeof t,a=r?t:n,o=c.capitalize(a),s=a.substring(2).toLowerCase();i[s]=r?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(s,e),t&&this.on(s,t),this[a]=t}}),e._eventTypes=i}return t.base.apply(this,arguments)}}},f=c.extend({_class:"PaperScope",initialize:function t(){a=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=at.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ot.nativeModes},at.release(n)}if(!this.agent){var i=o.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],s="darwin"===r?"mac":r,u=e.agent=e.browser={platform:s};s&&(u[s]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,n,i,r){if(!u.chrome){var a="opera"===e?i:/^(node|trident)$/.test(e)?r:n;u.version=a,u.versionNumber=parseFloat(a),e="trident"===e?"msie":e,u.name=e,u[e]=!0}}),u.chrome&&delete u.webkit,u.atom&&delete u.chrome}},version:"0.10.3",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){a.PaperScript.execute(t,this,e),X.updateFocus()},install:function(t){var e=this;c.each(["project","view","tool"],function(n){c.define(t,n,{configurable:!0,get:function(){return e[n]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return a=this,this.project=new A(t),this},createCanvas:function(t,e){return at.getCanvas(t,e)},activate:function(){a=this},clear:function(){for(var t=this.projects,e=this.tools,n=this.palettes,i=t.length-1;i>=0;i--)t[i].remove();for(var i=e.length-1;i>=0;i--)e[i].remove();for(var i=n.length-1;i>=0;i--)n[i].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),d=c.extend(h,{initialize:function(t){this._scope=a,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),g=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});g.instance=new g;var p=new function(){function t(t,e,n){return t<e?e:t>n?n:t}function e(t,e,n){function i(t){var e=134217729*t,n=t-e,i=n+e;return[i,t-i]}var r=e*e-t*n,o=e*e+t*n;if(3*a(r)<o){var s=i(t),u=i(e),l=i(n),c=e*e,h=u[0]*u[0]-c+2*u[0]*u[1]+u[1]*u[1],f=t*n;r=c-f+(h-(s[0]*l[0]-f+s[0]*l[1]+s[1]*l[0]+s[1]*l[1]))}return r}function n(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?s(2,-Math.round(u(t))):0}var i=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],r=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],a=Math.abs,o=Math.sqrt,s=Math.pow,u=Math.log2||function(t){return Math.log(t)*Math.LOG2E},l=1e-12,c=1.12e-16;return{EPSILON:l,MACHINE_EPSILON:c,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(o(2)-1)/3,isZero:function(t){return t>=-l&&t<=l},clamp:t,integrate:function(t,e,n,a){for(var o=i[a-2],s=r[a-2],u=.5*(n-e),l=u+e,c=0,h=a+1>>1,f=1&a?s[c++]*t(l):0;c<h;){var d=u*o[c];f+=s[c++]*(t(l+d)+t(l-d))}return u*f},findRoot:function(e,n,i,r,o,s,u){for(var l=0;l<s;l++){var c=e(i),h=c/n(i),f=i-h;if(a(h)<u){i=f;break}c>0?(o=i,i=f<=r?.5*(r+o):f):(r=i,i=f>=o?.5*(r+o):f)}return t(i,r,o)},solveQuadratic:function(i,r,s,u,h,f){var d,g=1/0;if(a(i)<l){if(a(r)<l)return a(s)<l?-1:0;d=-s/r}else{r*=-.5;var p=e(i,r,s);if(p&&a(p)<c){var v=n(a(i),a(r),a(s));v&&(i*=v,r*=v,s*=v,p=e(i,r,s))}if(p>=-c){var _=p<0?0:o(p),m=r+(r<0?-_:_);0===m?(d=s/i,g=-d):(d=m/i,g=s/m)}}var y=0,w=null==h,b=h-l,x=f+l;return isFinite(d)&&(w||d>b&&d<x)&&(u[y++]=w?d:t(d,h,f)),g!==d&&isFinite(g)&&(w||g>b&&g<x)&&(u[y++]=w?g:t(g,h,f)),y},solveCubic:function(e,i,r,u,h,f,d){function g(t){v=t;var n=e*v;_=n+i,m=_*v+r,y=(n+_)*v+m,w=m*v+u}var v,_,m,y,w,b=n(a(e),a(i),a(r),a(u));if(b&&(e*=b,i*=b,r*=b,u*=b),a(e)<l)e=i,_=r,m=u,v=1/0;else if(a(u)<l)_=i,m=r,v=0;else{g(-(i/e)/3);var x=w/e,S=s(a(x),1/3),C=x<0?-1:1,A=-y/e,P=A>0?1.324717957244746*Math.max(S,o(A)):S,M=v-C*P;if(M!==v){do{g(M),M=0===y?v:v-w/y/(1+c)}while(C*M>C*v);a(e)*v*v>a(u/v)&&(m=-u/v,_=(m-r)/v)}}var O=p.solveQuadratic(e,_,m,h,f,d),T=null==f;return isFinite(v)&&(0===O||O>0&&v!==h[0]&&v!==h[1])&&(T||v>f-l&&v<d+l)&&(h[O++]=T?v:t(v,f,d)),O}}},v={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},_=c.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new _(this.x,this.y)},toString:function(){var t=g.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();p.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=_.read(arguments),e=this.getLength()*t.getLength();if(p.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=_.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=_.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n;return c.read(arguments)?i:Math.sqrt(i)},normalize:function(t){t===s&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new _(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new _(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=_.read(arguments);return new _(this.x+t.x,this.y+t.y)},subtract:function(){var t=_.read(arguments);return new _(this.x-t.x,this.y-t.y)},multiply:function(){var t=_.read(arguments);return new _(this.x*t.x,this.y*t.y)},divide:function(){var t=_.read(arguments);return new _(this.x/t.x,this.y/t.y)},modulo:function(){var t=_.read(arguments);return new _(this.x%t.x,this.y%t.y)},negate:function(){return new _(-this.x,-this.y)},isInside:function(){return b.read(arguments).contains(this)},isClose:function(){var t=_.read(arguments),e=c.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=_.read(arguments);return _.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=_.read(arguments);return _.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=p.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=_.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=_.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=_.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new _(t.x*e,t.y*e)},statics:{min:function(){var t=_.read(arguments),e=_.read(arguments);return new _(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=_.read(arguments),e=_.read(arguments);return new _(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new _(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},c.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new _(e(this.x),e(this.y))}},{})),m=_.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),y=c.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new y(this.width,this.height)},toString:function(){var t=g.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=y.read(arguments);return new y(this.width+t.width,this.height+t.height)},subtract:function(){var t=y.read(arguments);return new y(this.width-t.width,this.height-t.height)},multiply:function(){var t=y.read(arguments);return new y(this.width*t.width,this.height*t.height)},divide:function(){var t=y.read(arguments);return new y(this.width/t.width,this.height/t.height)},modulo:function(){var t=y.read(arguments);return new y(this.width%t.width,this.height%t.height)},negate:function(){return new y(-this.width,-this.height)},isZero:function(){var t=p.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new y(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new y(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new y(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new y(e(this.width),e(this.height))}},{})),w=y.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),b=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var r,a=typeof t;if("number"===a?(this._set(t,e,n,i),r=4):"undefined"===a||null===t?(this._set(0,0,0,0),r=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),r=1):t.x!==s||t.width!==s?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),r=1):t.from===s&&t.to===s&&(this._set(0,0,0,0),c.filter(this,t),r=1)),r===s){var o,u,l=_.readNamed(arguments,"from"),h=c.peek(arguments),f=l.x,d=l.y;if(h&&h.x!==s||c.hasNamed(arguments,"to")){var g=_.readNamed(arguments,"to");o=g.x-f,u=g.y-d,o<0&&(f=g.x,o=-o),u<0&&(d=g.y,u=-u)}else{var p=y.read(arguments);o=p.width,u=p.height}this._set(f,d,o,u),r=arguments.__index}return this.__read&&(this.__read=r),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new b(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?b.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=g.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?_:m)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=_.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?y:w)(this.width,this.height,this,"setSize")},setSize:function(){var t=y.read(arguments);this._fixX&&(this.x+=(this.width-t.width)*this._fixX),this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(t){this._fixX!==s&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=t-this.width:this.width=t-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(t){this._fixY!==s&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=t-this.height:this.height=t-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,this._fixY=.5},getCenter:function(t){return new(t?_:m)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=_.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==s||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(b.read(arguments)):this._containsPoint(_.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=b.read(arguments);return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(){var t=b.read(arguments);return t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(){var t=b.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y);return new b(e,n,Math.min(this.x+this.width,t.x+t.width)-e,Math.min(this.y+this.height,t.y+t.height)-n)},unite:function(){var t=b.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y);return new b(e,n,Math.max(this.x+this.width,t.x+t.width)-e,Math.max(this.y+this.height,t.y+t.height)-n)},include:function(){var t=_.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y);return new b(e,n,Math.max(this.x+this.width,t.x)-e,Math.max(this.y+this.height,t.y)-n)},expand:function(){var t=y.read(arguments),e=t.width,n=t.height;return new b(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===s?t:e)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],a=t[i?1:0],o="get"+r,s="get"+a,u="set"+r,l="set"+a,c="get"+n,h="set"+n;this[c]=function(t){return new(t?_:m)(this[o](),this[s](),this,h)},this[h]=function(){var t=_.read(arguments);this[u](t.x),this[l](t.y)}},{beans:!0})),x=b.extend({initialize:function(t,e,n,i,r,a){this._set(t,e,n,i,!0),this._owner=r,this._setter=a},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=b.prototype;return c.each(["x","y","width","height"],function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e.changeSelection&&e.changeSelection(2,t)}}))}),S=c.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments.length,r=!0;if(i>=6?this._set.apply(this,arguments):1===i||2===i?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):r=!1:i?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,a,o){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=a,o||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new S(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=g.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=_.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=_.read(arguments),e=_.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=_.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),a=Math.sin(t),o=n-n*r+i*a,s=i-n*a-i*r,u=this._a,l=this._b,c=this._c,h=this._d;return this._a=r*u+a*c,this._b=r*l+a*h,this._c=-a*u+r*c,this._d=-a*l+r*h,this._tx+=o*u+s*c,this._ty+=o*l+s*h,this._changed(),this},shear:function(){var t=_.read(arguments),e=_.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=_.read(arguments),e=_.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new _(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},append:function(t){if(t){var e=this._a,n=this._b,i=this._c,r=this._d,a=t._a,o=t._c,s=t._b,u=t._d,l=t._tx,c=t._ty;this._a=a*e+s*i,this._c=o*e+u*i,this._b=a*n+s*r,this._d=o*n+u*r,this._tx+=l*e+c*i,this._ty+=l*n+c*r,this._changed()}return this},prepend:function(t){if(t){var e=this._a,n=this._b,i=this._c,r=this._d,a=this._tx,o=this._ty,s=t._a,u=t._c,l=t._b,c=t._d,h=t._tx,f=t._ty;this._a=s*e+u*n,this._c=s*i+u*r,this._b=l*e+c*n,this._d=l*i+c*r,this._tx=s*a+u*o+h,this._ty=l*a+c*o+f,this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,a=this._ty,o=t*i-e*n,s=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(a)&&(this._a=i/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*a-i*r)/o,this._ty=(e*r-t*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new S(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(_.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new _),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var a=t[i],o=t[i+1];e[i]=a*this._a+o*this._c+this._tx,e[i+1]=a*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,a=[e,n,i,n,i,r,e,r];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),a=r.slice(),o=2;o<8;o++){var s=i[o],u=1&o;s<r[u]?r[u]=s:s>a[u]&&(a[u]=s)}return e||(e=new b),e._set(r[0],r[1],a[0]-r[0],a[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(_.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,a=this._c,o=this._d,s=this._tx,u=this._ty,l=i*o-r*a,c=null;if(l&&!isNaN(l)&&isFinite(s)&&isFinite(u)){var h=t.x-this._tx,f=t.y-this._ty;e||(e=new _),c=e._set((h*o-f*a)/l,(f*i-h*r)/l,n)}return c},decompose:function(){var t,e,n,i=this._a,r=this._b,a=this._c,o=this._d,s=i*o-r*a,u=Math.sqrt,l=Math.atan2,c=180/Math.PI;if(0!==i||0!==r){var h=u(i*i+r*r);t=Math.acos(i/h)*(r>0?1:-1),e=[h,s/h],n=[l(i*a+r*o,h*h),0]}else if(0!==a||0!==o){var f=u(a*a+o*o);t=Math.asin(a/f)*(o>0?1:-1),e=[s/f,f],n=[0,l(i*a+r*o,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new _(e),skewing:new _(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new _(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}},{})),C=c.extend({_class:"Line",initialize:function(t,e,n,i,r){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,a=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new _(this._px,this._py)},getVector:function(){return new _(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return C.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return C.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(C.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0))},isCollinear:function(t){return _.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return _.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,a,o,s,u,l){u||(n-=t,i-=e,o-=r,s-=a);var c=n*s-i*o;if(!p.isZero(c)){var h=t-r,f=e-a,d=(o*f-s*h)/c,g=(n*f-i*h)/c,v=1e-12,m=-v,y=1+v;if(l||m<d&&d<y&&m<g&&g<y)return l||(d=d<=0?0:d>=1?1:d),new _(t+d*n,e+d*i)}},getSide:function(t,e,n,i,r,a,o,s){o||(n-=t,i-=e);var u=r-t,l=a-e,c=u*i-l*n;return!s&&p.isZero(c)&&(c=(u*n+u*n)/(n*n+i*i))>=0&&c<=1&&(c=0),c<0?-1:c>0?1:0},getSignedDistance:function(t,e,n,i,r,a,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?a-e:e-a:((r-t)*i-(a-e)*n)/Math.sqrt(n*n+i*i)},getDistance:function(t,e,n,i,r,a,o){return Math.abs(C.getSignedDistance(t,e,n,i,r,a,o))}}}),A=d.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){d.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Z(null,null,this),this._view=X.create(this,t||at.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,a=e._id,o=r[a];o?o.flags|=t:i.push(r[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new O({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:I,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(s,t)},insertLayer:function(t,e){if(e instanceof O){e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(s,new O(P.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return P._getItems(this,t)},getItem:function(t){return P._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var a in e){var o=e[a];o&&o!=n&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new c({offset:new _(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new S],updateMatrix:!0}),a=0,o=i.length;a<o;a++)i[a].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var s=this._selectionItems,u=this._scope.settings.handleSize,l=this._updateVersion;for(var h in s)s[h]._drawSelection(t,e,u,s,l);t.restore()}}}),P=c.extend(h,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new S,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&c.isPlainObject(t),i=n&&t.internal===!0,r=this._matrix=new S,o=n&&t.project||a.project,u=a.settings;return this._id=i?null:v.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&u.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new Z(o._currentStyle,this,o),i||n&&t.insert===!1||!u.insertItems&&(!n||t.insert!==!0)?this._setProject(o):(n&&t.parent||o)._insertItem(s,this,!0),n&&t!==P.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function n(n){for(var a in n){var o=r[a];c.equals(o,"leading"===a?1.2*n.fontSize:n[a])||(i[a]=c.serialize(o,t,"data"!==a,e))}}var i={},r=this;return n(this._serializeFields),this instanceof M||n(this._style._defaults),[this._class,i]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=s),n&&40&t&&P._clearBoundsCache(n),2&t&&P._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,i=e._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||s,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=c.capitalize(t),t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?128:129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this.changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this.changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,n=t?_:m;if(!e){var i=this._pivot;e=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0)}return new n(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(_.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new m(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=_.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof S,i=c.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i);return arguments.length?r:new x(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=b.read(arguments),e=this.getBounds(),n=this._matrix,i=new S,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new S).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(P._updateBoundsCache(this,e.cacheItem),P._getBounds(n,t,e)):new b},_getCachedBounds:function(t,e){t=t&&t._orNullIfIdentity();var n=e.internal,i=e.cacheItem,r=n?null:this._matrix._orNullIfIdentity(),a=i&&(!t||t.equals(r))&&[e.stroke?1:0,e.handle?1:0,n?1:0].join("");if(P._updateBoundsCache(this._parent||this._symbol,i),a&&this._bounds&&a in this._bounds)return this._bounds[a].rect.clone();var o=this._getBounds(t||r,e);if(a){this._bounds||(this._bounds={});this._bounds[a]={rect:o.clone(),internal:e.internal}}return o},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=s;for(var n=0,i=e.list,r=i.length;n<r;n++){var a=i[n];a!==t&&(a._bounds=a._position=s,a._boundsCache&&P._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,a=i,o=r;n=n||{};for(var s=0,u=t.length;s<u;s++){var l=t[s];if(l._visible&&!l.isEmpty()){var c=l._getCachedBounds(e&&e.appended(l._matrix),n);i=Math.min(c.x,i),a=Math.min(c.y,a),r=Math.max(c.x+c.width,r),o=Math.max(c.y+c.height,o)}}return isFinite(i)?new b(i,a,r-i,o-a):new b}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new m(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=_.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this._decomposed;this.scale(e.x/t.x,e.y/t.y),n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,n=this._project._updateVersion;if(e&&e._updateVersion!==n&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.prepend(i.getGlobalMatrix(!0)),e._updateVersion=n}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof O)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(P.NO_INSERT),n=this._children,i=c.pick(t?t.insert:s,t===s||t===!0),r=c.pick(t?t.deep:s,!0);n&&e.copyAttributes(this),n&&!r||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var a=this._name,o=this._parent;if(a&&o){for(var n=o._children,u=a,l=1;n[a];)a=u+" "+l++;a!==u&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var a=n[i];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,s=t._name;this._data=o?c.clone(o):null,s&&this.setName(s)},rasterize:function(t,e){var n=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,r=n.getTopLeft().floor(),a=n.getBottomRight().ceil(),o=new y(a.subtract(r)),u=new k(P.NO_INSERT);if(!o.isZero()){var l=at.getCanvas(o.multiply(i)),h=l.getContext("2d"),f=(new S).scale(i).translate(r.negate());h.save(),f.applyToContext(h),this.draw(h,new c({matrices:[f]})),h.restore(),u.setCanvas(l)}return u.transform((new S).translate(r.add(o.divide(2))).scale(1/i)),(e===s||e)&&u.insertAbove(this),u},contains:function(){return!!this._contains(this._matrix._inverseTransform(_.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return b.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new R.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof P&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(_.read(arguments),L.getOptions(arguments))}function e(){var t=_.read(arguments),e=L.getOptions(arguments),n=[];return this._hitTest(t,c.set({all:n},e)),n}function n(t,e,n,i){var r=this._children;if(r)for(var a=r.length-1;a>=0;a--){var o=r[a],s=o!==i&&o._hitTest(t,e,n);if(s&&!e.all)return s}return null}return A.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){function i(t){return t&&d&&!d(t)&&(t=null),t&&e.all&&e.all.push(t),t}function r(e,n){var i=l["get"+n]();if(t.subtract(i).divide(u).length<=1)return new L(e,g,{name:c.hyphenate(n),point:i})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var a=this._matrix,o=n?n.appended(a):this.getGlobalMatrix().prepend(this.getView()._matrix),s=Math.max(e.tolerance,1e-12),u=e._tolerancePadding=new y(R._getStrokePadding(s,a.inverted()._shiftless()));if(!(t=a._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(u.multiply(2))._containsPoint(t))return null;var l,h,f=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),d=e.match,g=this;if(f&&(e.center||e.bounds)&&this._parent){if(l=this.getInternalBounds(),e.center&&(h=r("center","Center")),!h&&e.bounds)for(var p=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],v=0;v<8&&!h;v++)h=r("bounds",p[v]);h=i(h)}return h||(h=this._hitTestChildren(t,e,o)||f&&i(this._hitTestSelf(t,e,o,this.getStrokeScaling()?null:o.inverted()._shiftless()))||null),h&&h.point&&(h.point=a.transform(h.point)),h},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new L("fill",this)},matches:function(t,e){function n(t,e){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],a=e[i];if(c.isPlainObject(r)&&c.isPlainObject(a)){if(!n(r,a))return!1}else if(!c.equals(r,a))return!1}return!0}var i=typeof t;if("object"===i){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===i)return t(this);if("match"===t)return e(this);var a=/^(empty|editable)$/.test(t)?this["is"+c.capitalize(t)]():"type"===t?c.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;a=this._class}if("function"==typeof e)return!!e(a);if(e){if(e.test)return e.test(a);if(c.isPlainObject(e))return n(e,a)}return c.equals(a,e)},getItems:function(t){return P._getItems(this,t,this._matrix)},getItem:function(t){return P._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,a){if(!r){var o="object"==typeof n&&n,s=o&&o.overlapping,u=o&&o.inside,l=s||u,h=l&&b.read([l]);r={items:[],recursive:o&&o.recursive!==!1,inside:!!u,overlapping:!!s,rect:h,path:s&&new R.Rectangle({rectangle:h,insert:!1})},o&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var f=e._children,d=r.items,h=r.rect;i=h&&(i||new S);for(var g=0,p=f&&f.length;g<p;g++){var v=f[g],_=i&&i.appended(v._matrix),m=!0;if(h){var l=v.getBounds(_);if(!h.intersects(l))continue;h.contains(l)||r.overlapping&&(l.contains(h)||r.path.intersects(v,_))||(m=!1)}if(m&&v.matches(n)&&(d.push(v),a))break;if(r.recursive!==!1&&t(v,n,_,r,a),a&&d.length>0)break}return d}}},{importJSON:function(t){var e=c.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(s,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){e=c.slice(e);for(var i=e.length-1;i>=0;i--){var r=e[i];r?r._remove(!1,!0):e.splice(i,1)}c.splice(n,e,t,0);for(var a=this._project,o=a._changes,i=0,s=e.length;i<s;i++){var r=e[i],u=r._name;r._parent=this,r._setProject(a,!0),u&&r.setName(u),o&&this._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",copyTo:function(t){return t._insertItem(s,this.clone(!1))},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;a!==-1&&(e[i]==this&&delete e[i],r.splice(a,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var n=c.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,a=Math.min(n.length,i.length);r<a;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?c:_).read(arguments),i=_.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,i||this.getPosition(!0)))}},{translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,i){t&&t.isIdentity()&&(t=null);var r=this._matrix,a=(e||this._applyMatrix)&&(!r.isIdentity()||t||e&&n&&this._children);if(!t&&!a)return this;if(t&&(!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t)),a=a&&this._transformContent(r,n,i)){var o=this._pivot,s=this._style,u=s.getFillColor(!0),l=s.getStrokeColor(!0);o&&r._transformPoint(o,o,!0),u&&u.transform(r),l&&l.transform(r),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;this._changed(9);var f=c&&t&&t.decompose();if(f&&!f.shearing&&f.rotation%90==0){for(var d in c){var g=c[d];if(a||!g.internal){var p=g.rect;t._transformBounds(p,p)}}var v=this._boundsGetter,p=c[v&&v.getBounds||v||"getBounds"];p&&(this._position=p.getCenter(!0)),this._bounds=c}else t&&h&&(this._position=t._transformPoint(h,h));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,a=i.length;r<a;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(_.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(_.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(_.read(arguments))},localToParent:function(){return this._matrix._transformPoint(_.read(arguments))},fitBounds:function(t,e){t=b.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,a=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new b(new _,new y(n.width*a,n.height*a));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var i=this._style;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t),t.lineWidth=i.getStrokeWidth();var r=i.getStrokeJoin(),o=i.getStrokeCap(),s=i.getMiterLimit();if(r&&(t.lineJoin=r),o&&(t.lineCap=o),s&&(t.miterLimit=s),a.support.nativeDash){var u=i.getDashArray(),l=i.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(i.hasShadow()){var c=e.pixelRatio||1,h=n._shiftless().prepend((new S).scale(c,c)),f=h.transform(new _(i.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){var i=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,a=e.viewMatrix,o=this._matrix,s=r[r.length-1].appended(o);if(s.isInvertible()){a=a?a.appended(s):s,r.push(s),e.updateMatrix&&(s._updateVersion=i,this._globalMatrix=s);var u,l,c,h=this._blendMode,f=this._opacity,d="normal"===h,g=ot.nativeModes[h],p=d&&1===f||e.dontStart||e.clip||(g||d&&f<1)&&this._canComposite(),v=e.pixelRatio||1;if(!p){var _=this.getStrokeBounds(a);if(!_.width||!_.height)return;c=e.offset,l=e.offset=_.getTopLeft().floor(),u=t,t=at.getContext(_.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var m=n?n.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&a,y=!p&&e.clipItem,w=!m||y;if(p?(t.globalAlpha=f,g&&(t.globalCompositeOperation=h)):w&&t.translate(-l.x,-l.y),w&&(p?o:a).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(v,0,0,v,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,a,m),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(),p||(ot.process(h,t,u,f,l.subtract(c).multiply(v)),at.release(t),e.offset=c)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof F)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,u=4&a;if(this._drawSelected||(o=!1),(o||s||u)&&this._isUpdated(r)){var l,c=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,h,i),u){var d=this.getPosition(!0),g=d.x,p=d.y;t.beginPath(),t.arc(g,p,f,0,2*Math.PI,!0),t.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],_=f,m=n+1,y=0;y<4;y++){var w=v[y],b=w[0],x=w[1];t.moveTo(g+b*_,p+x*_),t.lineTo(g+b*m,p+x*m),t.stroke()}}if(s){var S=h._transformCorners(this.getInternalBounds());t.beginPath();for(var y=0;y<8;y++)t[y?"lineTo":"moveTo"](S[y],S[++y]);t.closePath(),t.stroke();for(var y=0;y<8;y++)t.fillRect(S[y]-f,S[++y]-f,n,n)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],function(t){this["removeOn"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}})),M=P.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),1026&e&&(this._clipItem=s)},_getClipItem:function(){var t=this._clipItem;if(t===s){t=null;for(var e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(e&&e.appended(i._matrix),c.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,a=0,o=r.length;a<o;a++){var s=r[a];s!==i&&s.draw(t,e)}}}),O=M.extend({_class:"Layer",initialize:function(){M.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),T=P.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t){this._initialize(t)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new w(t.width,t.height,this,"setSize")},setSize:function(){var t=y.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(y.min(this._radius,t.divide(2))):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new w(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=y.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var n=y.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(R[c.capitalize(this._type)])({center:new _,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),a.settings.applyMatrix&&e.setApplyMatrix(!0),(t===s||t)&&e.insertAbove(this),e},toShape:"#clone",_draw:function(t,e,n,i){var r=this._style,a=r.hasFill(),o=r.hasStroke(),s=e.dontFinish||e.clip,u=!i;if(a||o||s){var l=this._type,c=this._radius,h="circle"===l;if(e.dontStart||t.beginPath(),u&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,d=h?c:c.height,g=this._size,p=g.width,v=g.height;if(u&&"rectangle"===l&&0===f&&0===d)t.rect(-p/2,-v/2,p,v);else{var _=p/2,m=v/2,y=.44771525016920644,w=f*y,b=d*y,x=[-_,-m+d,-_,-m+b,-_+w,-m,-_+f,-m,_-f,-m,_-w,-m,_,-m+b,_,-m+d,_,m-d,_,m-b,_-w,m,_-f,m,-_+f,m,-_+w,m,-_,m-b,-_,m-d];i&&i.transform(x,x,32),t.moveTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),_!==f&&t.lineTo(x[8],x[9]),t.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),m!==d&&t.lineTo(x[16],x[17]),t.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),_!==f&&t.lineTo(x[24],x[25]),t.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}t.closePath()}s||!a&&!o||(this._setStyles(t,e,n),a&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new b(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(R._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),a=1;a<=4;a++){var o=new _(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(r),u=s.subtract(o.multiply(i)),l=new b(n?s.add(o.multiply(n)):s,u);if(l.contains(e))return{point:u,quadrant:a}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,a,o){var s=!1,u=this._style,l=r.stroke&&u.hasStroke(),c=r.fill&&u.hasFill();if(l||c){var h=this._type,f=this._radius,d=l?u.getStrokeWidth()/2:0,g=r._tolerancePadding.add(R._getStrokePadding(d,!u.getStrokeScaling()&&o));if("rectangle"===h){var p=g.multiply(2),v=t(this,i,p);if(v)s=e(i.subtract(v.point),f,g,v.quadrant);else{var _=new b(this._size).setCenter(0,0),m=_.expand(p),y=_.expand(p.negate());s=m._containsPoint(i)&&!y._containsPoint(i)}}else s=e(i,f,g)}return s?new L(l?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var a=new T(c.getNamed(r));return a._type=t,a._size=n,a._radius=i,a.translate(e)}return{Circle:function(){var e=_.readNamed(arguments,"center"),n=c.readNamed(arguments,"radius");return t("circle",e,new y(2*n),n,arguments)},Rectangle:function(){var e=b.readNamed(arguments,"rectangle"),n=y.min(y.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=T._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(c.hasNamed(t,"radius"))e=_.readNamed(t,"center"),n=y.readNamed(t,"radius");else{var i=b.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),k=P.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,e){if(!this._initialize(t,e!==s&&_.read(arguments,1))){var n="string"==typeof t?l.getElementById(t):t;n?this.setImage(n):this.setSource(t)}this._size||(this._size=new y,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=at.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new w(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=y.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(at.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&at.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new _(0,0).transform(t),n=new _(1,0).transform(t).subtract(e),i=new _(0,1).transform(t).subtract(e);return new y(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=n.getView(),i=t&&t.type||"load";e&&n.responds(i)&&(a=e._scope,n.emit(i,new Q(t)))}var n=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&J.add(t,{load:function(i){n._setImage(t),e(i)},error:e})},_setImage:function(t){this._canvas&&at.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new y(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=at.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){at.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new o.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=b.read(arguments),e=at.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=b.read(arguments),e=new k(P.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=_.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof D?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new b(t):"x"in t&&(e=new b(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=32,r=Math.min(e.width,i),a=Math.min(e.height,i),o=k._sampleContext;o?o.clearRect(0,0,i+1,i+1):o=k._sampleContext=at.getContext(new y(i)),o.save();var s=(new S).scale(r/e.width,a/e.height).translate(-e.x,-e.y);s.applyToContext(o),n&&n.draw(o,new c({clip:!0,matrices:[s]})),this._matrix.applyToContext(o);var u=this.getElement(),l=this._size;u&&o.drawImage(u,-l.width/2,-l.height/2),o.restore();for(var h=o.getImageData(.5,.5,Math.ceil(r),Math.ceil(a)).data,f=[0,0,0],d=0,g=0,p=h.length;g<p;g+=4){var v=h[g+3];d+=v,v/=255,f[0]+=h[g]*v,f[1]+=h[g+1]*v,f[2]+=h[g+2]*v}for(var g=0;g<3;g++)f[g]/=d;return d?W.read(f):null},getPixel:function(){var t=_.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new W("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=_.read(arguments),e=W.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),a=r.createImageData(1,1),o=a.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=i?255*i:255,r.putImageData(a,t.x,t.y)},createImageData:function(){var t=y.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=b.read(arguments);return t.isEmpty()&&(t=new b(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=_.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new b(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new L("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),I=P.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==s&&_.read(arguments,1))||this.setDefinition(t instanceof E?t:new E(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n,i){var r=this._definition._item._hitTest(t,e,n);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),E=c.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=v.get(),this.project=a.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return c.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&P._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new _),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new I(this,t)},clone:function(){return new E(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),L=c.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(t){var e=t&&c.read(t);return c.set({type:null,tolerance:a.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),j=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,i,r,a){var o,u,l,c,h=arguments.length;h>0&&(null==t||"object"==typeof t?1===h&&t&&"point"in t?(o=t.point,u=t.handleIn,l=t.handleOut,c=t.selection):(o=t,u=e,l=n,c=i):(o=[t,e],u=n!==s?[n,i]:null,l=r!==s?[r,a]:null)),new z(o,this,"_point"),new z(u,this,"_handleIn"),new z(l,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),c.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(_.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(_.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(_.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(129))},changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this.changeSelection(7,t)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new B(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},r=i.type,a=i.factor,o=this.getPrevious(),u=this.getNext(),l=(o||this)._point,c=this._point,h=(u||this)._point,f=l.getDistance(c),d=c.getDistance(h);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(o&&u){var g=l.subtract(h),p=a===s?.4:a,v=p*f/(f+d);e||this.setHandleIn(g.multiply(v)),n||this.setHandleOut(g.multiply(v-p))}}else{var m=a===s?.5:a,y=Math.pow(f,m),w=y*y,b=Math.pow(d,m),x=b*b;if(!e&&o){var S=2*x+3*b*y+w,C=3*b*(b+y);this.setHandleIn(0!==C?new _((x*l._x+S*c._x-w*h._x)/C-c._x,(x*l._y+S*c._y-w*h._y)/C-c._y):new _)}if(!n&&u){var S=2*w+3*y*b+x,C=3*y*(y+b);this.setHandleOut(0!==C?new _((w*h._x+S*c._x-x*l._x)/C-c._x,(w*h._y+S*c._y-x*l._y)/C-c._y):new _)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new j(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new j(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,a=t._point,o=e._point,s=t._handleIn,u=e._handleIn,l=e._handleOut,c=t._handleOut;this._point._set(i*a._x+r*o._x,i*a._y+r*o._y,!0),this._handleIn._set(i*s._x+r*u._x,i*s._y+r*u._y,!0),this._handleOut._set(i*c._x+r*l._x,i*c._y+r*l._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,s=i._y,u=2;return e[0]=o,e[1]=s,r&&(e[u++]=r._x+o,e[u++]=r._y+s),a&&(e[u++]=a._x+o,e[u++]=a._y+s),t&&(t._transformCoordinates(e,e,u/2),o=e[0],s=e[1],n?(i._x=o,i._y=s,u=2,r&&(r._x=e[u++]-o,r._y=e[u++]-s),a&&(a._x=e[u++]-o,a._y=e[u++]-s)):(r||(e[u++]=o,e[u++]=s),a||(e[u++]=o,e[u++]=s))),e}}),z=_.extend({initialize:function(t,e,n){var i,r,a;if(t)if((i=t[0])!==s)r=t[1];else{var o=t;(i=o.x)===s&&(o=_.read(arguments),i=o.x),r=o.y,a=o.selected}else i=r=0;this._x=i,this._y=r,this._owner=e,e[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=p.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),N=c.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,a,o,s){var u,l,c,h,f,d,g=arguments.length;3===g?(this._path=t,u=e,l=n):g?1===g?"segment1"in t?(u=new j(t.segment1),l=new j(t.segment2)):"point1"in t?(c=t.point1,f=t.handle1,d=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===g?(u=new j(t),l=new j(e)):4===g?(c=t,f=e,d=n,h=i):8===g&&(c=[t,e],h=[o,s],f=[n-t,i-e],d=[r-o,a-s]):(u=new j,l=new j),this._segment1=u||new j(c,null,f),this._segment2=l||new j(h,d,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=s},clone:function(){return new N(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return N.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(_.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(_.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(_.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(_.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return N.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new _(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=N.getLength(this.getValues(),0,1)),this._length},getArea:function(){return N.getArea(this.getValues())},getLine:function(){return new C(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new N(N.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return N.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=1e-8,i=1-n,r=null;if(t>=n&&t<=i){var a=N.subdivide(this.getValues(),t),o=a[0],s=a[1],u=e||this.hasHandles(),l=this._segment1,c=this._segment2,h=this._path;u&&(l._handleOut._set(o[2]-o[0],o[3]-o[1]),c._handleIn._set(s[4]-s[6],s[5]-s[7]));var f=o[6],d=o[7],g=new j(new _(f,d),u&&new _(o[4]-f,o[5]-d),u&&new _(s[2]-f,s[3]-d));h?(h.insert(l._index+1,g),r=this.getNext()):(this._segment2=g,this._changed(),r=new N(g,c))}return r},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===s?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===s?.5:e?t:this.getTimeAt(t))},reversed:function(){return new N(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,a=t._handleOut,o=e._handleIn,s=e._point,u=r.x,l=r.y,c=s.x,h=s.y,f=i?[u,l,u,l,c,h,c,h]:[u,l,u+a._x,l+a._y,c+o._x,h+o._y,c,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],u=t[5],l=t[6],c=t[7];e===s&&(e=.5);var h=1-e,f=h*n+e*r,d=h*i+e*a,g=h*r+e*o,p=h*a+e*u,v=h*o+e*l,_=h*u+e*c,m=h*f+e*g,y=h*d+e*p,w=h*g+e*v,b=h*p+e*_,x=h*m+e*w,S=h*y+e*b;return[[n,i,f,d,m,y,x,S],[x,S,w,b,v,_,l,c]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],a=t[i+2],o=t[i+4],s=t[i+6];if(r>=a==a>=o&&a>=o==o>=s||N.isStraight(t))n.push(t);else{var u=3*(a-o)-r+s,l=2*(r+o)-4*a,c=a-r,h=1e-8,f=1-h,d=[],g=p.solveQuadratic(u,l,c,d,h,f);if(g){d.sort();var v=d[0],_=N.subdivide(t,v);n.push(_[0]),g>1&&(v=(d[1]-v)/(1-v),_=N.subdivide(_[1],v),n.push(_[0])),n.push(_[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,a){var o=t[e],s=t[e+2],u=t[e+4],l=t[e+6],c=0;if(!(o<n&&l<n&&s<n&&u<n||o>n&&l>n&&s>n&&u>n)){var h=3*(s-o),f=3*(u-s)-h,d=l-o-h-f;c=p.solveCubic(d,f,h,o-n,i,r,a)}return c},getTimeOf:function(t,e){var n=new _(t[0],t[1]),i=new _(t[6],t[7]),r=1e-12,a=1e-7;if(null===(e.isClose(n,r)?0:e.isClose(i,r)?1:null))for(var o=[e.x,e.y],s=[],u=0;u<2;u++)for(var l=N.solveCubic(t,u,o[u],s,0,1),c=0;c<l;c++){var h=s[c];if(e.isClose(N.getPoint(t,h),a))return h}return e.isClose(n,a)?0:e.isClose(i,a)?1:null},getNearestTime:function(t,e){function n(n){if(n>=0&&n<=1){var i=e.getDistance(N.getPoint(t,n),!0);if(i<f)return f=i,d=n,!0}}if(N.isStraight(t)){var i=t[0],r=t[1],a=t[6],o=t[7],s=a-i,u=o-r,l=s*s+u*u;if(0===l)return 0;var c=((e.x-i)*s+(e.y-r)*u)/l;return c<1e-12?0:c>.999999999999?1:N.getTimeOf(t,new _(i+c*s,r+c*u))}for(var h=100,f=1/0,d=0,g=0;g<=h;g++)n(g/h);for(var p=1/(2*h);p>1e-8;)n(d-p)||n(d+p)||(p/=2);return d},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=N.subdivide(t,e)[1]),n<1&&(t=N.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=3*r-2*n-u,h=3*a-2*i-l,f=3*o-2*u-n,d=3*s-2*l-i;return Math.max(c*c,f*f)+Math.max(h*h,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7];return 3*((u-n)*(i+a)-(s-e)*(r+o)+r*(e-a)-i*(n-o)+u*(a+e/3)-s*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)N._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new b(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,a,o,s,u){function l(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>s[r]&&(s[r]=i)}a/=2;var c=o[r]-a,h=s[r]+a;if(t<c||e<c||n<c||i<c||t>h||e>h||n>h||i>h)if(e<t!=e<i&&n<t!=n<i)l(t,a),l(i,a);else{var f=3*(e-n)-t+i,d=2*(t+n)-4*e,g=e-t,v=p.solveQuadratic(f,d,g,u),_=1e-8,m=1-_;l(i,0);for(var y=0;y<v;y++){var w=u[y],b=1-w;_<=w&&w<=m&&l(b*b*b*t+3*b*b*w*e+3*b*w*w*n+w*w*w*i,a)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=R[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),c.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var a=new C(t,i),o=1e-7;if(a.getDistance(t.add(e))<o&&a.getDistance(i.add(n))<o){var s=r.dot(r),u=r.dot(e)/s,l=r.dot(n)/s;return u>=0&&u<=1&&l<=0&&l>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],a=e[6],o=e[7];return t(new _(i,r),new _(e[2]-i,e[3]-r),new _(e[4]-a,e[5]-o),new _(a,o),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new B(this,t):null},getTimeAt:function(t,e){return N.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(_.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return N.getTimeOf(this.getValues(),_.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=_.read(arguments),e=this.getValues(),n=N.getNearestTime(e,t),i=N.getPoint(e,n);return new B(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return N[t](i,n?e:N.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return N[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=9*(i-a)+3*(s-e),c=6*(e+a)-12*i,h=3*(i-e),f=9*(r-o)+3*(u-n),d=6*(n+o)-12*r,g=3*(r-n);return function(t){var e=(l*t+c)*t+h,n=(f*t+d)*t+g;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],a=t[1],o=t[2],s=t[3],u=t[4],l=t[5],c=t[6],h=t[7],f=p.isZero;f(o-r)&&f(s-a)&&(o=r,s=a),f(u-c)&&f(l-h)&&(u=c,l=h);var d,g,v=3*(o-r),m=3*(u-o)-v,y=c-r-v-m,w=3*(s-a),b=3*(l-s)-w,x=h-a-w-b;if(0===n)d=0===e?r:1===e?c:((y*e+m)*e+v)*e+r,g=0===e?a:1===e?h:((x*e+b)*e+w)*e+a;else{var S=1e-8,C=1-S;if(e<S?(d=v,g=w):e>C?(d=3*(c-u),g=3*(h-l)):(d=(3*y*e+2*m)*e+v,g=(3*x*e+2*b)*e+w),i){0===d&&0===g&&(e<S||e>C)&&(d=u-o,g=l-s);var A=Math.sqrt(d*d+g*g);A&&(d/=A,g/=A)}if(3===n){var u=6*y*e+2*m,l=6*x*e+2*b,P=Math.pow(d*d+g*g,1.5);d=0!==P?(d*l-g*u)/P:0,g=0}}return 2===n?new _(g,-d):new _(d,g)}return{statics:{classify:function(t){function e(t,e,n){var i=e!==s,r=i&&e>0&&e<1,a=i&&n>0&&n<1;return!i||(r||a)&&("loop"!==t||r&&a)||(t="arch",r=a=!1),{type:t,roots:r||a?r&&a?e<n?[e,n]:[n,e]:[r?e:n]:null}}var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],u=t[5],l=t[6],c=t[7],h=n*(c-u)+i*(o-l)+l*u-c*o,f=r*(i-c)+a*(l-n)+n*c-i*l,d=o*(a-i)+u*(n-r)+r*i-a*n,g=3*d,v=g-f,_=v-f+h,m=Math.sqrt(_*_+v*v+g*g),y=0!==m?1/m:0,w=p.isZero,b="serpentine";if(_*=y,v*=y,g*=y,w(_))return w(v)?e(w(g)?"line":"quadratic"):e(b,g/(3*v));var x=3*v*v-4*_*g;if(w(x))return e("cusp",v/(2*_));var S=x>0?Math.sqrt(x/3):Math.sqrt(-x),C=2*_;return e(x>0?b:"loop",(v+S)/C,(v-S)/C)},getLength:function(n,i,r,a){if(i===s&&(i=0),r===s&&(r=1),N.isStraight(n)){var o=n;r<1&&(o=N.subdivide(o,r)[0],i/=r),i>0&&(o=N.subdivide(o,i)[1]);var u=o[6]-o[0],l=o[7]-o[1];return Math.sqrt(u*u+l*l)}return p.integrate(a||t(n),i,r,e(i,r))},getTimeAt:function(n,i,r){function a(t){return _+=p.integrate(f,r,t,e(r,t)),r=t,_-i}if(r===s&&(r=i<0?1:0),0===i)return r;var o=Math.abs,u=1e-12,l=i>0,c=l?r:0,h=l?1:r,f=t(n),d=N.getLength(n,c,h,f),g=o(i)-d;if(o(g)<u)return l?h:c;if(g>u)return null;var v=i/d,_=0;return p.findRoot(a,f,r+v,c,h,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=3*i-e-3*a+s,c=3*e-6*i+3*a,h=-3*e+3*i,f=3*r-n-3*o+u,d=3*n-6*r+3*o,g=-3*n+3*r,v=1e-8,_=1-v,m=[];return p.solveCubic(9*(l*l+f*f),9*(l*c+d*f),2*(c*c+d*d)+3*(h*l+g*f),h*c+d*g,m,v,_),m.sort()}}}},new function(){function t(t,e,n,i,r,a,o,s,u){var l=!u&&n.getPrevious()===a,c=!u&&n!==a&&n.getNext()===a,h=1e-8,f=1-h;if(null==i&&(i=n.getTimeOf(r)),null!==i&&i>=(l?h:0)&&i<=(c?f:1)&&(null==o&&(o=a.getTimeOf(s)),null!==o&&o>=(c?h:0)&&o<=(l?f:1))){var d=new B(n,i,r||n.getPointAtTime(i),u),g=new B(a,o,s||a.getPointAtTime(o),u);d._intersection=g,g._intersection=d,e&&!e(d)||B.insert(t,d,!0)}}function e(r,a,o,s,u,l,c,h,f,d,g,p,v){if(++f>=4096||++h>=40)return f;var _,m,y=1e-9,w=a[0],b=a[1],x=a[6],S=a[7],A=C.getSignedDistance,P=A(w,b,x,S,a[2],a[3]),M=A(w,b,x,S,a[4],a[5]),O=P*M>0?.75:4/9,T=O*Math.min(0,P,M),k=O*Math.max(0,P,M),I=A(w,b,x,S,r[0],r[1]),E=A(w,b,x,S,r[2],r[3]),L=A(w,b,x,S,r[4],r[5]),j=A(w,b,x,S,r[6],r[7]),z=n(I,E,L,j),B=z[0],D=z[1];if(0===P&&0===M&&0===I&&0===E&&0===L&&0===j||null==(_=i(B,D,T,k))||null==(m=i(B.reverse(),D.reverse(),T,k)))return f;var R=d+(g-d)*_,F=d+(g-d)*m;if(Math.max(v-p,F-R)<y){var q=(R+F)/2,U=(p+v)/2;t(u,l,c?s:o,c?U:q,null,c?o:s,c?q:U,null)}else if(r=N.getPart(r,_,m),m-_>.8)if(F-R>v-p){var V=N.subdivide(r,.5),q=(R+F)/2;f=e(a,V[0],s,o,u,l,!c,h,f,p,v,R,q),f=e(a,V[1],s,o,u,l,!c,h,f,p,v,q,F)}else{var V=N.subdivide(a,.5),U=(p+v)/2;f=e(V[0],r,s,o,u,l,!c,h,f,p,U,R,F),f=e(V[1],r,s,o,u,l,!c,h,f,U,v,R,F)}else f=v-p>=y?e(a,r,s,o,u,l,!c,h,f,p,v,R,F):e(r,a,o,s,u,l,c,h,f,R,F,p,v);return f}function n(t,e,n,i){var r,a=[0,t],o=[1/3,e],s=[2/3,n],u=[1,i],l=e-(2*t+i)/3,c=n-(t+2*i)/3;if(l*c<0)r=[[a,o,u],[a,s,u]];else{var h=l/c;r=[h>=2?[a,o,u]:h<=.5?[a,s,u]:[a,o,s,u],[a,u]]}return(l||c)<0?r.reverse():r}function i(t,e,n,i){return t[0][1]<n?r(t,!0,n):e[0][1]>i?r(e,!1,i):t[0][0]}function r(t,e,n){for(var i=t[0][0],r=t[0][1],a=1,o=t.length;a<o;a++){var s=t[a][0],u=t[a][1];if(e?u>=n:u<=n)return u===n?s:i+(n-r)*(s-i)/(u-r);i=s,r=u}return null}function a(t,e,n,i,r){var a=p.isZero;if(a(i)&&a(r)){var o=N.getTimeOf(t,new _(e,n));return null===o?[]:[o]}for(var s=Math.atan2(-r,i),u=Math.sin(s),l=Math.cos(s),c=[],h=[],f=0;f<8;f+=2){var d=t[f]-e,g=t[f+1]-n;c.push(d*l-g*u,d*u+g*l)}return N.solveCubic(c,1,0,h,0,1),h}function o(e,n,i,r,o,s,u){for(var l=n[0],c=n[1],h=n[6],f=n[7],d=a(e,l,c,h-l,f-c),g=0,p=d.length;g<p;g++){var v=d[g],_=N.getPoint(e,v),m=N.getTimeOf(n,_);if(null!==m){var y=N.getPoint(n,m);t(o,s,u?r:i,u?m:v,u?y:_,u?i:r,u?v:m,u?_:y)}}}function s(e,n,i,r,a,o){var s=C.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);s&&t(a,o,i,null,s,r,null,s)}function u(n,i,r,a,u,l){var c=1e-12,f=Math.min,d=Math.max;if(d(n[0],n[2],n[4],n[6])+c>f(i[0],i[2],i[4],i[6])&&f(n[0],n[2],n[4],n[6])-c<d(i[0],i[2],i[4],i[6])&&d(n[1],n[3],n[5],n[7])+c>f(i[1],i[3],i[5],i[7])&&f(n[1],n[3],n[5],n[7])-c<d(i[1],i[3],i[5],i[7])){var g=h(n,i);if(g)for(var p=0;p<2;p++){var v=g[p];t(u,l,r,v[0],null,a,v[1],null,!0)}else{var _=N.isStraight(n),m=N.isStraight(i),y=_&&m,w=_&&!m;(y?s:_||m?o:e)(w?i:n,w?n:i,w?a:r,w?r:a,u,l,w,0,0,0,1,0,1)}}return u}function l(e,n,i,r){var a=N.classify(e);if("loop"===a.type){var o=a.roots;t(i,r,n,o[0],null,n,o[1],null)}return i}function c(t,e,n,i,r,a){var o=!e;o&&(e=t);for(var s,c,h=t.length,f=e.length,d=[],g=[],p=0;p<f;p++)d[p]=e[p].getValues(r);for(var p=0;p<h;p++){var v=t[p],_=o?d[p]:v.getValues(i),m=v.getPath();m!==c&&(c=m,s=[],g.push(s)),o&&l(_,v,s,n);for(var y=o?p+1:0;y<f;y++){if(a&&s.length)return s;u(_,d[y],v,e[y],s,n)}}s=[];for(var p=0,w=g.length;p<w;p++)s.push.apply(s,g[p]);return s}function h(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=C.getDistance,a=1e-8,o=1e-7,s=N.isStraight(t),u=N.isStraight(e),l=s&&u,c=n(t)<n(e),h=c?e:t,f=c?t:e,d=h[0],g=h[1],p=h[6]-d,v=h[7]-g;if(r(d,g,p,v,f[0],f[1],!0)<o&&r(d,g,p,v,f[6],f[7],!0)<o)!l&&r(d,g,p,v,h[2],h[3],!0)<o&&r(d,g,p,v,h[4],h[5],!0)<o&&r(d,g,p,v,f[2],f[3],!0)<o&&r(d,g,p,v,f[4],f[5],!0)<o&&(s=u=l=!0);else if(l)return null;if(s^u)return null;for(var m=[t,e],y=[],w=0;w<4&&y.length<2;w++){var b=1&w,x=1^b,S=w>>1,A=N.getTimeOf(m[b],new _(m[x][S?6:0],m[x][S?7:1]));if(null!=A){var P=b?[S,A]:[A,S];(!y.length||i(P[0]-y[0][0])>a&&i(P[1]-y[0][1])>a)&&y.push(P)}if(w>2&&!y.length)break}if(2!==y.length)y=null;else if(!l){var M=N.getPart(t,y[0][0],y[1][0]),O=N.getPart(e,y[0][1],y[1][1]);(i(O[2]-M[2])>o||i(O[3]-M[3])>o||i(O[4]-M[4])>o||i(O[5]-M[5])>o)&&(y=null)}return y}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?u(e,n,this,t,[]):l(e,this,[])},statics:{getOverlaps:h,getIntersections:c,getCurveLineIntersections:a}}}),B=c.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(n._time=e.getTimeOf(n._point)))return n._setCurve(e),e}var e=this._path,n=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof B){var i=this.getCurve(),r=t.getCurve(),a=i._path;if(a===r._path){var o=Math.abs,s=1e-7,u=o(this.getOffset()-t.getOffset()),l=!e&&this._intersection,c=!e&&t._intersection;n=(u<s||a&&o(a.getLength()-u)<s)&&(!l&&!c||l&&c&&l.equals(c,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=g.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function t(t,e){var n=t.getValues(),i=N.classify(n).roots||N.getPeaks(n),r=i.length,a=e&&r>1?i[r-1]:r>0?i[0]:.5;d.push(N.getLength(n,e?a:0,e?1:a)/2)}function e(t,e,n){return e<n?t>e&&t<n:t>e||t<n}var n=this._intersection;if(!n)return!1;var i=this.getTime(),r=n.getTime(),a=1e-8,o=1-a,s=i>=a&&i<=o,u=r>=a&&r<=o;if(s&&u)return!this.isTouching();var l=this.getCurve(),c=i<a?l.getPrevious():l,h=n.getCurve(),f=r<a?h.getPrevious():h;if(i>o&&(l=l.getNext()),r>o&&(h=h.getNext()),!(c&&l&&f&&h))return!1;var d=[];s||(t(c,!0),t(l,!1)),u||(t(f,!0),t(h,!1));var g=this.getPoint(),p=Math.min.apply(Math,d),v=s?l.getTangentAtTime(i):l.getPointAt(p).subtract(g),_=s?v.negate():c.getPointAt(-p).subtract(g),m=u?h.getTangentAtTime(r):h.getPointAt(p).subtract(g),y=u?m.negate():f.getPointAt(-p).subtract(g),w=_.getAngle(),b=v.getAngle(),x=y.getAngle(),S=m.getAngle();return!!(s?e(w,x,S)^e(b,x,S)&&e(w,S,x)^e(b,S,x):e(x,w,b)^e(S,w,b)&&e(x,b,w)^e(S,b,w))},hasOverlap:function(){return!!this._overlap}},c.each(N._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}},{preserve:!0}),new function(){function t(t,e,n){function i(n,i){for(var a=n+i;a>=-1&&a<=r;a+=i){var o=t[(a%r+r)%r];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(var r=t.length,a=0,o=r-1;a<=o;){var s,u=a+o>>>1,l=t[u];if(n&&(s=e.equals(l)?l:i(u,-1)||i(u,1)))return e._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=e.getPath(),h=l.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime()))<0?o=u-1:a=u+1}return t.splice(a,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),D=P.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(c.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var r=n[0];i=r&&Array.isArray(r[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?F:R)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var n=+i[t];return s&&(n+=u[e]),n}function n(t){return new _(e(t,"x"),e(t+1,"y"))}var i,r,a,o=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,u=new _,l=new _;this.clear();for(var c=0,h=o&&o.length;c<h;c++){var f=o[c],d=f[0],g=d.toLowerCase();i=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var p=i&&i.length;switch(s=d===g,"z"!==r||/[mz]/.test(g)||this.moveTo(u),g){case"m":case"l":for(var v="m"===g,m=0;m<p;m+=2)this[v?"moveTo":"lineTo"](u=n(m)),v&&(l=u,v=!1);a=u;break;case"h":case"v":var w="h"===g?"x":"y";u=u.clone();for(var m=0;m<p;m++)u[w]=e(m,w),this.lineTo(u);a=u;break;case"c":for(var m=0;m<p;m+=6)this.cubicCurveTo(n(m),a=n(m+2),u=n(m+4));break;case"s":for(var m=0;m<p;m+=4)this.cubicCurveTo(/[cs]/.test(r)?u.multiply(2).subtract(a):u,a=n(m),u=n(m+2)),r=g;break;case"q":for(var m=0;m<p;m+=4)this.quadraticCurveTo(a=n(m),u=n(m+2));break;case"t":for(var m=0;m<p;m+=2)this.quadraticCurveTo(a=/[qt]/.test(r)?u.multiply(2).subtract(a):u,u=n(m)),r=g;break;case"a":for(var m=0;m<p;m+=7)this.arcTo(u=n(m+5),new y(+i[m],+i[m+1]),+i[m+2],+i[m+4],+i[m+3]);break;case"z":this.closePath(1e-12),u=l}r=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,a=this._matrix._orNullIfIdentity(),o=r?a:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(a).touches(t.getBounds(o))?N.getIntersections(this.getCurves(),!r&&t.getCurves(),e,a,o,i):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=_.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,a=e.length;r<a;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",a=t[r],o=e[r],s=this[r];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var u=s.length,l=o.length;if(u<l)for(var c=i?j:R,h=u;h<l;h++)this.add(new c);else u>l&&this[i?"removeSegments":"removeChildren"](l,u);for(var h=0;h<l;h++)s[h].interpolate(a[h],o[h],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,a=i.length,o=[],s=0;e=!0;for(var u=r-1;u>=0&&e;u--){var l=n[u];e=!1;for(var c=a-1;c>=0&&!e;c--)l.compare(i[c])&&(o[c]||(o[c]=!0,s++),e=!0)}e=e&&s===a}return e}}),R=D.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==s||t.x===s&&t.point===s?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=s,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=s,16&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 32&e&&(this._bounds=s)},getStyle:function(){var t=this._parent;return(t instanceof F?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=s,n){var i=t[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(j.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new N(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new N(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function n(e,n){if(e._transformCoordinates(t,p),i=p[0],r=p[1],v)_.push("M"+d.pair(i,r)),v=!1;else if(s=p[2],u=p[3],s===i&&u===r&&l===a&&c===o){if(!n){var h=i-a,f=r-o;_.push(0===h?"v"+d.number(f):0===f?"h"+d.number(h):"l"+d.pair(h,f))}}else _.push("c"+d.pair(l-a,c-o)+" "+d.pair(s-a,u-o)+" "+d.pair(i-a,r-o));a=i,o=r,l=p[4],c=p[5]}var i,r,a,o,s,u,l,c,h=this._segments,f=h.length,d=new g(e),p=new Array(6),v=!0,_=[];if(!f)return"";for(var m=0;m<f;m++)n(h[m]);return this._closed&&f>0&&(n(h[0],!0),_.push("z")),_.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,a=null==e,e=a?n.length:e,o=0;o<r;o++){var s=t[o];s._path&&(s=t[o]=s.clone()),s._path=this,s._index=e+o,s._selection&&this._updateSelection(s,0,s._selection)}if(a)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));for(var o=e+r,u=n.length;o<u;o++)n[o]._index=o}if(i){var l=this._countCurves(),c=e>0&&e+r-1===l?e-1:e,h=c,f=Math.min(c+r,l);t._curves&&(i.splice.apply(i,[c,0].concat(t._curves)),h+=t._curves.length);for(var o=h;o<f;o++)i.splice(o,0,new N(this,null,null));this._adjustCurves(c,f)}return this._changed(25),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,a=t;a<e;a++)n=r[a],n._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(j.readList(arguments)):this._add([j.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(j.readList(arguments,1),t):this._add([j.read(arguments,1)],t)[0]},addSegment:function(){return this._add([j.read(arguments)])[0]},insertSegment:function(t){return this._add([j.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(j.readList(t))},insertSegments:function(t,e){return this._add(j.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=c.pick(e,this._segments.length);var i=this._segments,r=this._curves,a=i.length,o=i.splice(t,e-t),s=o.length;if(!s)return o;for(var u=0;u<s;u++){var l=o[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}for(var u=t,h=i.length;u<h;u++)i[u]._index=u;if(r){for(var f=t>0&&e===a+(this._closed?1:0)?t-1:t,r=r.splice(f,s),u=r.length-1;u>=0;u--)r[u]._path=null;n&&(o._curves=r.slice(1)),this._adjustCurves(f,f)}return this._changed(25),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var a=i+1===r;t+=N.getArea(N.getValues(e[i],e[a?0:i+1],null,a&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time,r=1e-8;i>1-r&&(n++,i=0);var a=this.getCurves();if(n>=0&&n<a.length){i>=r&&a[n++].divideAtTime(i);var o,s=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),o=this):(o=new R(P.NO_INSERT),o.insertAbove(this),o.copyAttributes(this)),o._add(s,0),this.addSegment(s[0]),o}return null},split:function(t,e){var n,i=e===s?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=i?this.splitAt(i):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;r&&r._point.isClose(a._point,n)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&t.reverse(),a=t.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var u=this.getFirstSegment(),l=this.getLastSegment();return u!==l&&u._point.isClose(l._point,n)&&(u.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var a=e[r];!a.hasHandles()&&(!a.hasLength(i)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new q(this,t||.25,256,!0),n=e.parts,i=n.length,r=[],a=0;a<i;a++)r.push(new j(n[a].curve.slice(0,2)));!this._closed&&i>0&&r.push(new j(n[i-1].curve.slice(6))),this.setSegments(r)},simplify:function(t){var e=new U(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function e(t,e){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==n)throw new Error(t._class+" "+i+" of "+r+" is not part of "+n);e&&t instanceof N&&i++}else i="number"==typeof t?t:e;return Math.min(i<0&&u?i%o:i<0?i+o:i,o-1)}var n=this,i=t||{},r=i.type||"asymmetric",a=this._segments,o=a.length,u=this._closed,l=u&&i.from===s&&i.to===s,c=e(i.from,0),h=e(i.to,o-1);if(c>h)if(u)c-=o;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(r)){var d="asymmetric"===r,g=Math.min,p=h-c+1,v=p-1,_=l?g(p,4):1,m=_,y=_,w=[];if(u||(m=g(1,c),y=g(1,o-h-1)),(v+=m+y)<=1)return;for(var b=0,x=c-m;b<=v;b++,x++)w[b]=a[(x<0?x+o:x)%o]._point;for(var S=w[0]._x+2*w[1]._x,C=w[0]._y+2*w[1]._y,A=2,P=v-1,M=[S],O=[C],T=[A],k=[],I=[],b=1;b<v;b++){var E=b<P,L=E?1:d?1:2,j=E?4:d?2:7,z=E?4:d?3:8,B=E?2:d?0:1,D=L/A;A=T[b]=j-D,S=M[b]=z*w[b]._x+B*w[b+1]._x-D*S,C=O[b]=z*w[b]._y+B*w[b+1]._y-D*C}k[P]=M[P]/T[P],I[P]=O[P]/T[P];for(var b=v-2;b>=0;b--)k[b]=(M[b]-k[b+1])/T[b],I[b]=(O[b]-I[b+1])/T[b];k[v]=(3*w[v]._x-k[P])/2,I[v]=(3*w[v]._y-I[P])/2;for(var b=m,R=v-y,x=c;b<=R;b++,x++){var F=a[x<0?x+o:x],q=F._point,U=k[b]-q._x,V=I[b]-q._y;(l||b<R)&&F.setHandleOut(U,V),(l||b>m)&&F.setHandleIn(-U,-V)}}else for(var b=c;b<=h;b++)a[b<0?b+o:b].smooth(i,!l&&b===c,!l&&b===h)},toShape:function(t){function e(t,e){var n=c[t],i=n.getNext(),r=c[e],a=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point))}function n(t){var e=c[t],n=e.getPrevious(),i=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&i._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(i._point.subtract(e._point))}function i(t){var e=c[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,a=.5522847498307936;if(i.isOrthogonal(r)){var o=e._point,s=n._point,u=new C(o,i,!0).intersect(new C(s,r,!0),!0);return u&&p.isZero(i.getLength()/u.subtract(o).getLength()-a)&&p.isZero(r.getLength()/u.subtract(s).getLength()-a)}return!1}function r(t,e){return c[t]._point.getDistance(c[e]._point)}if(!this._closed)return null;var a,o,u,l,c=this._segments;if(!this.hasHandles()&&4===c.length&&e(0,2)&&e(1,3)&&n(1)?(a=T.Rectangle,o=new y(r(0,3),r(0,1)),l=c[1]._point.add(c[2]._point).divide(2)):8===c.length&&i(0)&&i(2)&&i(4)&&i(6)&&e(1,5)&&e(3,7)?(a=T.Rectangle,o=new y(r(1,6),r(0,3)),u=o.subtract(new y(r(0,7),r(1,2))).divide(2),l=c[3]._point.add(c[4]._point).divide(2)):4===c.length&&i(0)&&i(1)&&i(2)&&i(3)&&(p.isZero(r(0,2)-r(1,3))?(a=T.Circle,u=r(0,2)/2):(a=T.Ellipse,u=new y(r(2,0)/2,r(3,1)/2)),l=c[1]._point),a){var h=this.getPosition(!0),f=new a({center:h,size:o,radius:u,insert:!1});return f.copyAttributes(this,!0),f._matrix.prepend(this._matrix),f.rotate(l.subtract(h).getAngle()+90),(t===s||t)&&f.insertAbove(this),f}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof F)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,a=i.length;if(!r||!a)return r==a;for(var o,s,u=n[0].getValues(),l=[],c=0,h=0,f=0;f<a;f++){var d=i[f].getValues();l.push(d);var g=N.getOverlaps(u,d);if(g){o=!f&&g[0][0]>0?a-1:f,s=g[0][1];break}}for(var p,v=Math.abs,_=1e-8,d=l[o];u&&d;){var g=N.getOverlaps(u,d);if(g){if(v(g[0][0]-h)<_){h=g[1][0],1===h&&(u=++c<r?n[c].getValues():null,h=0);var m=g[0][1];if(v(m-s)<_){if(p||(p=[o,m]),s=g[1][1],1===s&&(++o>=a&&(o=0),d=l[o]||i[o].getValues(),s=0),!u)return p[0]===o&&p[1]===s;continue}}}break}return!1},_hitTestSelf:function(t,e,n,i){function r(e,n){return t.subtract(e).divide(n).length<=1}function a(t,n,i){if(!e.selected||n.isSelected()){var a=t._point;if(n!==a&&(n=n.add(a)),r(n,b))return new L(i,p,{segment:t,point:n})}}function o(t,n){return(n||e.segments)&&a(t,t._point,"segment")||!n&&e.handles&&(a(t,t._handleIn,"handle-in")||a(t,t._handleOut,"handle-out"))}function s(t){f.add(t)}function u(e){var n=y||e._index>0&&e._index<m-1;if("round"===(n?l:c))return r(e._point,b);if(f=new R({internal:!0,closed:!0}),n?e.isSmooth()||R._addBevelJoin(e,l,A,h,null,i,s,!0):"square"===c&&R._addSquareCap(e,c,A,null,i,s,!0),!f.isEmpty()){var a;return f.contains(t)||(a=f.getNearestLocation(t))&&r(a.getPoint(),w)}}var l,c,h,f,d,g,p=this,v=this.getStyle(),_=this._segments,m=_.length,y=this._closed,w=e._tolerancePadding,b=w,x=e.stroke&&v.hasStroke(),S=e.fill&&v.hasFill(),C=e.curves,A=x?v.getStrokeWidth()/2:S&&e.tolerance>0||C?0:null;if(null!==A&&(A>0?(l=v.getStrokeJoin(),c=v.getStrokeCap(),h=v.getMiterLimit(),b=b.add(R._getStrokePadding(A,i))):l=c="round"),!e.ends||e.segments||y){if(e.segments||e.handles)for(var P=0;P<m;P++)if(g=o(_[P]))return g}else if(g=o(_[0],!0)||o(_[m-1],!0))return g;if(null!==A){if(d=this.getNearestLocation(t)){var M=d.getTime();0===M||1===M&&m>1?u(d.getSegment())||(d=null):r(d.getPoint(),b)||(d=null)}if(!d&&"miter"===l&&m>1)for(var P=0;P<m;P++){var O=_[P];if(t.getDistance(O._point)<=h*A&&u(O)){d=O.getLocation();break}}}return!d&&S&&this._contains(t)||d&&!x&&!C?new L("fill",this):d?new L(x?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},c.each(N._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=_.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var a=n,o=e[i];if((n+=o.getLength())>t)return o.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new B(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,n,i){function r(e){var n=u[e],i=u[e+1];a==n&&o==i||(t.beginPath(),t.moveTo(a,o),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,s,0,2*Math.PI,!0),t.fill())}for(var a,o,s=i/2,u=new Array(6),l=0,c=e.length;l<c;l++){var h=e[l],f=h._selection;if(h._transformCoordinates(n,u),a=u[0],o=u[1],2&f&&r(2),4&f&&r(4),t.fillRect(a-s,o-s,i,i),!(1&f)){var d=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(a-s+1,o-s+1,i-2,i-2),t.fillStyle=d}}}function e(t,e,n){function i(e){if(n)e._transformCoordinates(n,g),r=g[0],a=g[1];else{var i=e._point;r=i._x,a=i._y}if(p)t.moveTo(r,a),p=!1;else{if(n)u=g[2],l=g[3];else{var f=e._handleIn;u=r+f._x,l=a+f._y}u===r&&l===a&&c===o&&h===s?t.lineTo(r,a):t.bezierCurveTo(c,h,u,l,r,a)}if(o=r,s=a,n)c=g[4],h=g[5];else{var f=e._handleOut;c=o+f._x,h=s+f._y}}for(var r,a,o,s,u,l,c,h,f=e._segments,d=f.length,g=new Array(6),p=!0,v=0;v<d;v++)i(f[v]);e._closed&&d>0&&i(f[0])}return{_draw:function(t,n,i,r){function o(t){return f[(t%d+d)%d]}var s=n.dontStart,u=n.dontFinish||n.clip,l=this.getStyle(),c=l.hasFill(),h=l.hasStroke(),f=l.getDashArray(),d=!a.support.nativeDash&&h&&f&&f.length;if(s||t.beginPath(),(c||h&&!d||u)&&(e(t,this,r),this._closed&&t.closePath()),!u&&(c||h)&&(this._setStyles(t,n,i),c&&(t.fill(l.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),h)){if(d){s||t.beginPath();var g,p=new q(this,.25,32,!1,r),v=p.length,_=-l.getDashOffset(),m=0;for(_%=v;_>0;)_-=o(m--)+o(m--);for(;_<v;)g=_+o(m++),(_>0||g>0)&&p.drawPart(t,Math.max(_,0),Math.max(g,0)),_=g+o(m++)}t.stroke()}},_drawSelected:function(n,i){n.beginPath(),e(n,this,i),n.stroke(),t(n,this._segments,i,a.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new j(_.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new j(_.read(arguments))])},cubicCurveTo:function(){var e=_.read(arguments),n=_.read(arguments),i=_.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new j(i,n.subtract(i))])},quadraticCurveTo:function(){var e=_.read(arguments),n=_.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=_.read(arguments),n=_.read(arguments),i=c.pick(c.read(arguments),.5),r=1-i,a=t(this)._point,o=e.subtract(a.multiply(r*r)).subtract(n.multiply(i*i)).divide(2*i*r);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(o,n)},arcTo:function(){var e,n,i,r,a,o=Math.abs,s=Math.sqrt,u=t(this),l=u._point,h=_.read(arguments),f=c.peek(arguments),d=c.pick(f,!0);if("boolean"==typeof d)var g=l.add(h).divide(2),e=g.add(g.subtract(l).rotate(d?-90:90));else if(c.remain(arguments)<=2)e=h,h=_.read(arguments);else{var v=y.read(arguments),m=p.isZero;if(m(v.width)||m(v.height))return this.lineTo(h);var w=c.read(arguments),d=!!c.read(arguments),b=!!c.read(arguments),g=l.add(h).divide(2),x=l.subtract(g).rotate(-w),A=x.x,P=x.y,M=o(v.width),O=o(v.height),T=M*M,k=O*O,I=A*A,E=P*P,L=s(I/T+E/k);if(L>1&&(M*=L,O*=L,T=M*M,k=O*O),L=(T*k-T*E-k*I)/(T*E+k*I),o(L)<1e-12&&(L=0),L<0)throw new Error("Cannot create an arc with the given arguments");n=new _(M*P/O,-O*A/M).multiply((b===d?-1:1)*s(L)).rotate(w).add(g),a=(new S).translate(n).rotate(w).scale(M,O),r=a._inverseTransform(l),i=r.getDirectedAngle(a._inverseTransform(h)),!d&&i>0?i-=360:d&&i<0&&(i+=360)}if(e){var z=new C(l.add(e).divide(2),e.subtract(l).rotate(90),!0),N=new C(e.add(h).divide(2),h.subtract(e).rotate(90),!0),B=new C(l,h),D=B.getSide(e);if(!(n=z.intersect(N,!0))){if(!D)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}r=l.subtract(n),i=r.getDirectedAngle(h.subtract(n));var R=B.getSide(n);0===R?i=D*o(i):D===R&&(i+=i<0?360:-360)}for(var F=1e-12,q=o(i),U=q>=360?4:Math.ceil((q-F)/90),V=i/U,H=V*Math.PI/360,W=4/3*Math.sin(H)/(1+Math.cos(H)),Y=[],G=0;G<=U;G++){var x=h,Z=null;if(G<U&&(Z=r.rotate(90).multiply(W),a?(x=a._transformPoint(r),Z=a._transformPoint(r.add(Z)).subtract(x)):x=n.add(r)),G){var $=r.rotate(-90).multiply(W);a&&($=a._transformPoint(r.add($)).subtract(x)),Y.push(new j(x,$,Z))}else u.setHandleOut(Z);r=r.rotate(V)}this._add(Y)},lineBy:function(){var e=_.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=_.read(arguments),n=_.read(arguments),i=c.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(n),i)},cubicCurveBy:function(){var e=_.read(arguments),n=_.read(arguments),i=_.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=_.read(arguments),n=_.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(_.read(arguments)),i=c.pick(c.peek(arguments),!0);"boolean"==typeof i?this.arcTo(n,i):this.arcTo(n,e.add(_.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){return R[e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,a){function o(t){t._transformCoordinates(i,u);for(var e=0;e<2;e++)N._addBounds(l[e],l[e+4],u[e+2],u[e],e,a?a[e]:0,c,h,f);var n=l;l=u,u=n}var s=t[0];if(!s)return new b;for(var u=new Array(6),l=s._transformCoordinates(i,new Array(6)),c=l.slice(0,2),h=c.slice(),f=new Array(2),d=1,g=t.length;d<g;d++)o(t[d]);return e&&o(s),new b(c[0],c[1],h[0]-c[0],h[1]-c[1])},getStrokeBounds:function(t,e,n,i,r){function a(t){g=g.include(t)}function o(t){g=g.unite(w.setCenter(t._point.transform(i)))}function s(t,e){"round"===e||t.isSmooth()?o(t):R._addBevelJoin(t,e,p,m,i,f,a)}function u(t,e){"round"===e?o(t):R._addSquareCap(t,e,p,i,f,a)}var l=n.getStyle(),c=l.hasStroke(),h=l.getStrokeWidth(),f=c&&n._getStrokeMatrix(i,r),d=c&&R._getStrokePadding(h,f),g=R.getBounds(t,e,n,i,r,d);if(!c)return g;for(var p=h/2,v=l.getStrokeJoin(),_=l.getStrokeCap(),m=l.getMiterLimit(),w=new b(new y(d)),x=t.length-(e?0:1),S=1;S<x;S++)s(t[S],v);return e?s(t[0],v):x>0&&(u(t[0],_),u(t[t.length-1],_)),g},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new _(t,0).transform(e),i=new _(0,t).transform(e),r=n.getAngleInRadians(),a=n.getLength(),o=i.getLength(),s=Math.sin(r),u=Math.cos(r),l=Math.tan(r),c=Math.atan2(o*l,a),h=Math.atan2(o,l*a);return[Math.abs(a*Math.cos(c)*u+o*Math.sin(c)*s),Math.abs(o*Math.sin(h)*u+a*Math.cos(h)*s)]},_addBevelJoin:function(t,e,n,i,r,a,o,s){var u=t.getCurve(),l=u.getPrevious(),c=u.getPoint1().transform(r),h=l.getNormalAtTime(1).multiply(n).transform(a),f=u.getNormalAtTime(0).multiply(n).transform(a);if(h.getDirectedAngle(f)<0&&(h=h.negate(),f=f.negate()),s&&o(c),o(c.add(h)),"miter"===e){var d=new C(c.add(h),new _(-h.y,h.x),!0).intersect(new C(c.add(f),new _(-f.y,f.x),!0),!0);d&&c.getDistance(d)<=i*n&&o(d)}o(c.add(f))},_addSquareCap:function(t,e,n,i,r,a,o){var s=t._point.transform(i),u=t.getLocation(),l=u.getNormal().multiply(n).transform(r);"square"===e&&(o&&(a(s.subtract(l)),a(s.add(l))),s=s.add(l.rotate(0===u.getTime()?-90:90))),a(s.add(l)),a(s.subtract(l))},getHandleBounds:function(t,e,n,i,r){var a,o,s=n.getStyle(),u=r.stroke&&s.hasStroke();if(u){var l=n._getStrokeMatrix(i,r),c=s.getStrokeWidth()/2,h=c;"miter"===s.getStrokeJoin()&&(h=c*s.getMiterLimit()),"square"===s.getStrokeCap()&&(h=Math.max(h,c*Math.SQRT2)),a=R._getStrokePadding(c,l),o=R._getStrokePadding(h,l)}for(var f=new Array(6),d=1/0,g=-d,p=d,v=g,_=0,m=t.length;_<m;_++){t[_]._transformCoordinates(i,f);for(var y=0;y<6;y+=2){var w=y?a:o,x=w?w[0]:0,S=w?w[1]:0,C=f[y],A=f[y+1],P=C-x,M=C+x,O=A-S,T=A+S;P<d&&(d=P),M>g&&(g=M),O<p&&(p=O),T>v&&(v=T)}}return new b(d,p,g-d,v-p)}}});R.inject({statics:new function(){function t(t,e,n){var i=c.getNamed(n),r=new R(i&&i.insert===!1&&P.NO_INSERT);return r._add(t),r._closed=e,r.set(i)}function e(e,n,r){for(var a=new Array(4),o=0;o<4;o++){var s=i[o];a[o]=new j(s._point.multiply(n).add(e),s._handleIn.multiply(n),s._handleOut.multiply(n))}return t(a,!0,r)}var n=.5522847498307936,i=[new j([-1,0],[0,n],[0,-n]),new j([0,-1],[-n,0],[n,0]),new j([1,0],[0,-n],[0,n]),new j([0,1],[n,0],[-n,0])];return{Line:function(){return t([new j(_.readNamed(arguments,"from")),new j(_.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){return e(_.readNamed(arguments,"center"),new y(c.readNamed(arguments,"radius")),arguments)},Rectangle:function(){var e,i=b.readNamed(arguments,"rectangle"),r=y.readNamed(arguments,"radius",0,{readNull:!0}),a=i.getBottomLeft(!0),o=i.getTopLeft(!0),s=i.getTopRight(!0),u=i.getBottomRight(!0);if(!r||r.isZero())e=[new j(a),new j(o),new j(s),new j(u)];else{r=y.min(r,i.getSize(!0).divide(2));var l=r.width,c=r.height,h=l*n,f=c*n;e=[new j(a.add(l,0),null,[-h,0]),new j(a.subtract(0,c),[0,f]),new j(o.add(0,c),null,[0,-f]),new j(o.add(l,0),[-h,0],null),new j(s.subtract(l,0),null,[h,0]),new j(s.add(0,c),[0,-f],null),new j(u.subtract(0,c),null,[0,f]),new j(u.subtract(l,0),[h,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=T._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=_.readNamed(arguments,"from"),e=_.readNamed(arguments,"through"),n=_.readNamed(arguments,"to"),i=c.getNamed(arguments),r=new R(i&&i.insert===!1&&P.NO_INSERT);return r.moveTo(t),r.arcTo(e,n),r.set(i)},RegularPolygon:function(){for(var e=_.readNamed(arguments,"center"),n=c.readNamed(arguments,"sides"),i=c.readNamed(arguments,"radius"),r=360/n,a=n%3==0,o=new _(0,a?-i:i),s=a?-1:.5,u=new Array(n),l=0;l<n;l++)u[l]=new j(e.add(o.rotate((l+s)*r)));return t(u,!0,arguments)},Star:function(){for(var e=_.readNamed(arguments,"center"),n=2*c.readNamed(arguments,"points"),i=c.readNamed(arguments,"radius1"),r=c.readNamed(arguments,"radius2"),a=360/n,o=new _(0,-1),s=new Array(n),u=0;u<n;u++)s[u]=new j(e.add(o.rotate(a*u).multiply(u%2?r:i)));return t(s,!0,arguments)}}}});var F=D.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var a=n.length-1;a>=0;a--){var o=i[a];i!==n||o instanceof R||(i=c.slice(i)),Array.isArray(o)?i[a]=new R({segments:o,insert:!1}):o instanceof F&&(i.splice.apply(i,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r=n[i].reduce(e);r.isEmpty()&&r.remove()}if(!n.length){var r=new R(P.NO_INSERT);return r.copyAttributes(this),r.insertAbove(this),this.remove(),r}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e.push.apply(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,a=n.length;r<a;r++){var o=n[r],s=o._matrix;i.push(o.getPathData(t&&!s.isIdentity()?t.appended(s):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===R||"path"===n.type?n:c.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,o=r.length;a<o;a++)r[a].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var s=this._style;s.hasFill()&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,a=i.length;r<a;r++){var o=i[r],s=o._matrix;n[o._id]||o._drawSelected(t,s.isIdentity()?e:e.appended(s))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new R(P.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=_.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},c.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,i=this._children,r=0,a=i.length;r<a;r++)n=i[r][t](e)||n;return n}},{}));D.inject(new function(){function t(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0):n}function e(t,e,n,i,r,a){var o=new t(P.NO_INSERT);return o.addChildren(e,!0),n&&(o=o.reduce({simplify:!0})),a&&a.insert===!1||o.insertAbove(r&&i.isSibling(r)&&i.getIndex()<r.getIndex()?r:i),o.copyAttributes(i,!0),o}function n(n,r,a,s){function l(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];w.push.apply(w,i._segments),b.push.apply(b,i.getCurves()),i._overlapsOnly=!0}}if(s&&s.stroke&&/^(subtract|intersect)$/.test(a))return i(n,r,"subtract"===a);var c=t(n,!0),d=r&&n!==r&&t(r,!0),g=_[a];g[a]=!0,d&&(g.subtract||g.exclude)^d.isClockwise()^c.isClockwise()&&d.reverse();var p,v=u(B.expand(c.getCrossings(d))),m=c._children||[c],y=d&&(d._children||[d]),w=[],b=[];if(v.length){l(m),y&&l(y);for(var x=0,S=v.length;x<S;x++)h(v[x]._segment,c,d,b,g);for(var x=0,S=w.length;x<S;x++){var C=w[x],A=C._intersection;C._winding||h(C,c,d,b,g),A&&A._overlap||(C._path._overlapsOnly=!1)}p=f(w,g)}else p=o(y?m.concat(y):m.slice(),function(t){return!!g[t]});return e(F,p,!0,n,r,s)}function i(n,i,r){function a(t){if(s.contains(t.getPointAt(t.getLength()/2))^r)return l.unshift(t),!0}for(var o=t(n),s=t(i),u=o.getCrossings(s),l=[],c=u.length-1;c>=0;c--){var h=u[c].split();h&&(a(h)&&h.getFirstSegment().setHandleIn(0,0),o.getLastSegment().setHandleOut(0,0))}return a(o),e(M,l,!1,n,i)}function r(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function a(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function o(t,e,n){var i=t&&t.length;if(i){var r=c.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),a=t.slice().sort(function(t,e){return v(e.getArea())-v(t.getArea())}),o=a[0];null==n&&(n=o.isClockwise());for(var s=0;s<i;s++){for(var u=a[s],l=r[u._id],h=u.getInteriorPoint(),f=0,d=s-1;d>=0;d--){var g=a[d];if(g.contains(h)){var p=r[g._id];f=p.winding,l.winding+=f,l.container=p.exclude?p.container:g;break}}if(e(l.winding)===e(f))l.exclude=!0,t[l.index]=null;else{var _=l.container;u.setClockwise(_?!_.isClockwise():n)}}}return t}function u(t,e,n){function i(t){return t._path._id+"."+t._segment1._index}for(var o,s,u,l=e&&[],c=1e-8,h=1-c,f=!1,d=n||[],g=n&&{},p=(n&&n.length)-1;p>=0;p--){var v=n[p];v._path&&(g[i(v)]=!0)}for(var p=t.length-1;p>=0;p--){var _,m=t[p],y=m._time,w=y,b=e&&!e(m),v=m._curve;if(v&&(v!==s?(f=!v.hasHandles()||g&&g[i(v)],o=[],u=null,s=v):u>=c&&(y/=u)),b)o&&o.push(m);else{if(e&&l.unshift(m),u=w,y<c)_=v._segment1;else if(y>h)_=v._segment2;else{var x=v.divideAtTime(y,!0);f&&d.push(v,x),_=x._segment1;for(var S=o.length-1;S>=0;S--){var C=o[S];C._time=(C._time-y)/(1-y)}}m._setSegment(_);var A=_._intersection,P=m._intersection;if(A){r(A,P);for(var M=A;M;)r(M._intersection,A),M=M._next}else _._intersection=P}}return n||a(d),l||t}function l(t,e,n,i,r){function a(a){var o=a[h+0],u=a[h+6];if(!(_<d(o,u)||_>g(o,u))){var f=a[c+0],v=a[c+2],m=a[c+4],M=a[c+6];if(o===u)return void((f<b&&M>w||M<b&&f>w)&&(C=!0));var O=_===o?0:_===u?1:w>g(f,v,m,M)||b<d(f,v,m,M)?1:1===N.solveCubic(a,h,_,P,0,1)?P[0]:.5,T=0===O?f:1===O?M:N.getPoint(a,O)[n?"y":"x"],k=o>u?1:-1,I=s[h]>s[h+6]?1:-1,E=s[c+6];return _!==o?(T<w?x+=k:T>b?S+=k:C=!0,T>p-y&&T<p+y&&(A/=2)):(k!==I?f<w?x+=k:f>b&&(S+=k):f!=E&&(E<b&&T>b?(S+=k,C=!0):E>w&&T<w&&(x+=k,C=!0)),A=0),s=a,!r&&T>w&&T<b&&0===N.getTangent(a,O)[n?"x":"y"]&&l(t,e,n?0:1,i,!0)}}function o(t){var e=t[h+0],i=t[h+2],r=t[h+4],o=t[h+6];if(_<=g(e,i,r,o)&&_>=d(e,i,r,o))for(var s,u=t[c+0],l=t[c+2],f=t[c+4],p=t[c+6],v=w>g(u,l,f,p)||b<d(u,l,f,p)?[t]:N.getMonoCurves(t,n),m=0,y=v.length;m<y;m++)if(s=a(v[m]))return s}for(var s,u,c=n?1:0,h=1^c,f=[t.x,t.y],p=f[c],_=f[h],m=1e-9,y=1e-6,w=p-m,b=p+m,x=0,S=0,C=!1,A=1,P=[],M=0,O=e.length;M<O;M++){var T,k=e[M],I=k._path,E=k.getValues();if(!(M&&e[M-1]._path===I||(s=null,I._closed||(u=N.getValues(I.getLastCurve().getSegment2(),k.getSegment1(),null,!i),u[h]!==u[h+6]&&(s=u)),s))){s=E;for(var L=I.getLastCurve();L&&L!==k;){var j=L.getValues();if(j[h]!==j[h+6]){s=j;break}L=L.getPrevious()}}if(T=o(E))return T;if(M+1===O||e[M+1]._path!==I){if(u&&(T=o(u)))return T;u=null}}return x=v(x),S=v(S),{winding:g(x,S),windingL:x,windingR:S,quality:A,onPath:C}}function h(t,e,n,i,r){var a,o=[],s=t,u=0;do{var c=t.getCurve(),h=c.getLength();o.push({segment:t,curve:c,length:h}),u+=h,t=t.getNext()}while(t&&!t._intersection&&t!==s);for(var f=[.5,.25,.75],d={winding:0,quality:0},a=d,g=1e-8,_=1-g,m=0;m<f.length&&a.quality<.5;m++)for(var h=u*f[m],y=0,w=o.length;y<w;y++){var b=o[y],x=b.length;if(h<=x){var c=b.curve,S=c._path,C=S._parent,A=p.clamp(c.getTimeAt(h),g,_),P=c.getPointAtTime(A),M=v(c.getTangentAtTime(A).normalize().y)<Math.SQRT1_2?1:0;C instanceof F&&(S=C);var O=r.subtract&&n&&(S===e&&n._getWinding(P,M,!0).winding||S===n&&!e._getWinding(P,M,!0).winding)?d:l(P,i,M,!0);O.quality>a.quality&&(a=O);break}h-=x}for(var y=o.length-1;y>=0;y--)o[y].segment._winding=a}function f(t,e){function n(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function i(t){if(t)for(var e=0,n=o.length;e<n;e++)if(t===o[e])return!0;return!1}function r(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function a(t,e){function r(r,a){for(;r&&r!==a;){var s=r._segment,l=s._path,c=s.getNext()||l&&l.getFirstSegment(),h=c&&c._intersection;s!==t&&(i(s)||i(c)||c&&n(s)&&(n(c)||h&&n(h._segment)))&&u.push(s),e&&o.push(s),r=r._next}}var a=t._intersection,s=a,u=[];if(e&&(o=[t]),a){for(r(a);a&&a._prev;)a=a._prev;r(a,s)}return u}var o,s=[];t.sort(function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),a=!(!i||!i._overlap),o=t._path,s=e._path;return r^a?r?1:-1:!n^!i?n?1:-1:o!==s?o._id-s._id:t._index-e._index});for(var u=0,l=t.length;u<l;u++){var c,h,f,d=t[u],g=n(d),p=null,v=!1,_=!0,m=[];if(g&&d._path._overlapsOnly){var y=d._path,w=d._intersection._segment._path;y.compare(w)&&(y.getArea()&&s.push(y.clone(!1)),r(y),r(w),g=!1)}for(;g;){var b=!p,x=a(d,b),S=x.shift(),v=!b&&(i(d)||i(S)),C=!v&&S;if(b&&(p=new R(P.NO_INSERT),c=null),v){(d.isFirst()||d.isLast())&&(_=d._path._closed),d._visited=!0;break}if(C&&c&&(m.push(c),c=null),c||(C&&x.push(d),c={start:p._segments.length,crossings:x,visited:h=[],handleIn:f}),C&&(d=S),!n(d)){p.removeSegments(c.start);for(var A=0,M=h.length;A<M;A++)h[A]._visited=!1;h.length=0;do{(d=c&&c.crossings.shift())||(c=m.pop())&&(h=c.visited,f=c.handleIn)}while(c&&!n(d));if(!d)break}var O=d.getNext();p.add(new j(d._point,f,O&&d._handleOut)),d._visited=!0,h.push(d),d=O||d._path.getFirstSegment(),f=O&&O._handleIn}v&&(_&&(p.firstSegment.setHandleIn(f),p.setClosed(_)),0!==p.getArea()&&s.push(p))}return s}var d=Math.min,g=Math.max,v=Math.abs,_={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,n){return l(t,this.getCurves(),e,n)},unite:function(t,e){return n(this,t,"unite",e)},intersect:function(t,e){return n(this,t,"intersect",e)},subtract:function(t){return n(this,t,"subtract")},exclude:function(t,e){return n(this,t,"exclude",e)},divide:function(t,n){return e(M,[this.subtract(t,n),this.intersect(t,n)],!0,this,t,n)},resolveCrossings:function(){function t(t){var e=t&&t._intersection;return e&&e._overlap}var e=this._children,n=e||[this],i=!1,r=!1,o=this.getIntersections(null,function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(r=!0)}),s=i&&r&&[];if(o=B.expand(o),i)for(var l=u(o,function(t){return t.hasOverlap()},s),h=l.length-1;h>=0;h--){var d=l[h]._segment,g=d.getPrevious(),p=d.getNext();t(g)&&t(p)&&(d.remove(),g._handleOut._set(0,0),p._handleIn._set(0,0),g===d||g.getCurve().hasLength()||(p._handleIn.set(g._handleIn),g.remove()))}r&&(u(o,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,a=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},s),s&&a(s),n=f(c.each(n,function(t){this.push.apply(this,t._segments)},[])));var v,_=n.length;return _>1&&e?(n!==e&&this.setChildren(n),v=this):1!==_||e||(n[0]!==this&&this.setSegments(n[0].removeSegments()),v=this),v||(v=new F(P.NO_INSERT),v.addChildren(n),v=v.reduce(),v.copyAttributes(this),this.replaceWith(v)),v},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(o(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==s&&this.setClockwise(e),this},getInteriorPoint:function(){var t=this.getBounds(),e=t.getCenter(!0);if(!this.contains(e)){for(var n=this.getCurves(),i=e.y,r=[],a=[],o=0,s=n.length;o<s;o++){var u=n[o].getValues(),l=u[1],c=u[3],h=u[5],f=u[7];if(i>=d(l,c,h,f)&&i<=g(l,c,h,f))for(var p=N.getMonoCurves(u),v=0,_=p.length;v<_;v++){var m=p[v],y=m[1],w=m[7];if(y!==w&&(i>=y&&i<=w||i>=w&&i<=y)){var b=i===y?m[0]:i===w?m[6]:1===N.solveCubic(m,1,i,a,0,1)?N.getPoint(m,a[0]).x:(m[0]+m[6])/2;r.push(b)}}}r.length>1&&(r.sort(function(t,e){return t-e}),e.x=(r[0]+r[1])/2)}return e}}});var q=c.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){function a(t,e){var n=N.getValues(t,e,r);u.push(n),o(n,t._index,0,1)}function o(t,n,r,a){if(!(a-r>h)||i&&N.isStraight(t)||N.isFlatEnough(t,e||.25)){var s=t[6]-t[0],u=t[7]-t[1],f=Math.sqrt(s*s+u*u);f>0&&(c+=f,l.push({offset:c,curve:t,index:n,time:a}))}else{var d=N.subdivide(t,.5),g=(r+a)/2;o(d[0],n,r,g),o(d[1],n,g,a)}}for(var s,u=[],l=[],c=0,h=1/(n||32),f=t._segments,d=f[0],g=1,p=f.length;g<p;g++)s=f[g],a(d,s),d=s;t._closed&&a(s,f[0]),this.curves=u,this.parts=l,this.length=c,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var a=n[e];if(a.offset>=t){this.index=e;var o=n[e-1],s=o&&o.index===a.index?o.time:0,u=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(t-u)/(a.offset-u)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),a=i.index,o=r.index;a<=o;a++){var s=N.getPart(this.curves[a],a===i.index?i.time:0,a===r.index?r.time:1);a===i.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}},c.each(N._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this._get(e);return N[t](this.curves[n.index],n.time)}},{})),U=c.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,a=0,o=i.length;a<o;a++){var s=i[a].point;e&&e.equals(s)||n.push(e=s.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new j(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,a){var o=this.points;if(i-n==1){var s=o[n],u=o[i],l=s.getDistance(u)/3;return void this.addCurve(t,[s,s.add(r.normalize(l)),u.add(a.normalize(l)),u])}for(var c,h=this.chordLengthParameterize(n,i),f=Math.max(e,e*e),d=!0,g=0;g<=4;g++){var p=this.generateBezier(n,i,h,r,a),v=this.findMaxError(n,i,p,h);if(v.error<e&&d)return void this.addCurve(t,p);if(c=v.index,v.error>=f)break;d=this.reparameterize(n,i,h,p),f=v.error}var _=o[c-1].subtract(o[c+1]);this.fitCubic(t,e,n,c,r,_),this.fitCubic(t,e,c,i,_.negate(),a)},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new j(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var a=1e-12,o=Math.abs,s=this.points,u=s[t],l=s[e],c=[[0,0],[0,0]],h=[0,0],f=0,d=e-t+1;f<d;f++){var g=n[f],p=1-g,v=3*g*p,_=p*p*p,m=v*p,y=v*g,w=g*g*g,b=i.normalize(m),x=r.normalize(y),S=s[t+f].subtract(u.multiply(_+m)).subtract(l.multiply(y+w));c[0][0]+=b.dot(b),c[0][1]+=b.dot(x),c[1][0]=c[0][1],c[1][1]+=x.dot(x),h[0]+=b.dot(S),h[1]+=x.dot(S)}var C,A,P=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(o(P)>a){var M=c[0][0]*h[1]-c[1][0]*h[0];C=(h[0]*c[1][1]-h[1]*c[0][1])/P,A=M/P}else{var O=c[0][0]+c[0][1],T=c[1][0]+c[1][1];C=A=o(O)>a?h[0]/O:o(T)>a?h[1]/T:0}var k,I,E=l.getDistance(u),L=a*E;if(C<L||A<L)C=A=E/3;else{var j=l.subtract(u);k=i.normalize(C),I=r.normalize(A),k.dot(j)-I.dot(j)>E*E&&(C=A=E/3,k=I=null)}return[u,u.add(k||i.normalize(C)),l.add(I||r.normalize(A)),l]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);for(var r=1,a=n.length;r<a;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],a=0;a<=2;a++)i[a]=t[a+1].subtract(t[a]).multiply(3);for(var a=0;a<=1;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);var o=this.evaluate(3,t,n),s=this.evaluate(2,i,n),u=this.evaluate(1,r,n),l=o.subtract(e),c=s.dot(s)+l.dot(u);return p.isZero(c)?n:n-l.dot(s)/c},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var a=0;a<=t-r;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),a=0,o=t+1;o<e;o++){var s=this.evaluate(3,n,i[o-t]),u=s.subtract(this.points[o]),l=u.x*u.x+u.y*u.y;l>=a&&(a=l,r=o)}return{error:a,index:r}}}),V=P.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===s&&t.y===s;this._initialize(e&&t,!e&&_.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),H=V.extend({_class:"PointText",initialize:function(){V.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new m(t.x,t.y,this,"setPoint")},setPoint:function(){var t=_.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,a=r.hasFill(),o=r.hasStroke(),s=r.getLeading(),u=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var l=0,c=i.length;l<c;l++){t.shadowColor=u;var h=i[l];a&&(t.fillText(h,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(h,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),i),u=0;"left"!==a&&(u-=s/("center"===a?2:1));var l=new b(u,r?-.75*o:0,s,r*o);return t?t._transformBounds(l,l):l}}),W=c.extend(new function(){function t(t){var n,i=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(i){n=[0,0,0];for(var a=0;a<3;a++){var o=i[a+1];n[a]=parseInt(1==o.length?o+o:o,16)/255}}else if(i=t.match(/^rgba?\((.*)\)$/)){n=i[1].split(",");for(var a=0,s=n.length;a<s;a++){var o=+n[a];n[a]=a<3?o/255:o}}else if(u){var l=r[t];if(!l){e||(e=at.getContext(1,1),e.globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var c=e.getImageData(0,0,1,1).data;l=r[t]=[c[0]/255,c[1]/255,c[2]/255]}n=l.slice()}else n=[0,0,0];return n}var e,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},r={},a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r;return[0===a?0:60*(i==t?(e-n)/a+(e<n?6:0):i==e?(n-t)/a+2:(t-e)/a+4),0===i?0:a/i,i]},"hsb-rgb":function(t,e,n){t=(t/60%6+6)%6;var i=Math.floor(t),r=t-i,i=a[i],o=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[o[i[0]],o[i[1]],o[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r,o=0===a,s=o?0:60*(i==t?(e-n)/a+(e<n?6:0):i==e?(n-t)/a+2:(t-e)/a+4),u=(i+r)/2;return[s,o?0:u<.5?a/(i+r):a/(2-i-r),u]},"hsl-rgb":function(t,e,n){if(t=(t/360%1+1)%1,0===e)return[n,n,n];for(var i=[t+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,o=[],s=0;s<3;s++){var u=i[s];u<0&&(u+=1),u>1&&(u-=1),o[s]=6*u<1?a+6*(r-a)*u:2*u<1?r:3*u<2?a+(r-a)*(2/3-u)*6:a}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(n,function(t,e){i[e]=[],c.each(t,function(t,r){var a=c.capitalize(t),o=/^(hue|saturation)$/.test(t),s=i[e][r]="gradient"===t?function(t){var e=this._components[0];return t=Y.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return _.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+a]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(e)[r]},this["set"+a]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=n[e],this._type=e),this._components[r]=s.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function e(r){var a,o,s,u,l=arguments,h=this.__read,f=0;Array.isArray(r)&&(l=r,r=l[0]);var d=null!=r&&typeof r;if("string"===d&&r in n&&(a=r,r=l[1],Array.isArray(r)?(o=r,s=l[2]):(h&&(f=1),l=c.slice(l,1),d=typeof r)),!o){if(u="number"===d?l:"object"===d&&null!=r.length?r:null){a||(a=u.length>=3?"rgb":"gray");var g=n[a].length;s=u[g],h&&(f+=u===arguments?g+(null!=s?1:0):1),u.length>g&&(u=c.slice(u,0,g))}else if("string"===d)a="rgb",o=t(r),4===o.length&&(s=o[3],o.length--);else if("object"===d)if(r.constructor===e){if(a=r._type,o=r._components.slice(),s=r._alpha,"gradient"===a)for(var p=1,v=o.length;p<v;p++){var _=o[p];_&&(o[p]=_.clone())}}else if(r.constructor===Y)a="gradient",u=l;else{a="hue"in r?"lightness"in r?"hsl":"hsb":"gradient"in r||"stops"in r||"radial"in r?"gradient":"gray"in r?"gray":"rgb";var m=n[a],y=i[a];this._components=o=[];for(var p=0,v=m.length;p<v;p++){var w=r[m[p]];null==w&&!p&&"gradient"===a&&"stops"in r&&(w={stops:r.stops,radial:r.radial}),w=y[p].call(this,w),null!=w&&(o[p]=w)}s=r.alpha}h&&a&&(f=1)}if(this._type=a||"rgb",!o){this._components=o=[];for(var y=i[this._type],p=0,v=y.length;p<v;p++){var w=y[p].call(this,u&&u[p]);null!=w&&(o[p]=w)}}return this._components=o,this._properties=n[this._type],this._alpha=s,h&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new W(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=n[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?W.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=g.instance,r=0,a=t.length;r<a;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var n=this._convert("rgb"),i=t||null==this._alpha?1:this._alpha;return n=[e(n[0]),e(n[1]),e(n[2])],i<1&&n.push(i<0?0:i),t?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var e,n=this._components,i=n[0],r=i._stops,a=n[1],o=n[2];if(i._radial){var s=o.getDistance(a),u=n[3];if(u){var l=u.subtract(a);l.getLength()>s&&(u=a.add(l.normalize(s-.1)))}var c=u||a;e=t.createRadialGradient(c.x,c.y,0,a.x,a.y,s)}else e=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var h=0,f=r.length;h<f;h++){var d=r[h],g=d._offset;e.addColorStop(null==g?h/(f-1):g,d._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:n,random:function(){var t=Math.random;return new W(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return c.each(t,function(t,e){this[e]=function(e){e=W.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),a=0,o=i.length;a<o;a++)r[a]=t(i[a],r[a]);return new W(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),Y=c.extend({_class:"Gradient",initialize:function(t,e){this._id=v.get(),t&&c.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return c.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;e!=-1&&(this._owners.splice(e,1),this._owners.length||(this._owners=s))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new Y(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=s;e=this._stops=G.readList(t,0,{clone:!0});for(var n=0,i=e.length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),G=c.extend({_class:"GradientStop",initialize:function(t,e){var n=t,i=e;"object"==typeof t&&e===s&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new G(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return c.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=W.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Z=c.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new _,selectedColor:null},e=c.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=c.set({},e,{fillColor:new W}),i={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},o={_class:"Style",beans:!0,initialize:function(i,r,o){this._values={},this._owner=r,this._project=r&&r._project||o||a.project,this._defaults=!r||r instanceof M?e:r instanceof V?n:t,i&&this.set(i)}};return c.each(e,function(t,e){var n=/Color$/.test(e),a="shadowOffset"===e,u=c.capitalize(e),l=i[e],h="set"+u,f="get"+u;o[h]=function(t){var i=this._owner,r=i&&i._children;if(r&&r.length>0&&!(i instanceof F))for(var a=0,o=r.length;a<o;a++)r[a]._style[h](t);else if(e in this._defaults){var u=this._values[e];u!==t&&(n&&(u&&u._owner!==s&&(u._owner=s),t&&t.constructor===W&&(t._owner&&(t=t.clone()),t._owner=i)),this._values[e]=t,i&&i._changed(l||65))}},o[f]=function(t){var i,r=this._owner,o=r&&r._children;if(e in this._defaults&&(!o||!o.length||t||r instanceof F)){var i=this._values[e];if(i===s)(i=this._defaults[e])&&i.clone&&(i=i.clone());else{var u=n?W:a?_:null;!u||i&&i.constructor===u||(this._values[e]=i=u.read([i],0,{readNull:!0,clone:!0}),i&&n&&(i._owner=r))}}else if(o)for(var l=0,h=o.length;l<h;l++){var d=o[l]._style[f]();if(l){if(!c.equals(i,d))return s}else i=d}return i},r[f]=function(t){return this._style[f](t)},r[h]=function(t){this._style[h](t)}}),c.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var n="get"+e,i="set"+e;o[n]=r[n]="#get"+t,o[i]=r[i]="#set"+t}),P.inject(r),o},{set:function(t){this._values={};var e=t instanceof Z,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function e(t,e,n){var i=t._values,r=e._values,a=e._defaults;for(var o in i){var u=i[o],l=r[o];if(!(n&&o in r||c.equals(u,l===s?a[o]:l)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),$=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var s=r[o],u=s?s+a:e;if(u in t){if(!n)return t[u];t[u]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,a=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||r.clientLeft||0),s=n.top-(a.clientTop||r.clientTop||0);if(!e){var u=i.defaultView;o+=u.pageXOffset||a.scrollLeft||r.scrollLeft,s+=u.pageYOffset||a.scrollTop||r.scrollTop}return new b(o,s,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new b(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return $.getBounds(t,e).getPoint()},getSize:function(t){return $.getBounds(t,!0).getSize()},isInvisible:function(t){return $.getSize(t).equals(new y(0,0))},isInView:function(t){return!$.isInvisible(t)&&$.getViewportBounds(t).intersects($.getBounds(t,!0))},isInserted:function(t){return l.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},J={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++)t.addEventListener(r[a],i,!1)},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++)t.removeEventListener(r[a],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new _(e.pageX||e.clientX+l.documentElement.scrollLeft,e.pageY||e.clientY+l.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return J.getPoint(t).subtract($.getOffset(e||J.getTarget(t)))}};J.requestAnimationFrame=new function(){function t(){var e=r;r=[];for(var a=0,o=e.length;a<o;a++)e[a]();(i=n&&r.length)&&n(t)}var e,n=$.getPrefixed(u,"requestAnimationFrame"),i=!1,r=[];return function(a){r.push(a),n?i||(n(t),i=!0):e||(e=setInterval(t,1e3/60))}};var X=c.extend(h,{_class:"View",initialize:function t(e,n){function i(t){return n[t]||parseInt(n.getAttribute(t),10)}function r(){var t=$.getSize(n);return t.isNaN()||t.isZero()?new y(i("width"),i("height")):t}var o;if(u&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+t._id++),J.add(n,this._viewEvents);var s="none";if($.setPrefixed(n.style,{userDrag:s,userSelect:s,touchCallout:s,contentZooming:s,tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(n,"resize")){var c=this;J.add(u,this._windowEvents={resize:function(){c.setViewSize(r())}})}if(o=r(),f.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var h=this._stats.domElement,d=h.style,g=$.getOffset(n);d.position="absolute",d.left=g.x+"px",d.top=g.y+"px",l.body.appendChild(h)}}else o=new y(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new S)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!a.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;X._focused===this&&(X._focused=null),X._views.splice(X._views.indexOf(this),1),delete X._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),J.remove(this._element,this._viewEvents),J.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(P._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;J.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;$.getPrefixed(l,"hidden")&&"true"!==f.getAttribute(e,"keepalive")||!$.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){a=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new c(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=s},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new w(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=y.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new b(new _,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return $.isInView(this._element)},isInserted:function(){return $.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,r=l.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat($.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},c.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?c:_).read(arguments),i=_.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,i||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=_.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new S).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return e?new m(e.x,e.y,this,"setScaling"):s},setScaling:function(){var t=this.getScaling(),e=_.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(_.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(_.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(_.read(arguments))},getEventPoint:function(t){return this.viewToProject(J.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return l&&"string"==typeof e&&(e=l.getElementById(e)),new(u?K:X)(t,e)}}},new function(){function t(t){var e=J.getTarget(t);return e.getAttribute&&X._viewsById[e.getAttribute("id")]}function e(){var t=X._focused;if(!t||!t.isVisible())for(var e=0,n=X._views.length;e<n;e++)if((t=X._views[e]).isVisible()){X._focused=s=t;break}}function n(t,e,n){t._handleMouseEvent("mousemove",e,n)}function i(t,e,n,i,r,a,o){function s(t,n){if(t.responds(n)){if(u||(u=new nt(n,i,r,e||t,a?r.subtract(a):null)),t.emit(n,u)&&(M=!0,u.prevented&&(O=!0),u.stopped))return l=!0}else{var o=T[n];if(o)return s(t,o)}}for(var u,l=!1;t&&t!==o&&!s(t,n);)t=t._parent;return l}function r(t,e,n,r,a,o){return t._project.removeOn(n),O=M=!1,S&&i(S,null,n,r,a,o)||e&&e!==S&&!e.isDescendant(S)&&i(e,null,T[n]||n,r,a,o,S)||i(t,S||e||t,n,r,a,o)}if(u){var o,s,c,h,f,d=!1,g=!1,p=u.navigator;p.pointerEnabled||p.msPointerEnabled?(c="pointerdown MSPointerDown",h="pointermove MSPointerMove",f="pointerup pointercancel MSPointerUp MSPointerCancel"):(c="touchstart",h="touchmove",f="touchend touchcancel","ontouchstart"in u&&p.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(c+=" mousedown",h+=" mousemove",f+=" mouseup"));var v={},_={mouseout:function(t){var e=X._focused,i=J.getRelatedTarget(t);if(e&&(!i||"HTML"===i.nodeName)){var r=J.getOffset(t,e._element),a=r.x,o=Math.abs,s=o(a),u=1<<25,l=s-u;r.x=o(l)<s?l*(a<0?-1:1):a,n(e,t,e.viewToProject(r))}},scroll:e};v[c]=function(e){var n=X._focused=t(e);d||(d=!0,n._handleMouseEvent("mousedown",e))},_[h]=function(i){var r=X._focused;if(!g){var a=t(i);a?r!==a&&(r&&n(r,i),o||(o=r),r=X._focused=s=a):s&&s===r&&(o&&!o.isInserted()&&(o=null),r=X._focused=o,o=null,e())}r&&n(r,i)},_[c]=function(){g=!0},_[f]=function(t){var e=X._focused;e&&d&&e._handleMouseEvent("mouseup",t),g=d=!1},J.add(l,_),J.add(u,{load:e});var m,y,w,b,x,S,C,A,P,M=!1,O=!1,T={doubleclick:"click",mousedrag:"mousemove"},k=!1,I={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(t,e,n){function a(t){return o.virtual[t]||c.responds(t)||l&&l.responds(t)}var o=this._itemEvents,s=o.native[t],u="mousemove"===t,l=this._scope.tool,c=this;u&&d&&a("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var h=this.getBounds().contains(n),f=s&&h&&c._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),g=f&&f.item||null,p=!1,v={};v[t.substr(5)]=!0,s&&g!==x&&(x&&i(x,null,"mouseleave",e,n),g&&i(g,null,"mouseenter",e,n),x=g),k^h&&(i(this,null,h?"mouseenter":"mouseleave",e,n),m=h?this:null,p=!0),!h&&!v.drag||n.equals(w)||(r(this,g,u?t:"mousemove",e,n,w),p=!0),k=h,(v.down&&h||v.up&&y)&&(r(this,g,t,e,n,y),v.down?(P=g===C&&Date.now()-A<300,b=C=g,S=!O&&g,y=n):v.up&&(O||g!==b||(A=Date.now(),r(this,g,P?"doubleclick":"click",e,n,y),P=!1),b=S=null),k=!1,p=!0),w=n,p&&l&&(M=l._handleMouseEvent(t,e,n,v)||M),(M&&!v.move||v.down&&a("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){function r(r){r.responds(t)&&(a=s,r.emit(t,o=o||new tt(t,e,n,i)))}var o,s=this._scope,u=s.tool;this.isVisible()&&(r(this),u&&u.responds(t)&&r(u))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var a in I)i[a]=(i[a]||0)+(I[a][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:e}}}}),K=X.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof u.HTMLCanvasElement)){var n=y.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));e=at.getCanvas(n)}var i=this._context=e.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(e,"hidpi"))){var r=u.devicePixelRatio||1,a=$.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/a}X.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,a=this._context;if(!f.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=n+"px"}a.restore(),a.save(),a.scale(i,i)}},getPixelSize:function t(e){var n,i=a.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,o=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=o}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var a=0,o=e.length;a<o;a++)r=Math.max(r,n.measureText(e[a]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Q=c.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return et.modifiers}}),tt=Q.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),et=new function(){function t(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e?String.fromCharCode(t.keyCode):e,r[e]||(e.length>1?c.hyphenate(e):e.toLowerCase())}function e(t,i,r,o){var u,l=X._focused;if(s[i]=t,t?h[i]=r:delete h[i],i.length>1&&(u=c.camelize(i))in f){f[u]=t;var d=a&&a.agent;if("meta"===u&&d&&d.mac)if(t)n={};else{for(var g in n)g in h&&e(!1,g,n[g],o);n=null}}else t&&n&&(n[i]=r);l&&l._handleKeyEvent(t?"keydown":"keyup",o,i,r)}var n,i,r={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},o={tab:"\t",space:" ",enter:"\r"},s={},h={},f=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=a&&a.agent;return t&&t.mac?this.meta:this.control}}});return J.add(l,{keydown:function(n){var r=t(n),s=a&&a.agent;r.length>1||s&&s.chrome&&(n.altKey||s.mac&&n.metaKey||!s.mac&&n.ctrlKey)?e(!0,r,o[r]||(r.length>1?"":r),n):i=r},keypress:function(n){if(i){var r=t(n),a=n.charCode,o=a>=32?String.fromCharCode(a):r.length>1?"":r;r!==i&&(r=o.toLowerCase()),e(!0,r,o,n),i=null}},keyup:function(n){var i=t(n);i in h&&e(!1,i,h[i],n)}}),J.add(u,{blur:function(t){for(var n in h)e(!1,n,h[n],t)}}),{modifiers:f,isDown:function(t){return!!s[t]}}},nt=Q.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),it=Q.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t?t:e?e.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),rt=(d.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){d.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){function r(t,e){var r=n,a=s?f._point:f._downPoint||r;if(s){if(f._moveCount&&r.equals(a))return!1;if(a&&(null!=t||null!=e)){var o=r.subtract(a),u=o.getLength();if(u<(t||0))return!1;e&&(r=a.add(o.normalize(Math.min(u,e))))}f._moveCount++}return f._point=r,f._lastPoint=a||r,i.down&&(f._moveCount=-1,f._downPoint=r,f._downCount++),!0}function o(){u&&(h=f.emit(t,new it(f,t,e))||h)}a=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var s=i.move||i.drag,u=this.responds(t),l=this.minDistance,c=this.maxDistance,h=!1,f=this;if(i.down)r(),o();else if(i.up)r(null,c),o();else if(u)for(;r(l,c);)o();return h}}),{request:function(t){var e=new o.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)}}),at={canvases:[],getCanvas:function(t,e){if(!u)return null;var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=l.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},ot=new function(){function t(t,e,n){return.2989*t+.587*e+.114*n}function e(e,n,i,r){var a=r-t(e,n,i);d=e+a,g=n+a,p=i+a;var r=t(d,g,p),o=v(d,g,p),s=_(d,g,p);if(o<0){var u=r-o;d=r+(d-r)*r/u,g=r+(g-r)*r/u,p=r+(p-r)*r/u}if(s>255){var l=255-r,c=s-r;d=r+(d-r)*l/c,g=r+(g-r)*l/c,p=r+(p-r)*l/c}}function n(t,e,n){return _(t,e,n)-v(t,e,n)}function i(t,e,n,i){var r,a=[t,e,n],o=_(t,e,n),s=v(t,e,n);s=s===t?0:s===e?1:2,o=o===t?0:o===e?1:2,r=0===v(s,o)?1===_(s,o)?2:1:0,a[o]>a[s]?(a[r]=(a[r]-a[s])*i/(a[o]-a[s]),a[o]=i):a[r]=a[o]=0,a[s]=0,d=a[0],g=a[1],p=a[2]}var r,a,o,s,u,l,h,f,d,g,p,v=Math.min,_=Math.max,m=Math.abs,y={multiply:function(){d=u*r/255,g=l*a/255,p=h*o/255},screen:function(){d=u+r-u*r/255,g=l+a-l*a/255,p=h+o-h*o/255},overlay:function(){d=u<128?2*u*r/255:255-2*(255-u)*(255-r)/255,g=l<128?2*l*a/255:255-2*(255-l)*(255-a)/255,p=h<128?2*h*o/255:255-2*(255-h)*(255-o)/255},"soft-light":function(){var t=r*u/255;d=t+u*(255-(255-u)*(255-r)/255-t)/255,t=a*l/255,g=t+l*(255-(255-l)*(255-a)/255-t)/255,t=o*h/255,p=t+h*(255-(255-h)*(255-o)/255-t)/255},"hard-light":function(){d=r<128?2*r*u/255:255-2*(255-r)*(255-u)/255,g=a<128?2*a*l/255:255-2*(255-a)*(255-l)/255,p=o<128?2*o*h/255:255-2*(255-o)*(255-h)/255},"color-dodge":function(){d=0===u?0:255===r?255:v(255,255*u/(255-r)),g=0===l?0:255===a?255:v(255,255*l/(255-a)),p=0===h?0:255===o?255:v(255,255*h/(255-o))},"color-burn":function(){d=255===u?255:0===r?0:_(0,255-255*(255-u)/r),g=255===l?255:0===a?0:_(0,255-255*(255-l)/a),p=255===h?255:0===o?0:_(0,255-255*(255-h)/o)},darken:function(){d=u<r?u:r,g=l<a?l:a,p=h<o?h:o},lighten:function(){d=u>r?u:r,g=l>a?l:a,p=h>o?h:o},difference:function(){d=u-r,d<0&&(d=-d),g=l-a,g<0&&(g=-g),(p=h-o)<0&&(p=-p)},exclusion:function(){d=u+r*(255-u-u)/255,g=l+a*(255-l-l)/255,p=h+o*(255-h-h)/255},hue:function(){i(r,a,o,n(u,l,h)),e(d,g,p,t(u,l,h))},saturation:function(){i(u,l,h,n(r,a,o)),e(d,g,p,t(u,l,h))},luminosity:function(){e(u,l,h,t(r,a,o))},color:function(){e(r,a,o,t(u,l,h))},add:function(){d=v(u+r,255),g=v(l+a,255),p=v(h+o,255)},subtract:function(){d=_(u-r,0),g=_(l-a,0),p=_(h-o,0)},average:function(){d=(u+r)/2,g=(l+a)/2,p=(h+o)/2},negation:function(){d=255-m(255-r-u),g=255-m(255-a-l),p=255-m(255-o-h)}},w=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),b=at.getContext(1,1);b&&(c.each(y,function(t,e){var n="darken"===e,i=!1;b.save();try{b.fillStyle=n?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=n?"#a00":"#300",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}b.restore(),w[e]=i}),at.release(b)),this.process=function(t,e,n,i,c){var v=e.canvas,_="normal"===t;if(_||w[t])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,_||(n.globalCompositeOperation=t),n.drawImage(v,c.x,c.y),n.restore();else{var m=y[t];if(!m)return;for(var b=n.getImageData(c.x,c.y,v.width,v.height),x=b.data,S=e.getImageData(0,0,v.width,v.height).data,C=0,A=x.length;C<A;C+=4){r=S[C],u=x[C],a=S[C+1],l=x[C+1],o=S[C+2],h=x[C+2],s=S[C+3],f=x[C+3],m();var P=s*i/255,M=1-P;x[C]=P*d+M*u,x[C+1]=P*g+M*l,x[C+2]=P*p+M*h,x[C+3]=s*i+M*f}n.putImageData(b,c.x,c.y)}}},st=new function(){function t(t,e,r){return n(l.createElementNS(i,t),e,r)}function e(t,e){var n=o[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===i?null:i}function n(t,e,n){for(var i in e){var r=e[i],a=o[i];"number"==typeof r&&n&&(r=n.number(r)),a?t.setAttributeNS(a,i,r):t.setAttribute(i,r)}return t}var i="http://www.w3.org/2000/svg",r="http://www.w3.org/2000/xmlns",a="http://www.w3.org/1999/xlink",o={href:a,xlink:r,xmlns:r+"/","xmlns:xlink":r+"/"};return{svg:i,xmlns:r,xlink:a,create:t,get:e,set:n}},ut=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof D||t instanceof T||t instanceof V)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=c.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&c.each(i,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});return new function(){function t(t,e,n){var i=new c,r=t.getTranslation();if(e){t=t._shiftless();var a=t._inverseTransform(r);i[n?"cx":"x"]=a.x,i[n?"cy":"y"]=a.y,r=null}if(!t.isIdentity()){var o=t.decompose();if(o){var s=[],u=o.rotation,l=o.scaling,h=o.skewing;r&&!r.isZero()&&s.push("translate("+w.point(r)+")"),u&&s.push("rotate("+w.number(u)+")"),p.isZero(l.x-1)&&p.isZero(l.y-1)||s.push("scale("+w.point(l)+")"),h&&h.x&&s.push("skewX("+w.number(h.x)+")"),h&&h.y&&s.push("skewY("+w.number(h.y)+")"),i.transform=s.join(" ")}else i.transform="matrix("+t.getValues().join(",")+")"}return i}function e(e,n){for(var i=t(e._matrix),r=e._children,a=st.create("g",i,w),o=0,s=r.length;o<s;o++){var u=r[o],l=m(u,n);if(l)if(u.isClipMask()){var c=st.create("clipPath");c.appendChild(l),d(u,c,"clip"),st.set(a,{"clip-path":"url(#"+c.id+")"})}else a.appendChild(l)}return a}function n(e,n){var i=t(e._matrix,!0),r=e.getSize(),a=e.getImage();return i.x-=r.width/2,i.y-=r.height/2,i.width=r.width,i.height=r.height,i.href=n.embedImages===!1&&a&&a.src||e.toDataURL(),st.create("image",i,w)}function i(e,n){var i=n.matchShapes;if(i){var a=e.toShape(!1);if(a)return r(a,n)}var o,s=e._segments,u=s.length,l=t(e._matrix);if(i&&u>=2&&!e.hasHandles())if(u>2){o=e._closed?"polygon":"polyline";for(var c=[],h=0;h<u;h++)c.push(w.point(s[h]._point));l.points=c.join(" ")}else{o="line";var f=s[0]._point,d=s[1]._point;l.set({x1:f.x,y1:f.y,x2:d.x,y2:d.y})}else o="path",l.d=e.getPathData(null,n.precision);return st.create(o,l,w)}function r(e){var n=e._type,i=e._radius,r=t(e._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var a=e._size,o=a.width,s=a.height;r.x-=o/2,r.y-=s/2,r.width=o,r.height=s,i.isZero()&&(i=null)}return i&&("circle"===n?r.r=i:(r.rx=i.width,r.ry=i.height)),st.create(n,r,w)}function a(e,n){var i=t(e._matrix),r=e.getPathData(null,n.precision);return r&&(i.d=r),st.create("path",i,w)}function s(e,n){var i=t(e._matrix,!0),r=e._definition,a=f(r,"symbol"),o=r._item,s=o.getBounds();return a||(a=st.create("symbol",{viewBox:w.rectangle(s)}),a.appendChild(m(o,n)),d(r,a,"symbol")),i.href="#"+a.id,i.x+=s.x,i.y+=s.y,i.width=s.width,i.height=s.height,i.overflow="visible",st.create("use",i,w)}function u(t){var e=f(t,"color");if(!e){var n,i=t.getGradient(),r=i._radial,a=t.getOrigin(),o=t.getDestination();if(r){n={cx:a.x,cy:a.y,r:a.getDistance(o)};var s=t.getHighlight();s&&(n.fx=s.x,n.fy=s.y)}else n={x1:a.x,y1:a.y,x2:o.x,y2:o.y};n.gradientUnits="userSpaceOnUse",e=st.create((r?"radial":"linear")+"Gradient",n,w);for(var u=i._stops,l=0,c=u.length;l<c;l++){var h=u[l],g=h._color,p=g.getAlpha(),v=h._offset;n={offset:null==v?l/(c-1):v},g&&(n["stop-color"]=g.toCSS(!0)),p<1&&(n["stop-opacity"]=p),e.appendChild(st.create("stop",n,w))}d(t,e,"color")}return"url(#"+e.id+")"}function l(e){var n=st.create("text",t(e._matrix,!0),w);return n.textContent=e._content,n}function h(t,e,n){var i={},r=!n&&t.getParent(),a=[];return null!=t._name&&(i.id=t._name),c.each(ut,function(e){var n=e.get,o=e.type,s=t[n]();if(e.exportFilter?e.exportFilter(t,s):!r||!c.equals(r[n](),s)){if("color"===o&&null!=s){var l=s.getAlpha();l<1&&(i[e.attribute+"-opacity"]=l)}"style"===o?a.push(e.attribute+": "+s):i[e.attribute]=null==s?"none":"color"===o?s.gradient?u(s,t):s.toCSS(!0):"array"===o?s.join(","):"lookup"===o?e.toSVG[s]:s}}),a.length&&(i.style=a.join(";")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility="hidden"),st.set(e,i,w)}function f(t,e){return x||(x={ids:{},svgs:{}}),t&&x.svgs[e+"-"+(t._id||t.__id||(t.__id=v.get("svg")))]}function d(t,e,n){x||f();var i=x.ids[n]=(x.ids[n]||0)+1;e.id=n+"-"+i,x.svgs[n+"-"+(t._id||t.__id)]=e}function _(t,e){var n=t,i=null;if(x){n="svg"===t.nodeName.toLowerCase()&&t;for(var r in x.svgs)i||(n||(n=st.create("svg"),n.appendChild(t)),i=n.insertBefore(st.create("defs"),n.firstChild)),i.appendChild(x.svgs[r]);x=null}return e.asString?(new o.XMLSerializer).serializeToString(n):n}function m(t,e,n){var i=C[t._class],r=i&&i(t,e);if(r){var a=e.onExport;a&&(r=a(t,r,e)||r);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&r.setAttribute("data-paper-data",o)}return r&&h(t,r,n)}function y(t){return t||(t={}),w=new g(t.precision),t}var w,x,C={Group:e,Layer:e,Raster:n,Path:i,Shape:r,CompoundPath:a,SymbolItem:s,PointText:l};P.inject({exportSVG:function(t){return t=y(t),_(m(this,t,!0),t)}}),A.inject({exportSVG:function(e){e=y(e);var n=this._children,i=this.getView(),r=c.pick(e.bounds,"view"),a=e.matrix||"view"===r&&i._matrix,o=a&&S.read([a]),s="view"===r?new b([0,0],i.getViewSize()):"content"===r?P._getBounds(n,o,{stroke:!0}):b.read([r],0,{readNull:!0}),u={version:"1.1",xmlns:st.svg,"xmlns:xlink":st.xlink};s&&(u.width=s.width,u.height=s.height,(s.x||s.y)&&(u.viewBox=w.rectangle(s)));var l=st.create("svg",u,w),h=l;o&&!o.isIdentity()&&(h=l.appendChild(st.create("g",t(o),w)));for(var f=0,d=n.length;f<d;f++)h.appendChild(m(n[f],e,!0));return _(l,e)}})},new function(){function t(t,e,n,i,r){var a=st.get(t,e),o=null==a?i?null:n?"":0:n?a:parseFloat(a);return/%\s*$/.test(a)?o/100*(r?1:O[/x|^width/.test(e)?"width":"height"]):o}function e(e,n,i,r,a){return n=t(e,n||"x",!1,r,a),i=t(e,i||"y",!1,r,a),!r||null!=n&&null!=i?new _(n,i):null}function n(e,n,i,r,a){return n=t(e,n||"width",!1,r,a),i=t(e,i||"height",!1,r,a),!r||null!=n&&null!=i?new y(n,i):null}function i(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?w(t)||t:"lookup"===e?n[t]:t}function r(t,e,n,i){var r=t.childNodes,a="clippath"===e,o="defs"===e,s=new M,u=s._project,l=u._currentStyle,c=[];if(a||o||(s=m(s,t,i),u._currentStyle=s._style.clone()),i)for(var h=t.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)x(h[f],n,!1);for(var f=0,d=r.length;f<d;f++){var g,p=r[f];1!==p.nodeType||/^defs$/i.test(p.nodeName)||!(g=x(p,n,!1))||g instanceof E||c.push(g)}return s.addChildren(c),a&&(s=m(s.reduce(),t,i)),u._currentStyle=l,(a||o)&&(s.remove(),s=null),s}function h(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;r<a;r+=2)i.push(new _(parseFloat(n[r]),parseFloat(n[r+1])));var o=new R(i);return"polygon"===e&&o.closePath(),o}function f(t){return D.create(t.getAttribute("d"))}function d(n,i){var r,a=(t(n,"href",!0)||"").substring(1),o="radialgradient"===i;if(a)r=I[a].getGradient(),r._radial^o&&(r=r.clone(),r._radial=o);else{for(var s=n.childNodes,u=[],l=0,c=s.length;l<c;l++){var h=s[l];1===h.nodeType&&u.push(m(new G,h))}r=new Y(u,o)}var f,d,g,p="userSpaceOnUse"!==t(n,"gradientUnits",!0);return o?(f=e(n,"cx","cy",!1,p),d=f.add(t(n,"r",!1,!1,p),0),g=e(n,"fx","fy",!0,p)):(f=e(n,"x1","y1",!1,p),d=e(n,"x2","y2",!1,p)),m(new W(r,f,d,g),n)._scaleToBounds=p,null}function g(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new S,o=0,s=r.length;o<s;o++){var u=r[o];if(!u)break;for(var l=u.split(/\(\s*/),c=l[0],h=l[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":a.append(new S(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1],h[2]);break;case"translate":a.translate(h[0],h[1]);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}t.transform(a)}}function p(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}function v(t,e,n){var i=t.attributes[e],r=i&&i.value;if(!r){var a=c.camelize(e);r=t.style[a],r||n.node[a]===n.parent[a]||(r=n.node[a])}return r?"none"===r?null:r:s}function m(t,e,n){var i=e.parentNode,r={node:$.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&$.getStyles(i)||{}};return c.each(j,function(n,i){var a=v(e,i,r);t=a!==s&&n(t,a,i,e,r)||t}),t}function w(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],i=n&&I[u?n.replace(u.location.href.split("#")[0]+"#",""):n];return i&&i._scaleToBounds&&(i=i.clone(),i._scaleToBounds=!0),i}function x(t,e,i){var r,o,s,u=t.nodeName.toLowerCase(),h="#document"!==u,f=l.body;i&&h&&(O=n(t,null,null,!0)||a.getView().getSize(),r=st.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),o=t.parentNode,s=t.nextSibling,r.appendChild(t),f.appendChild(r));var d=a.settings,g=d.applyMatrix,p=d.insertItems;d.applyMatrix=!1,d.insertItems=!1;var v=L[u],_=v&&v(t,u,e,i)||null;if(d.insertItems=p,d.applyMatrix=g,_){!h||_ instanceof M||(_=m(_,t,i));var y=e.onImport,w=h&&t.getAttribute("data-paper-data");y&&(_=y(t,_,e)||_),e.expandShapes&&_ instanceof T&&(_.remove(),_=_.toPath()),w&&(_._data=JSON.parse(w))}return r&&(f.removeChild(r),o&&(s?o.insertBefore(t,s):o.appendChild(t))),i&&(I={},_&&c.pick(e.applyMatrix,g)&&_.matrix.apply(!0,!0)),_}function C(t,e,n){function i(i){try{var l="object"==typeof i?i:(new o.DOMParser).parseFromString(i,"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+t);a=u,c=x(l,e,!0),e&&e.insert===!1||n._insertItem(s,c);var h=e.onLoad;h&&h(c,i)}catch(t){r(t)}}function r(t,n){var i=e.onError;if(!i)throw new Error(t);i(t,n)}if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var u=a,c=null;if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var h=new FileReader;return h.onload=function(){i(h.result)},h.onerror=function(){r(h.error)},h.readAsText(t)}i(t)}else{var f=l.getElementById(t);f?i(f):rt.request({url:t,async:!0,onLoad:i,onError:r})}return c}var O,I={},L={"#document":function(t,e,n,i){for(var r=t.childNodes,a=0,o=r.length;a<o;a++){var s=r[a];if(1===s.nodeType)return x(s,n,i)}},g:r,svg:r,clippath:r,polygon:h,polyline:h,path:f,lineargradient:d,radialgradient:d,image:function(i){var r=new k(t(i,"href",!0));return r.on("load",function(){var t=n(i);this.setSize(t);var r=this._matrix._transformPoint(e(i).add(t.divide(2)));this.translate(r)}),r},symbol:function(t,e,n,i){return new E(r(t,e,n,i),!0)},defs:r,use:function(n){var i=(t(n,"href",!0)||"").substring(1),r=I[i],a=e(n);return r?r instanceof E?r.place(a):r.clone().translate(a):null},circle:function(n){return new T.Circle(e(n,"cx","cy"),t(n,"r"))},ellipse:function(t){return new T.Ellipse({center:e(t,"cx","cy"),radius:n(t,"rx","ry")})},rect:function(t){return new T.Rectangle(new b(e(t),n(t)),n(t,"rx","ry"))},line:function(t){return new R.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var n=new H(e(t).add(e(t,"dx","dy")));return n.setContent(t.textContent.trim()||""),n}},j=c.set(c.each(ut,function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](i(n,t.type,t.fromSVG)),"color"===t.type)){var r=e[t.get]();if(r){if(r._scaleToBounds){var a=e.getBounds();r.transform((new S).translate(a.getPoint()).scale(a.getSize()))}e instanceof T&&r.transform((new S).translate(e.getPosition(!0).negate()))}}}},{}),{id:function(t,e){I[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=w(e);if(n){if(n=n.clone(),n.setClipMask(!0),!(t instanceof M))return new M(n,t);t.insertChild(0,n)}},gradientTransform:g,transform:g,"fill-opacity":p,"stroke-opacity":p,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,r,a,o){var s,u,l=new b(i(e,"array")),c=n(a,null,null,!0);if(t instanceof M){var h=c?c.divide(l.getSize()):1,u=(new S).scale(h).translate(l.getPoint().negate());s=t}else t instanceof E&&(c&&l.setSize(c),s=t._item);if(s){if("visible"!==v(a,"overflow",o)){var f=new T.Rectangle(l);f.setClipMask(!0),s.addChild(f)}u&&s.transform(u)}}});P.inject({importSVG:function(t,e){return C(t,e,this)}}),A.inject({importSVG:function(t,e){return this.activate(),C(t,e,this)}})},a=new(f.inject(c.exports,{enumerable:!0,Base:c,Numerical:p,Key:et,DomEvent:J,DomElement:$,document:l,window:u,Symbol:E,PlacedSymbol:I})),a.agent.node&&n(71)(a),i=a,(r="function"==typeof i?i.call(e,n,e,t):i)!==s&&(t.exports=r),a}.call(this,"object"==typeof self?self:null)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return e&&t===e.type}Object.defineProperty(e,"__esModule",{value:!0}),e.hasDuration=e.isPitched=e.isMarking=e.isVoice=e.isTimeSignature=e.isText=e.isSystem=e.isSlur=e.isScore=e.isRepeat=e.isRest=e.isNote=e.isMeasure=e.isLine=e.isKey=e.isDynamic=e.isClef=e.isChordSymbol=e.isChord=void 0;var a=n(0),o=i(a),s=n(1),u=i(s),l=o.default.partial(r,u.default.type.chord),c=o.default.partial(r,u.default.type.chordSymbol),h=o.default.partial(r,u.default.type.clef),f=o.default.partial(r,u.default.type.dynamic),d=o.default.partial(r,u.default.type.key),g=o.default.partial(r,u.default.type.line),p=o.default.partial(r,u.default.type.measure),v=o.default.partial(r,u.default.type.note),_=o.default.partial(r,u.default.type.rest),m=o.default.partial(r,u.default.type.score),y=o.default.partial(r,u.default.type.slur),w=o.default.partial(r,u.default.type.system),b=o.default.partial(r,u.default.type.timeSig),x=o.default.partial(r,u.default.type.voice),S=o.default.partial(r,u.default.type.repeat),C=o.default.partial(r,u.default.type.text),A=function(t){return h(t)||d(t)||b(t)||S(t)},P=function(t){return v(t)||l(t)},M=function(t){return v(t)||l(t)||_(t)};e.isChord=l,e.isChordSymbol=c,e.isClef=h,e.isDynamic=f,e.isKey=d,e.isLine=g,e.isMeasure=p,e.isNote=v,e.isRest=_,e.isRepeat=S,e.isScore=m,e.isSlur=y,e.isSystem=w,e.isText=C,e.isTimeSignature=b,e.isVoice=x,e.isMarking=A,e.isPitched=P,e.hasDuration=M},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n){return t>=0?function(t){return e+n*(3+t)}:function(t){return e-n*(3+t)}}function s(t,e,n){var i=Math.round(E.getNoteHeadCenter(t.bounds.center).y-e.y),r=[],a=o(i,e.y,n);if(Math.abs(i)>=3*n)for(var s=0;s<=Math.ceil(Math.abs(i)-3*n)/n;s++){var u=a(s),l=new M.default.Point(t.bounds.leftCenter.x-Scored.config.note.head.width/2,u),c=new M.default.Point(t.bounds.rightCenter.x+Scored.config.note.head.width/2,u);r.push(new M.default.Path.Line(l,c))}return new M.default.Group({children:r,strokeColor:"black"})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,H[arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default"])(t,e)}function l(t){for(var e=void 0,n=[],i=["F","D","B","G","E"],r=0;r<5;r++)e=new M.default.Path.Line(new M.default.Point(0,r*Scored.config.lineSpacing),new M.default.Point(t,r*Scored.config.lineSpacing)),e.name=i[r],e.strokeColor="black",n.push(e);var a=new M.default.Rectangle(n[0].firstSegment.point,n[4].lastSegment.point);return a=new M.default.Path.Rectangle(a),a.fillColor="#FFFFFF",a.opacity=0,a.name="bounds",new M.default.Group({name:"systemLine",children:V.default.flatten([a,n])})}function c(t){var e=t[0],n=t[t.length-1],i=new M.default.Path.Line(j.f(e),j.e(n));return i.strokeColor="black",i.strokeWidth=2,i}function h(t,e){var n=e.top,i=void 0===n?0:n,r=e.left,a=void 0===r?0:r,o=e.bottom,s=void 0===o?0:o,u=e.right,l=void 0===u?0:u,c=new M.default.Path.Rectangle({name:"itemBounds",from:t.bounds.topLeft.subtract([a,i]),to:t.bounds.bottomRight.add([l,s])});return c.fillColor="#FFFFFF",c.opacity=0,t.addChild(c),t}function f(t,e){for(var n=[],i=Scored.config.note.head.width/2,r=0;r<e;r++){var a=new M.default.Path.Circle(t,2);a.fillColor="black",n.push(a),t=t.add(i,0)}return n}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Scored.config.layout.lineSpacing;return[new M.default.Path.Circle({center:new M.default.Point(t,e+1.5*n),radius:2,fillColor:"black"}),new M.default.Path.Circle({center:new M.default.Point(t,e+2.5*n),radius:2,fillColor:"black"})]}function g(){var t=(Scored.config.layout.lineSpacing,-Scored.config.note.head.width/2),e=new M.default.Path.Line({from:[t,0],to:[t,4*Scored.config.layout.lineSpacing],strokeColor:"black",strokeWidth:1}),n=d();return new M.default.Group({name:"repeat",children:[e].concat(a(n))})}function p(t){var e=new M.default.Path.Circle(t,1.5);return e.fillColor="black",e}function v(t){var e=Scored.config.note.head.width/2,n=new M.default.Path.Line(t.subtract(e,0),t.add(e,0));return n.strokeColor="black",n}function _(t,e){return t.add(J[e])}function m(t,e,n){var i=e[0],r=e[e.length-1],a=i.x+(r.x-i.x)/2,o=r.subtract(i).normalize();o.angle<-Scored.config.maxBeamAngle?o=new M.default.Point({angle:-Scored.config.maxBeamAngle,length:1}):o.angle>Scored.config.maxBeamAngle&&(o=new M.default.Point({angle:Scored.config.maxBeamAngle,length:1}));var s=4.5*Scored.config.stepSpacing,u=(0,F.map)(function(t,e){return(0,O.isNote)(t)?N.defaultStemPoint(t,e,s):(0,O.isChord)(t)?D.defaultStemPoint(t,e,s):void 0},t,n),l=void 0;return"up"===n[0]?function(){var t=V.default.min(u,function(t){return t.y});l=e.map(function(e){return e.y<t.y?e.y:t.y})}():"down"===n[0]&&function(){var t=V.default.max(u,function(t){return t.y});l=e.map(function(e){return e.y>t.y?e.y:t.y})}(),[new M.default.Point(a,V.default.sum(l)/l.length),o]}function y(t,e,n,i,r,a,o,s,u){var l=V.default.last(t),c=[0,u],h=void 0;if(h="up"===s?e.add(c):e.subtract(c),i&&i<n&&(!r||r<n)){var f=(0,q.getLinePoint)(h.x-10,a,o),d="up"===s?f.add(c):f.subtract(c);l.push(d)}if(l.push(h),r&&!i&&r<n){var g=(0,q.getLinePoint)(h.x+10,a,o),p="up"===s?g.add(c):g.subtract(c);l.push(p)}}function w(t,e){var n=e.line,i=void 0===n?"b4":n,r=e.fulcrum,a=e.vector,o=e.stemDirections,s=K[V.default.max(V.default.map(t,function(t){return t.value}))],u=t.map(function(t){return t.value}),l=(0,F.map)(function(t,e){return(0,O.isNote)(t)?N.getStemLength(t,i,e):(0,O.isChord)(t)?D.getStemLength(t,i,e):void 0},t,o),c=t.map(function(t,e){return(0,O.isNote)(t)?N.defaultStemPoint(t,o[e],l[e]):(0,O.isChord)(t)?D.defaultStemPoint(t,o[e],l[e]):void 0});if(r&&!a){a=A(m(t,c,o),2)[1]}else if(a&&!r){var h=m(t,c,o),f=A(h,1);r=f[0]}else{var d=m(t,c,o),g=A(d,2);r=g[0],a=g[1]}var p=(0,F.doTimes)(s,function(){return[[]]});V.default.reduce(t,function(e,n,i){var s=V.default.last(e),l=u[i],c=o[i],h=V.default.last(e),f=u[i-1],d=u[i+1],g=t[i+1],v=g?g.calculateStemPoint(r,a,o[i+1]):null;return V.default.last(p[0]).push(s),l>=16&&y(p[1],h,l,f,d,r,a,c,5),l>=32&&y(p[2],h,l,f,d,r,a,c,10),l>=64&&y(p[3],h,l,f,d,r,a,c,15),l>=128&&y(p[4],h,l,f,d,r,a,c,20),l>=256&&y(p[5],h,l,f,d,r,a,c,25),l<16&&p[1]&&p[1].push([]),l<32&&p[2]&&p[2].push([]),l<64&&p[3]&&p[3].push([]),l<128&&p[4]&&p[4].push([]),l<256&&p[5]&&p[5].push([]),n.drawStem(s,c),(0,F.concat)(e,v)},[t[0].calculateStemPoint(r,a,o[0])]);var v=V.default.map(V.default.flatten(p),function(t){return new M.default.Path({segments:t,strokeColor:"black",strokeWidth:3})});return new M.default.Group({name:"beam",children:v})}function b(t){return(0,O.isNote)(t)?t.group.children.stem.segments[1].point:t.group.bounds.topCenter}function x(t,e,n){var i=(0,R.parseSignature)(t[0].tuplet),r=A(i,1),a=r[0],o=V.default.map(t,b),s=o[0].x-Scored.config.note.head.width/2,u=V.default.last(o).x+Scored.config.note.head.width/2,l=u-s,c=n||(V.default.sum(V.default.map(o,function(t){return t.y-e.y}))>=0?"down":"up"),h=void 0;if("up"===c){h=V.default.min(o,function(t){return t.y}).y-Scored.config.note.head.height}else if("down"===c){var f=V.default.max(o,function(t){return t.y});h=f.y+Scored.config.note.head.height}var d=new M.default.Point(s,h),g=new M.default.Point([u,h]),p=d.add(l/2,0),v=new M.default.PointText({content:a,fontFamily:"gonvillealpha",fontSize:Scored.config.fontSize/1.5,position:p}),_="up"===c?d.add(0,5):d.subtract(0,5),m=new M.default.Path.Line({segments:[_,d,v.bounds.leftCenter]}),y="up"===c?g.add(0,5):g.subtract(0,5),w=new M.default.Path.Line({segments:[v.bounds.rightCenter,g,y]});return new M.default.Group({children:[m,v,w],strokeColor:"black"})}function S(t){return new M.default.PointText({content:t,fontFamily:"gonvillealpha",fontSize:Scored.config.fontSize,fillColor:"black"})}function C(t){return new M.default.PointText({content:t,fontFamily:"gonvillealpha",fontSize:Scored.config.fontSize/1.5,fillColor:"black"})}Object.defineProperty(e,"__esModule",{value:!0}),e.drawChordSymbol=e.drawDynamic=e.drawTuplets=e.beam=e.drawRest=e.getFlagOffset=e.drawFlag=e.drawAccidental=e.drawTenuto=e.drawStaccato=e.drawRepeat=e.drawDots=e.drawHead=e.drawTimeSig=e.drawClef=e.drawSystemBar=e.drawLine=e.drawBarline=e.drawLegerLines=void 0;var A=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=n(3),M=r(P),O=n(4),T=n(1),k=r(T),I=n(8),E=i(I),L=n(9),j=i(L),z=n(7),N=i(z),B=n(30),D=i(B),R=n(6),F=n(2),q=n(31),U=n(0),V=r(U),H={final:function(t,e){var n=t[0],i=t[t.length-1],r=new M.default.Group({name:"barline"}),a=new M.default.Path.Line(j.f(n).add(e,0),j.e(i).add(e,0)),o=new M.default.Path.Line(j.f(n).add(e-5,0),j.e(i).add(e-5,0));return r.addChildren([a,o]),r.strokeColor="black",a.strokeWidth=3,o.strokeWidth=1,r},repeat:function(t,e){var n=t[0],i=t[t.length-1],r=new M.default.Group({name:"barline"}),a=new M.default.Path.Line(j.f(n).add(e,0),j.e(i).add(e,0)),o=new M.default.Path.Line(j.f(n).add(e-5,0),j.e(i).add(e-5,0));return r.addChildren([a,o]),r.strokeColor="black",a.strokeWidth=3,o.strokeWidth=1,t.map(function(t){var n=d(e-Scored.config.note.head.width,j.f(t).y);r.addChildren(n)}),r},default:function(t,e){var n=t[0],i=t[t.length-1],r=new M.default.Group({name:"barline"}),a=new M.default.Path.Line(j.f(n).add(e,0),j.e(i).add(e,0));return r.addChild(a),a.strokeColor="black",a.strokeWidth=1,r}},W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new M.default.PointText({content:{treble:"9",bass:"8",alto:"7",tenor:"7"}[t],fontFamily:"gonville",fontSize:32,fillColor:"black",name:"clef"});return h(new M.default.Group({name:"clef",children:[n]}),e)},Y=function(t,e){var n=void 0;if("c"===t)n=new M.default.Group(new M.default.PointText({content:k.default.font.timeSigs.common,fontFamily:"gonville",fontSize:32,fillColor:"black"}));else if("h"===t)n=new M.default.Group(new M.default.PointText({content:k.default.font.timeSigs.half,fontFamily:"gonville",fontSize:32,fillColor:"black"}));else{var i=t.split("/"),r=A(i,2),a=r[0],o=r[1],s=new M.default.PointText({content:a,fontFamily:"gonvillealpha",fontSize:32,fillColor:"black"}),u=new M.default.PointText({content:o,fontFamily:"gonvillealpha",fontSize:32,fillColor:"black"});n=new M.default.Group([s,u]),u.translate([0,s.bounds.height/2])}return h(n,e)},G=function(t){var e=void 0;return e=t>=1?k.default.font.noteheads.whole:t>=.5?k.default.font.noteheads.hollow:k.default.font.noteheads.solid,new M.default.PointText({name:"head",content:e,fontFamily:"gonville",fontSize:Scored.config.fontSize,fillColor:"black"})},Z=function(t){var e={"#":k.default.font.accidentals.sharp,b:k.default.font.accidentals.flat,bb:k.default.font.accidentals.doubleFlat,x:k.default.font.accidentals.doubleSharp,n:k.default.font.accidentals.natural}[t];return new M.default.PointText({content:e,fontFamily:"gonville",fontSize:Scored.config.fontSize,fillColor:"black"})},$=function(t,e){var n={8:"eighth",16:"sixteenth",32:"thirtysecond",64:"sixtyfourth",128:"onehundredtwentyeighth"}[t];if(n)return new M.default.PointText({content:k.default.font.flags[n][e],fontFamily:"gonville",fontSize:Scored.config.fontSize,fillColor:"black"})},J={up:[4,-9],down:[5,-11]},X=function(t){return new M.default.PointText({content:k.default.font.rests[t],fontFamily:"gonville",fontSize:Scored.config.fontSize,fillColor:"black"})},K={8:1,16:2,32:3,64:4,128:5,256:6};e.drawLegerLines=s,e.drawBarline=u,e.drawLine=l,e.drawSystemBar=c,e.drawClef=W,e.drawTimeSig=Y,e.drawHead=G,e.drawDots=f,e.drawRepeat=g,e.drawStaccato=p,e.drawTenuto=v,e.drawAccidental=Z,e.drawFlag=$,e.getFlagOffset=_,e.drawRest=X,e.beam=w,e.drawTuplets=x,e.drawDynamic=S,e.drawChordSymbol=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){var e=(0,j.isTimeSignature)(t)?t.value:t;if("c"===e||"h"===e)return[4,4];var n=e.split("/");return[+n[0],+n[1]]}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=T(e,2),i=n[0],r=n[1],a=i*(1/r);return Math.floor(t/a)}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=I.default.isArray(e)?e:a(e),r=T(i,2),o=r[0],s=r[1];return(t-n)%(o*(1/s))/(1/s)}function u(t,e){var n=void 0,i=e.measure,r=e.time;if(I.default.isNumber(e.measure)||(i=l(t,e.time)),i>=t.length){var o=I.default.last(t);r=d(o)+o.startsAt}var u=t[i];if((0,j.isTimeSignature)(e)&&(r=u.startsAt,n=0),!I.default.isNumber(e.time)&&!I.default.isNumber(r)){var c=u.startsAt;if(I.default.isNumber(e.beat)){r=c+1/T(a(u.timeSig),2)[1]*e.beat}else r=c}return u&&(n=e.beat||s(r,u.timeSig,u.startsAt)),{time:r,measure:i,beat:n}}function l(t,e){var n=I.default.find(t,function(t){var n=t.startsAt+d(t);return e>=t.startsAt&&e<n});return n?n.value:I.default.last(t).value+1}function c(t,e){return t[l(t,e)]}function h(t){var e=a(t),n=T(e,2);return n[0]*(1/n[1])}function f(t,e){return T(a(t),2)[1]*(1/e)}function d(t){return h(t.timeSig)}function g(t,e){var n=t.time,i=t.measure,r=void 0===i?0:i,a=t.beat,o=void 0===a?0:a,s=e.time,u=e.measure,l=void 0===u?0:u,c=e.beat,h=void 0===c?0:c;return I.default.isNumber(n)&&I.default.isNumber(s)?n<=s:r===l?o<=h:r<l}function p(t,e){var n=t.measure,i=void 0===n?0:n,r=t.beat,a=void 0===r?0:r,o=e.measure,s=void 0===o?0:o,u=e.beat,l=void 0===u?0:u;return i===s?a<=l:i<s}function v(t,e){var n=t.time,i=void 0===n?0:n,r=e.time;return i<=(void 0===r?0:r)}function _(t,e){return t.time===e.time}function m(t){var e=I.default.mapValues(I.default.groupBy(t,function(t){return T(t,2)[1].measure||0}),function(t){return I.default.groupBy(t,function(t){return T(t,2)[1].beat})});return Array.prototype.concat.apply([],I.default.map(b(e),b))}function y(t){return b(I.default.groupBy(t,function(t){return t.time}))}function w(t){if(!((0,j.isNote)(t)||(0,j.isChord)(t)||(0,j.isRest)(t)||(0,j.isRepeat)(t)))return 0;for(var e=t.tuplet?t.tuplet.split("/"):null,n=e?new L.default(e[0],e[1]):null,i=t.dots||0,r=new L.default(1,t.value),a=0;a<i;a++)r=r.mul(1.5);return n&&r&&(r=r.mul(e[1]).div(e[0])),r}function b(t){var e=I.default.keys(t),n=I.default.sortBy(e,function(t){return parseFloat(t)});return I.default.map(n,function(e){return t[e]})}function x(t){return I.default.reduce(t,function(t,e){return t.add(w(e))},(0,L.default)(0)).valueOf()}function S(t,e){return(I.default.isObject(t)?t.time:t)>(I.default.isObject(e)?e.time:e)}function C(t,e){return(I.default.isObject(t)?t.time:t)<(I.default.isObject(e)?e.time:e)}function A(t,e){return(I.default.isObject(t)?t.time:t)>=(I.default.isObject(e)?e.time:e)}function P(t,e){return(I.default.isObject(t)?t.time:t)<=(I.default.isObject(e)?e.time:e)}function M(t){return H[(0,L.default)(t).toFraction()]}Object.defineProperty(e,"__esModule",{value:!0}),e.equals=e.sumDurations=e.parseSignature=e.calculateDuration=e.splitByMeasure=e.splitByTime=e.getMeasureNumber=e.getMeasureDuration=e.calculateTupletDuration=e.getTimeSigDuration=e.compareByTime=e.compareByPosition=e.compareTimes=e.getBeat=e.getMeasureByTime=e.getMeasure=e.getTime=void 0;var O,T=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.gt=S,e.lt=C,e.gte=A,e.lte=P,e.absoluteToRelativeDuration=M;var k=n(0),I=i(k),E=n(36),L=i(E),j=n(4),z=(0,L.default)(1),N=(0,L.default)(1,2),B=(0,L.default)(1,4),D=(0,L.default)(1,8),R=(0,L.default)(1,16),F=(0,L.default)(1,32),q=(0,L.default)(1,64),U=(0,L.default)(1,128),V=(0,L.default)(1,256),H=(O={},r(O,z.toFraction(),Object.freeze({value:1,dots:0})),r(O,N.toFraction(),Object.freeze({value:2,dots:0})),r(O,B.toFraction(),Object.freeze({value:4,dots:0})),r(O,D.toFraction(),Object.freeze({value:8,dots:0})),r(O,R.toFraction(),Object.freeze({value:16,dots:0})),r(O,F.toFraction(),Object.freeze({value:32,dots:0})),r(O,q.toFraction(),Object.freeze({value:64,dots:0})),r(O,z.add(N).toFraction(),Object.freeze({value:1,dots:1})),r(O,N.add(B).toFraction(),Object.freeze({value:2,dots:1})),r(O,B.add(D).toFraction(),Object.freeze({value:4,dots:1})),r(O,D.add(R).toFraction(),Object.freeze({value:8,dots:1})),r(O,R.add(F).toFraction(),Object.freeze({value:16,dots:1})),r(O,F.add(q).toFraction(),Object.freeze({value:32,dots:1})),r(O,q.add(U).toFraction(),Object.freeze({value:64,dots:1})),r(O,z.add(N).add(B).toFraction(),Object.freeze({value:1,dots:2})),r(O,N.add(B).add(D).toFraction(),Object.freeze({value:2,dots:2})),r(O,B.add(D).add(R).toFraction(),Object.freeze({value:4,dots:2})),r(O,D.add(R).add(F).toFraction(),Object.freeze({value:8,dots:2})),r(O,R.add(F).add(q).toFraction(),Object.freeze({value:16,dots:2})),r(O,F.add(q).add(U).toFraction(),Object.freeze({value:32,dots:2})),r(O,q.add(U).add(V).toFraction(),Object.freeze({value:64,dots:2})),O);e.getTime=u,e.getMeasure=o,e.getMeasureByTime=c,e.getBeat=s,e.compareTimes=g,e.compareByPosition=p,e.compareByTime=v,e.getTimeSigDuration=h,e.calculateTupletDuration=f,e.getMeasureDuration=d,e.getMeasureNumber=l,e.splitByTime=y,e.splitByMeasure=m,e.calculateDuration=w,e.parseSignature=a,e.sumDurations=x,e.equals=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=_.default.note(t),i=_.default.note(e);return 7*(i.octave()-n.octave())+(w[i.name()]-w[n.name()])}function a(t,e,n){var i=3.5*Scored.config.lineSpacing;if(!e)return i;var a=r(e,t.pitch);if("up"===n&&a>=0)return i;if("down"===n&&a<0)return i;var o=a*Scored.config.stepSpacing;return Math.max(i,Math.abs(o))}function o(t,e,n){var i=void 0,r=void 0;return"up"===e?(i=t.noteHead.bounds.rightCenter.add(0,Scored.config.note.head.yOffset),r=i.subtract([0,n])):(i=t.noteHead.bounds.leftCenter.add(0,Scored.config.note.head.yOffset),r=i.add([0,n])),r}function s(t,e){return y.default.sum(t.map(function(t){return r(e,t.pitch)}))}function u(t,e){var n=y.default.sum(t.map(function(t){return(0,p.isNote)(t)?r(e,t.pitch):(0,p.isChord)(t)?s(t.children,e):0}))<0?"up":"down";return t.map(function(){return n})}function l(t,e,n){var i=new d.default.Path({segments:[t,e],strokeColor:"black",strokeWidth:2});return i.segments[0].handleOut=n,i.segments[1].handleIn=n,i}function c(t,e){var n=e.name,i=e.accidental;if(!t)return!1;var r=y.default.map(t.getPitches(),x);return!!y.default.findWhere(r,{name:n,accidental:i})}Object.defineProperty(e,"__esModule",{value:!0}),e.hasPitch=e.parsePitch=e.getAverageStemDirection=e.getSteps=e.slur=e.defaultStemPoint=e.getStemLength=void 0;var h=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=n(3),d=i(f),g=n(2),p=n(4),v=n(38),_=i(v),m=n(0),y=i(m),w={c:0,d:1,e:2,f:3,g:4,a:5,b:6},b=function(t){return y.default.reduce(t,function(t,e){return t+e},"")},x=y.default.memoize(function(t){var e=(0,g.partitionBy)(t,function(t){return!!y.default.isNaN(Number.parseInt(t))}),n=h(e,2),i=n[0],r=n[1],a=y.default.first(i),o=b(i.slice(1));return Object.freeze({name:a,accidental:o,octave:b(r)})});e.getStemLength=a,e.defaultStemPoint=o,e.slur=l,e.getSteps=r,e.getAverageStemDirection=u,e.parsePitch=x,e.hasPitch=c},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){return D[t]}function s(t){return R[t]}function u(t){return F[t]}function l(t,e){return t*e}function c(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.note.octave(),a=o(t.note.name());return(n.degree+7*n.octave-(a+7*r)-(4-n.offset)+i)*e}function h(t){return new k.default.Point(t).subtract(0,Scored.config.note.head.yOffset)}function f(t){return t.add(0,Scored.config.note.head.yOffset)}function d(t,e){var n="up"===e?Scored.config.layout.lineSpacing:-Scored.config.layout.lineSpacing;return t.noteHead.bounds.center.add(0,Scored.config.note.head.yOffset+n)}function g(t){for(var e=void 0,n=void 0,i=void 0,r=1;r<t.length;r++)e=t[r-1],n=t[r],i=n.bounds.center.x-n.bounds.left+(e.bounds.right-e.bounds.center.x),n.position.x=e.position.x+i}function p(t,e){if((0,B.isNote)(e)&&e.note.accidental()){var n=e.noteHead.bounds.center.x-e.noteHead.bounds.left;e.group.position.x=t+n}else if((0,B.isDynamic)(e)){var i=5;e.group.bounds.center.x=t+i}else{var r=e.group.bounds.center.x-e.group.bounds.left;e.group.position.x=t+r}}function v(t){return(q[t.type]||function(){return 0})(t)}function _(t,e){E.default.each(e,function(e){var n=(0,B.isNote)(e)?e:e.children[0],i=t-n.noteHead.bounds.center.x;e.group.translate([i,0])})}function m(){}function y(t,e){var n=j.calculateDuration(e);return n<t?1:1+Math.log2(n/t)}function w(t){return t.bounds.top+U[t.content]}function b(t){return t.bounds.bottom}function x(t){return f(t.noteHead.bounds.center).add(-Scored.config.note.accidental.xOffset,Scored.config.note.accidental.yOffset)}function S(t,e){var n=Scored.config.note.head.width,i=E.default.partition(t,B.isMarking),r=O(i,2),a=r[0],o=r[1],s=E.default.groupBy(a,function(t){return t.type}),u=s.clef,l=s.key,c=s.timeSig,h=function(t){return t.group.bounds.width+n},f=u?E.default.max(u.map(h)):0,d=l?E.default.max(l.map(h)):0,g=c?E.default.max(c.map(h)):0,p=E.default.sum([f,d,g]),v=E.default.map(E.default.reject(o,B.isDynamic),function(t){return t.group.bounds.width+n*y(e,t)});return[p,v.length?E.default.min(v):0]}function C(t){var e=Scored.config.note.head.width,n=Scored.config.shortestDuration,i=0;if((0,B.isMarking)(t))i=t.group.children.length?t.group.bounds.width+e:0;else if(t.type===N.default.type.measure){var r=t.barlines[0];i=r.position.x+e}else i=t.group.bounds.width+e*y(n,t);return i}function A(t,e,n){return n.group.translate(t.add([0,v(n)])),p(e,n),C(n)}function P(t,e,n){return e+(n-e)*t}Object.defineProperty(e,"__esModule",{value:!0}),e.getArticulationPoint=e.scaleCursor=e.placeMarking=e.calculateTimeLength=e.calculateDefaultAccidentalPosition=e.getAccidentalBottom=e.getAccidentalTop=e.alignNoteHeads=e.placeAt=e.calculateCursor=e.getStaffSpace=e.commonShortestDuration=e.getYOffset=e.lineup=e.getLineNames=e.getClefBase=e.getNoteHeadCenter=e.getNoteHeadOffset=e.calculateAccidentalYpos=e.calculateNoteYpos=void 0;var M,O=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=n(3),k=r(T),I=n(0),E=r(I),L=n(6),j=i(L),z=n(1),N=r(z),B=n(4),D={c:0,d:1,e:2,f:3,g:4,a:5,b:6},R={treble:{pitch:"C",degree:0,octave:5,offset:3},bass:{pitch:"F",degree:3,octave:3,offset:2},alto:{pitch:"C",degree:0,octave:4,offset:4},tenor:{pitch:"C",degree:0,octave:4,offset:2}},F={treble:["f","e","d","c","b","a","g","f","e"],base:["a","g","f","e","d","c","b","a","g"],alto:["g","f","e","d","c","b","a","g","f"],tenor:["e","d","c","b","a","g","f","e","d"]},q=(M={},a(M,N.default.type.clef,function(t){var e=t.value;return{treble:1.5*Scored.config.note.head.width,bass:1.5*Scored.config.note.head.width-17,alto:1.5*Scored.config.note.head.width-9,tenor:1.5*Scored.config.note.head.width-18}[e]}),a(M,N.default.type.key,function(){return 1.5*Scored.config.note.head.width-8}),a(M,N.default.type.timeSig,function(t){var e=t.value;return"c"===e||"h"===e?-9:1.5*Scored.config.note.head.width}),a(M,N.default.type.rest,function(t){return 1===t.value?0:Scored.config.layout.lineSpacing}),a(M,N.default.type.chordSymbol,function(){return-16}),a(M,N.default.type.repeat,function(){return 0}),M),U={};U[N.default.font.accidentals.sharp]=10,U[N.default.font.accidentals.flat]=10,U[N.default.font.accidentals.doubleFlat]=10,U[N.default.font.accidentals.doubleSharp]=10,U[N.default.font.accidentals.natural]=10,e.calculateNoteYpos=c,e.calculateAccidentalYpos=l,e.getNoteHeadOffset=h,e.getNoteHeadCenter=f,e.getClefBase=s,e.getLineNames=u,e.lineup=g,e.getYOffset=v,e.commonShortestDuration=m,e.getStaffSpace=y,e.calculateCursor=C,e.placeAt=p,e.alignNoteHeads=_,e.getAccidentalTop=w,e.getAccidentalBottom=b,e.calculateDefaultAccidentalPosition=x,e.calculateTimeLength=S,e.placeMarking=A,e.scaleCursor=P,e.getArticulationPoint=d},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(e){return e instanceof d.default.PlacedSymbol?e.symbol.definition.children[t].segments[0].point:e.children[t].segments[0].point}}function o(t){var e=p.default.map(t.children,function(t){return t.barlines[0].position});return function(n){var i=p.default.map(e,function(t){return n.x-t.x});return t.children[p.default.indexOf(i,p.default.min(p.default.filter(i,function(t){return t>=0})))]}}function s(t,e,n,i){return p.default.reduce(t.voices,function(t,r){if(p.default.isString(r)){var a=p.default.find(e,function(t){return t.name===r});return a?(0,y.concat)(t,a.getTimeFrame(n,i,!0)):t}if(!p.default.isObject(r))return t},[])}function u(t,e,n){var i=t.markings.concat(n),r=p.default.map(p.default.groupBy(i,function(t){return(0,v.getTime)(e,t).time}),function(n){var i=(0,v.getTime)(e,n[0]);return{time:i,items:n,context:t.contextAt(i)}});return p.default.sortBy(r,function(t){return t.time.time})}function l(t,e,n,i){var r=p.default.groupBy(e,function(t){return t.time.measure});return p.default.map(t,function(t){var e=p.default.reduce(r[t.value],function(t,e){var n=e.items,r=w(n,i),a=h(r,2),o=a[0],s=a[1];return[t[0]+o,t[1]+s]},[0,0]),a=h(e,2),o=a[0],s=a[1];return o+(s?s:Scored.config.measure.length)+n})}function c(t,e,n){var i=n.items,r=p.default.groupBy(i,function(t){return t.type}),a=r.clef,o=r.key,s=r.timeSig,u=r.repeat;return a&&(e+=m.placeMarking(t,e,a[0])),o&&(e+=m.placeMarking(t,e,o[0])),s&&(e+=m.placeMarking(t,e,s[0])),u&&(e+=m.placeMarking(t,e,u[0])),e}Object.defineProperty(e,"__esModule",{value:!0}),e.positionMarkings=e.calculateMeasureLengths=e.getTimeContexts=e.getLineItems=e.getMeasure=e.e=e.g=e.b=e.d=e.f=void 0;var h=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=n(3),d=r(f),g=n(0),p=r(g),v=n(6),_=(n(4),n(8)),m=i(_),y=n(2),w=m.calculateTimeLength,b=a("F"),x=a("D"),S=a("B"),C=a("G"),A=a("E");e.f=b,e.d=x,e.b=S,e.g=C,e.e=A,e.getMeasure=o,e.getLineItems=s,e.getTimeContexts=u,e.calculateMeasureLengths=l,e.positionMarkings=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.value,n=void 0===e?"treble":e,i=t.measure,r=t.beat;this.value=n,this.measure=i,this.beat=r}function a(t){return d[t.value]}Object.defineProperty(e,"__esModule",{value:!0}),e.getCenterLineValue=a;var o=n(3),s=i(o),u=n(5),l=n(1),c=i(l),h=n(14),f=c.default.type.clef;r.prototype.type=f,r.prototype.render=function(){var t={top:0,left:2,bottom:0,right:7},e=this.group=new s.default.Group({name:f});return e.addChild((0,u.drawClef)(this.value,t)),e.position=[0,0],e},r.prototype.equals=function(t){return(0,h.clefEquals)(this,t)};var d={treble:"b4",bass:"d3",alto:"c4",tenor:"a4"};e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return""===t?"n":"##"===t?"x":t}function a(t,e){return r(t)===r(e)}function o(t,e,n){var i=t.name,o=t.accidental,s=t.octave,u=f.default.filter(e,function(t){return t.name===i&&t.octave===s}),l=c(u,1),h=l[0];return(0,d.hasPitch)(n,{name:i,accidental:o,octave:s})?h?a(h.accidental,o)?void 0:r(o):void 0:h&&a(h.accidental,o)?void 0:r(o)}function s(t,e){var n=f.default.map(t,p),i=f.default.map(e,p);return f.default.union(f.default.map(f.default.difference(f.default.union(n,i),f.default.intersection(n,i)),function(n){var i=f.default.findWhere(e,n);return i?i:f.default.findWhere(t,n)}),e)}function u(t){var e=new Array(t.length);e[0]=[];for(var n=0;n<t.length-1;n++){var i=f.default.groupBy(t[n].items,function(t){return t.type}),r=i.note,a=void 0===r?[]:r,o=i.chord,u=void 0===o?[]:o,l=f.default.reduce(u,function(t,e){return t.concat(e.children)},[]),c=f.default.map(a.concat(l),function(t){var e=t.pitch;return(0,d.parsePitch)(e)});e[n+1]=s(e[n],c)}return e}function l(t){var e=(0,g.partitionBy)(t,function(t){return t.time.measure});return f.default.flatten(f.default.map(e,u))}Object.defineProperty(e,"__esModule",{value:!0}),e.getAccidentalContexts=e.createAccidentalContext=e.getAccidental=void 0;var c=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=n(0),f=i(h),d=n(7),g=n(2),p=f.default.memoize(function(t){var e=t.name,n=t.octave;return Object.freeze({name:e,octave:n})},function(t){return""+t.name+t.octave});e.getAccidental=o,e.createAccidentalContext=s,e.getAccidentalContexts=l},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=t.pitch,n=t.pitchClass,i=void 0===n?"a":n,r=t.octave,a=void 0===r?4:r,o=t.value,s=void 0===o?4:o,u=t.dots,c=void 0===u?0:u,h=t.slur,f=t.tuplet,d=t.time,g=t.staccato,p=t.tenuto,v=t.portato,_=t.voice;this.pitch=e||i+a,this.pitchClass=i,this.octave=this.octave,this.note=l.default.note(this.pitch,{value:s,dots:c}),this.value=s,this.dots=c,this.tuplet=f,this.time=d,this.voice=_,this.slur=h,this.staccato=g,this.tenuto=p,this.portato=v}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),s=r(o),u=n(38),l=r(u),c=n(0),h=r(c),f=n(5),d=i(f),g=n(31),p=n(8),v=i(p),_=n(7),m=i(_),y=n(11),w=n(1),b=r(w),x=n(10),S=n(2),C=n(14),A=b.default.type.note;a.prototype.type=A,a.render=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.render(e);return a.renderAccidental(t,e.accidentals,e.key),t.renderStem(),n},a.renderAccidental=function(t,e,n){var i=m.parsePitch(t.pitch),r=n?(0,y.getAccidental)(i,e,n):i.accidental;if(!h.default.isUndefined(r)){var a=v.calculateDefaultAccidentalPosition(t);t.drawAccidental(r).translate(a)}},a.renderDots=function(t,e){t.dots&&t.drawDots(t.dots,e)},a.prototype.renderStem=function(t,e){if(this.needsStem()){e=e||this.getStemDirection(t);var n=m.defaultStemPoint(this,e,m.getStemLength(this,t,e));this.drawStem(n,e),this.drawFlag()}},a.prototype.render=function(){var t=this.group=new s.default.Group({name:A}),e=v.getNoteHeadOffset([0,0]),n=this.noteHead=d.drawHead(1/this.value);return n.position=e,t.addChild(n),t},a.prototype.needsStem=function(){return this.note.duration.value>=2},a.prototype.needsFlag=function(){return this.note.duration.value>=8},a.prototype.drawLegerLines=function(t,e){var n=d.drawLegerLines(this.noteHead,t,e);n&&this.group.addChild(n)},a.prototype.drawGroupBounds=function(){var t=new s.default.Rectangle(this.group.bounds);e.right+=5;var e=new s.default.Path.Rectangle({name:"bounds",rectangle:t});e.fillColor="#FFF",e.opacity=0,this.group.insertChild(0,e)},a.prototype.drawStem=function(t,e){var n=void 0,i=void 0;return"up"===e?(this.stemDirection="up",n=this.noteHead.bounds.rightCenter.add(0,Scored.config.note.head.yOffset)):(this.stemDirection="down",n=this.noteHead.bounds.leftCenter.add(0,Scored.config.note.head.yOffset)),i=new s.default.Path.Line({name:"stem",from:n,to:t,strokeColor:"black",strokeWidth:2}),this.group.addChild(i),i},a.prototype.drawFlag=function(){var t=this.value,e=this.group.children.stem,n=d.drawFlag(t,this.stemDirection);return n&&(n.position=d.getFlagOffset(e.segments[1].point,this.stemDirection),this.group.addChild(n)),n},a.prototype.drawAccidental=function(t){var e=d.drawAccidental(t);return e.position=[0,0],this.group.addChild(e),e},a.prototype.drawDots=function(t,e,n){var i=(0,x.getCenterLineValue)(e),r=m.getSteps(i,this.pitch),a=this.noteHead.bounds.center.y+Scored.config.note.head.yOffset,o=(0,S.isEven)(r)?a-Scored.config.layout.stepSpacing:a,u=void 0;u=n?new s.default.Point(n,o):new s.default.Point(this.noteHead.bounds.right+Scored.config.note.head.width/2,o);var l=d.drawDots(u,t);this.group.addChildren(l)},a.prototype.drawArticulations=function(){var t=this.staccato||this.tenuto||this.portato?v.getArticulationPoint(this,this.stemDirection):null;if(this.staccato){var e=d.drawStaccato(t);this.group.addChild(e)}if(this.tenuto){var n=d.drawTenuto(t);this.group.addChild(n)}if(this.portato){var i=d.drawStaccato(t);this.group.addChild(i),this.slur}},a.prototype.getStemDirection=function(t){return this.stemDirection?this.stemDirection:t?m.getSteps(t,this.pitch)<0?"up":"down":"up"},a.prototype.calculateStemPoint=function(t,e,n){return(0,g.getLinePoint)("up"===n?this.noteHead.bounds.right:this.noteHead.bounds.left,t,e)},a.prototype.equals=function(t){return(0,C.noteEquals)(this,t)},e.default=a},function(t,e){t.exports={notes:{c:[0,0],d:[-1,2],e:[-2,4],f:[1,-1],g:[0,1],a:[-1,3],b:[-2,5],h:[-2,5]},intervals:{unison:[0,0],second:[3,-5],third:[2,-3],fourth:[1,-1],fifth:[0,1],sixth:[3,-4],seventh:[2,-2],octave:[1,0]},intervalFromFifth:["second","sixth","third","seventh","fourth","unison","fifth"],intervalsIndex:["unison","second","third","fourth","fifth","sixth","seventh","octave","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth"],fifths:["f","c","g","d","a","e","b"],accidentals:["bb","b","","#","x"],sharp:[-4,7],A4:[3,3],durations:{.25:"longa",.5:"breve",1:"whole",2:"half",4:"quarter",8:"eighth",16:"sixteenth",32:"thirty-second",64:"sixty-fourth",128:"hundred-twenty-eighth"},qualityLong:{P:"perfect",M:"major",m:"minor",A:"augmented",AA:"doubly augmented",d:"diminished",dd:"doubly diminished"},alterations:{perfect:["dd","d","P","A","AA"],minor:["dd","d","m","M","A","AA"]},symbols:{min:["m3","P5"],m:["m3","P5"],"-":["m3","P5"],M:["M3","P5"],"":["M3","P5"],"+":["M3","A5"],aug:["M3","A5"],dim:["m3","d5"],o:["m3","d5"],maj:["M3","P5","M7"],dom:["M3","P5","m7"],"ø":["m3","d5","m7"],5:["P5"]},chordShort:{major:"M",minor:"m",augmented:"aug",diminished:"dim","half-diminished":"7b5",power:"5",dominant:"7"},stepNumber:{unison:1,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,octave:8,ninth:9,eleventh:11,thirteenth:13},intervalSolfege:{dd1:"daw",d1:"de",P1:"do",A1:"di",AA1:"dai",d2:"raw",m2:"ra",M2:"re",A2:"ri",AA2:"rai",d3:"maw",m3:"me",M3:"mi",A3:"mai",dd4:"faw",d4:"fe",P4:"fa",A4:"fi",AA4:"fai",dd5:"saw",d5:"se",P5:"so",A5:"si",AA5:"sai",d6:"law",m6:"le",M6:"la",A6:"li",AA6:"lai",d7:"taw",m7:"te",M7:"ti",A7:"tai",dd8:"daw",d8:"de",P8:"do",A8:"di",AA8:"dai"}}},function(t,e,n){"use strict";function i(t,e){if(!t.type||!e.type)throw"No type: Equality checks require a type";return!!r(t,e)&&c[t.type](t,e)}function r(t,e){return t.type===e.type}function a(t,e){return t.value===e.value&&t.pitch===e.pitch&&t.dots===e.dots&&t.tuplet===e.tuplet&&t.time===e.time&&t.voice===e.voice&&t.slur===e.slur&&t.staccato===e.staccato&&t.tenuto===e.tenuto&&t.portato===e.portato}function o(t,e){return t.voice===e.voice&&t.value===e.value&&t.dots===e.dots&&t.tuplet===e.tuplet&&t.time===e.time&&t.slur===e.slur}function s(t,e){return t.value===e.value&&t.measure===e.measure&&t.beat===e.beat}function u(t,e){return t.value===e.value&&t.time===e.time}Object.defineProperty(e,"__esModule",{value:!0}),e.dynamicEquals=e.clefEquals=e.restEquals=e.noteEquals=void 0,e.equals=i;var l=n(0),c={note:a,rest:o,clef:s,dynamic:u},h=(0,l.curry)(function(t,e,n){return r(e,n)&&t(e,n)});e.noteEquals=h(a),e.restEquals=h(o),e.clefEquals=h(s),e.dynamicEquals=h(u)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return Array.isArray(t)?t:Array.from(t)}function a(t){var e=t.value,n=void 0===e?4:e,i=t.dots,r=void 0===i?0:i,a=t.tuplet,s=t.time,u=t.root,l=t.name,c=t.inversion,h=t.staccato,f=t.tenuto,d=t.portato,g=t.slur,p=t.stemDirection,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.value=n,this.dots=r,this.tuplet=a,this.time=s,this.root=u,this.name=l,this.inversion=c,this.staccato=h,this.tenuto=f,this.portato=d,this.slur=g,this.stemDirection=p,this.children=o(v,{value:n})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h.default.map(t,function(t){return t instanceof b.default?(t.value=e.value,t):h.default.isString(t)?new b.default(h.default.assign({},e,{pitch:t})):h.default.isObject(t)?new b.default(h.default.assign({},e,t,{value:e.value})):void 0});return h.default.sortBy(n,function(t){return t.note.midi()})}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n(3),l=i(u),c=n(0),h=i(c),f=n(5),d=n(7),g=n(30),p=n(2),v=n(8),_=n(11),m=n(1),y=i(m),w=n(12),b=i(w),x=n(10),S=y.default.type.chord,C="up",A="down";a.prototype.type=S,a.render=function(t,e){var n=t.render(e);return a.renderAccidentals(t,e),t.renderStem(),n},a.renderAccidentals=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h.default.map(t.children,function(t){var n=(0,d.parsePitch)(t.pitch);return e.key?(0,_.getAccidental)(n,e.accidentals,e.key):n.accidental}),i=h.default.map(t.children,v.calculateDefaultAccidentalPosition),r=h.default.min(i,function(t){return t.x}).x,a=(0,p.map)(function(t,e,n){var i=t.drawAccidental(e);return i.translate(r,n.y),i},t.children,n,i),o=(0,g.getAccidentalOrdering)(t.children.length),s=1;h.default.each(o,function(t,e){var n=a[t],i=a[o[e+1]];i&&((0,p.isEven)(e)?(0,v.getAccidentalBottom)(n)>(0,v.getAccidentalTop)(i)&&(i.translate(-Scored.config.note.accidental.xOffset*s,0),s++):(0,v.getAccidentalTop)(n)<(0,v.getAccidentalBottom)(i)&&(i.translate(-Scored.config.note.accidental.xOffset*s,0),s++))})},a.prototype.renderStem=function(t,e){if(this.needsStem()){e=e||this.getStemDirection(t);var n=(0,g.defaultStemPoint)(this,e,(0,g.getStemLength)(this,t,e));this.drawStem(n,e),this.drawFlag()}},a.prototype.render=function(t){var e=this,n=this.group=new l.default.Group({name:S}),i=this.getStemDirection((0,x.getCenterLineValue)(t.clef)),a=(0,g.getOverlappingNotes)(this),o=r(this.children),u=o[0],c=o.slice(1),f=this.children.map(function(e){return e.render(t)}),p=void 0;i===A?function(){var t=-Scored.config.note.head.width;p=function(e){var n=[];return h.default.each(h.default.clone(e).reverse(),function(e){var i=s(e,2),r=i[0],a=i[1];h.default.some(n,function(t){return t===a})||(r.group.translate(t,0),n.push(r))}),n}}():function(){var t=Scored.config.note.head.width;p=function(e){var n=[];return h.default.each(e,function(e){var i=s(e,2),r=i[0],a=i[1];h.default.some(n,function(t){return t===r})||(a.group.translate(t,0),n.push(a))}),n}}();var v=void 0;return a.length&&(v=p(a)),h.default.each(c,function(t){var e=(0,d.getSteps)(t.pitch,u.pitch);t.group.translate(0,e*Scored.config.layout.stepSpacing)}),n.addChildren(f),this.dots&&function(){var n=v&&v.length&&i===C?v[0]:e.getBaseNote(i),r=n.noteHead.bounds.right+Scored.config.note.head.width/2;h.default.each(e.children,function(n){n.drawDots(e.dots,t.clef,r)})}(),n},a.prototype.drawStem=function(t,e){var n=void 0,i=void 0;return e===C?(this.stemDirection=C,n=this.children[0].noteHead.bounds.rightCenter.add(0,Scored.config.note.head.yOffset)):(this.stemDirection=A,n=h.default.last(this.children).noteHead.bounds.leftCenter.add(0,Scored.config.note.head.yOffset)),i=new l.default.Path.Line({name:"stem",from:n,to:t,strokeColor:"black",strokeWidth:2}),this.group.addChild(i),i},a.prototype.drawFlag=function(){var t=this.value,e=this.group.children.stem,n=(0,f.drawFlag)(t,this.stemDirection);return n&&(n.position=(0,f.getFlagOffset)(e.segments[1].point,this.stemDirection),this.group.addChild(n)),n},a.prototype.drawLegerLines=function(t,e){this.children.map(function(n){return n.drawLegerLines(t,e)})},a.prototype.needsStem=function(){return this.value>=2},a.prototype.needsFlag=function(){return this.value>=8},a.prototype.getStemDirection=function(t){if(this.stemDirection)return this.stemDirection;if(t){if(1===this.children.length)return(0,d.getSteps)(t,this.children[0].pitch)<0?C:A;var e=(0,d.getSteps)(t,this.children[0].pitch),n=(0,d.getSteps)(t,h.default.last(this.children).pitch);return e<0&&n<0?C:e>=0&&n>=0?A:Math.abs(e)>Math.abs(n)?C:A}return C},a.prototype.drawArticulations=function(){var t=this.staccato||this.tenuto||this.portato?(0,v.getArticulationPoint)(this.getBaseNote(this.stemDirection),this.stemDirection):null;if(this.staccato){var e=(0,f.drawStaccato)(t);this.group.addChild(e)}if(this.tenuto){var n=(0,f.drawTenuto)(t);this.group.addChild(n)}if(this.portato){var i=(0,f.drawStaccato)(t);this.group.addChild(i),this.slur}},a.prototype.getBaseNote=function(t){return t===C?this.children[0]:h.default.last(this.children)},a.prototype.calculateStemPoint=function(t,e,n){return this.getBaseNote(n).calculateStemPoint(t,e,n)},a.prototype.equals=function(t){return this.type===t.type&&this.value===t.value&&this.dots===t.dots&&this.tuplet===t.tuplet&&this.time===t.time&&this.staccato===t.staccato&&this.tenuto===t.tenuto&&this.portato===t.portato&&this.slur===t.slur&&this.stemDirection===t.stemDirection&&this.children.length===t.children.length&&h.default.every(this.children,function(e,n){return e.equals(t.children[n])})},e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.voices,n=void 0===e?{}:e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=l.default.groupBy(i,function(t){return t.type});this.children=i,this.markings=l.default.sortByAll(l.default.reduce(l.default.omit(r,o.default.type.measure),function(t,e){return t.concat(e)},[]),"measure",function(t){return t.beat?t.beat:0}),this.voices=n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=i(a),s=(n(2),n(5)),u=(n(6),n(4),n(0)),l=i(u),c=o.default.type.line;r.prototype.type=c,r.calculateAverageMeasureLength=function(t,e,n){return e*(t/n)},r.prototype.render=function(t){var e=(0,s.drawLine)(t);return e.name=c,e.strokeColor="black",e},r.prototype.contextAt=function(t){var e=l.default.curry(function(t,e){return e.measure<t.measure||e.measure===t.measure&&(e.beat||0)<=(t.beat||0)}),n=function(t,n,i){var r=l.default.filter(t,function(t){return t.type===n}).reverse();return l.default.find(r,e(i))};return{clef:n(this.markings,o.default.type.clef,t)||{},timeSig:n(this.markings,o.default.type.timeSig,t)||{},key:n(this.markings,o.default.type.key,t)||{}}},e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.value,n=t.timeSig,i=t.startsAt,r=void 0===i?0:i,a=t.barType,o=void 0===a?_:a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!n)throw new Error("Time Signature is required when initializing Measure");this.value=e,this.timeSig=n,this.startsAt=r,this.barType=o,this.children=s}function a(t,e){var n=new Array(t),i=d.default.partition(d.default.filter(e,function(t){return!!t}),g.isMeasure),a=o(i,2),s=a[0],u=a[1],l=d.default.groupBy(u,function(t){return t.measure||0});return function(){var t=0;d.default.each(s,function(e){d.default.isNumber(e.index)?(n[e.index]=e,t=e.index+1):(n[t]=e,t++)})}(),d.default.each(n,function(e,i){var a=n[i-1],o=a?a.startsAt+(0,p.getMeasureDuration)(a):0;if(e)e.startsAt=o,e.value=i;else{var s=d.default.find(l[i],g.isTimeSignature)||a.timeSig;e=new r(d.default.extend({},{startsAt:o,timeSig:s,value:i}),l[i])}i===t-1&&(e.barType="final"),n[i]=e}),n}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.createMeasures=a;var s=n(3),u=i(s),l=n(1),c=i(l),h=n(5),f=n(0),d=i(f),g=n(4),p=n(6),v=c.default.type.measure,_="default";r.prototype.type=v,r.prototype.render=function(t,e,n){var i=new u.default.Group({name:v}),r=this.barType;d.default.filter(this.children,g.isRepeat).length&&(r="repeat"),e=e||(0,h.drawBarline)(t);var a=e.bounds.right,o=(0,h.drawBarline)(t,a+n,r),s=this.drawGroupBounds(a,o);return i.addChildren([s,e,o]),this.barlines=[e,o],i},r.prototype.drawGroupBounds=function(t,e){var n=new u.default.Path.Rectangle({name:"bounds",from:new u.default.Point(t,e.bounds.top),to:e.bounds.bottomRight});return n.fillColor="#FFF",n.opacity=0,n},e.default=r},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=t.page,n=void 0===e?0:e,i=t.measures,r=void 0===i?4:i,a=t.lineHeights,o=void 0===a?[]:a,s=t.indentation,u=void 0===s?0:s,l=t.length,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.page=n,this.measures=r,this.children=c,this.markings=g.default.filter(c,p.isMarking),this.lineHeights=o,this.length=l,this.indentation=u}function o(t,e){return g.default.map(t,function(t){var n=t.lines.reduce(function(t,e){return e?t.concat(e.items):t},[]),i=S.calculateTimeLength(n,e);return{time:t.time,length:i}})}function s(t,e,n,i){return g.default.reduce(t,function(t,n,r){var a=(g.default.filter(g.default.map(n.lines,function(t,e){return t?e:void 0}),g.default.isNumber),g.default.last(t)?g.default.last(t).time:0),o=n.time,s=g.default.last(t)?g.default.last(t).cursor:Scored.config.note.head.width;if(o.measure!==a.measure){var u=g.default.find(e,function(t){return t.value===o.measure});s=S.calculateCursor(u)}n.group.translate(s,0);var l=n.calculateCursor();return t.concat({time:o,cursor:i(l,s)})},[])}function u(t,e){if(2===t.length)return 0===e?"up":"down"}function l(t,e){g.default.filter(t,p.isPitched).map(function(t){return t.drawLegerLines(e,Scored.config.lineSpacing)})}function c(t){return new f.default.PointText({content:t,fontFamily:"gonvillealpha",fontSize:Scored.config.fontSize/1.5,fillColor:"black"})}Object.defineProperty(e,"__esModule",{value:!0});var h=n(3),f=r(h),d=n(0),g=r(d),p=n(4),v=n(5),_=n(1),m=r(_),y=n(9),w=n(21),b=n(2),x=n(8),S=i(x),C=n(6),A=n(19),P=r(A),M=n(10),O=n(16),T=(r(O),m.default.type.system);a.renderTimeContexts=function(t){var e=t.system,n=t.lines,i=t.measures,r=t.voices,a=t.timeContexts,h=t.length,f=e.render(),d=e.getLineHeights(n),p=g.default.map(a,function(t){return t.render(d)}),_=Scored.config.shortestDuration,m=o(a,_),x=(0,w.addDefaultMeasureLengths)(e.measures,(0,w.calculateMeasureLengths)(m)),A=g.default.sum(x),O=void 0,T=void 0;if(h)!function(){O=e.renderLines(n,h);var t=(g.default.sum(m,function(t){return t.length[0]}),h/A),r=e.renderMeasures(i,g.default.map(x,function(e){return e*t}),O);f.addChildren(r),T=function(e,n){return S.scaleCursor(t,n,g.default.min(e)+n)}}();else{O=e.renderLines(n,A);var k=e.renderMeasures(i,x,O);f.addChildren(k),T=function(t,e){return g.default.min(t)+e}}f.addChildren(p),f.addChildren(O),f.addChild((0,v.drawSystemBar)(O));var I=g.default.map(O,y.b);s(a,i,x,T);a&&function(){var t=g.default.first(a).time,e=g.default.last(a).time;(0,b.map)(function(n,a,o){var s=(0,y.getLineItems)(n,r,t.time,e.time);g.default.each(s,function(t,e){var r=g.default.groupBy(t,function(t){return(0,C.getMeasureNumber)(i,t.time)});g.default.each(i,function(t){var i=r[t.value]||[];if(i.length){var l=n.contextAt({measure:t.value}),c=(0,M.getCenterLineValue)(l.clef),h=P.default.findBeaming(l.timeSig,i),f=u(s,e),d=f?g.default.fill(new Array(i.length),f):P.default.getAllStemDirections(h,c),p=g.default.compact((0,b.mapDeep)(g.default.partial(P.default.stemAndBeam,c),h,d));a.addChildren(p);var v=P.default.renderTuplets(i,o);a.addChildren(v)}})}),g.default.each(s,function(t){l(t,o),P.default.renderArticulations(t)})},n,O,I)}();var E=c(i[0].value);return E.translate(0,-20),f.addChild(E),f},a.prototype.type=T,a.prototype.render=function(){return new f.default.Group({name:T})},a.prototype.getLineHeights=function(t){var e=this;return t.reduce(function(t,n,i){return t.concat((e.lineHeights[i+1]||120)+g.default.last(t))},[this.lineHeights[0]||0])},a.prototype.renderLines=function(t,e){var n=this.getLineHeights(t);return t.map(function(t,i){var r=t.render(e);return r.translate([0,n[i]]),r})},a.prototype.renderMeasures=function(t,e,n){return g.default.reduce(t,function(t,i,r){var a=e[r],o=g.default.last(t),s=o?g.default.last(o.children):null,u=i.render(n,s,a);return t.push(u),t},[])},e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.reduce(function(t,n){var i=h.default.last(t);return n.time=i?(0,d.default)(i.time).add((0,w.calculateDuration)(i)).add(e).valueOf():0,(0,_.concat)(t,n)},[])}function a(t){var e=(t.value,t.name),n=t.stemDirection,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.name=e,this.children=r(i),this.stemDirection=n}function o(t,e){var n=h.default.first(t);if((0,v.isPitched)(n)){if(n.value<=4)return[[h.default.first(t)],h.default.rest(t)];var i=h.default.findIndex(t,function(t){return t.time>=e||t.value<=4||!(0,v.isPitched)(t)});return i===-1?[t,[]]:[h.default.take(t,i),h.default.drop(t,i)]}return[null,h.default.rest(t)]}function s(t,e){return t>e}function u(t,e){return t>=e}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=n(0),h=i(c),f=n(36),d=i(f),g=n(1),p=i(g),v=n(4),_=n(2),m=n(5),y=n(7),w=n(6),b=n(46);a.prototype.type=p.default.type.voice,a.findBeaming=function(t,e){if(!e.length)return[];var n=(0,w.parseSignature)(t),i=l(n,2),r=i[1],a=t.beatStructure.map(function(t){return t*(1/r)}),s=e[0].time,u=h.default.rest((0,_.reductions)(function(t,e){return t+e},a,s)),c=[],f=0,d=o(e,u[f]),g=l(d,2),p=g[0],v=g[1];for(c.push(p);v.length;){v[0].time>=u[f]&&f++;var m=o(v,u[f]),y=l(m,2);p=y[0],v=y[1],p&&c.push(p)}return h.default.reject(c,h.default.isEmpty)},a.groupTuplets=function(t){if(!t.length)return[];for(var e=[],n=null,i=0;i<t.length;i++){var r=t[i];if(r.tuplet)if(r.tuplet===n&&h.default.last(e)){var a=h.default.last(e),o=h.default.min(a,function(t){return t.value}).value,s=(0,w.sumDurations)(a),u=(0,w.calculateTupletDuration)(n,o);s<u?a.push(r):e.push([r])}else e.push([r]),n=r.tuplet;else n=null}return e},a.stemAndBeam=function(t,e,n){if(1!==e.length)return(0,m.beam)(e,{line:t,stemDirections:n});e[0].renderStem(t,n[0])},a.getAllStemDirections=function(t,e){return h.default.reduce(t,function(t,n){return t.concat((0,y.getAverageStemDirection)(n,e))},[])},a.renderArticulations=function(t){h.default.each(t,function(t){t.drawArticulations&&t.drawArticulations()})},a.renderTuplets=function(t,e){var n=this;return a.groupTuplets(t).map(function(t){return(0,m.drawTuplets)(t,e,n.stemDirection)})},a.prototype.getTimeFrame=function(t,e,n){for(var i=[],r=n?s:u,a=0;a<this.children.length;a++){var o=this.children[a];if(r(o.time,e))break;o.time>=t&&i.push(o)}return i},a.prototype.equals=function(t){return this.type===t.type&&this.name===t.name&&this.stemDirection===t.stemDirection&&this.children.length===t.children.length&&h.default.every(this.children,function(e,n){return e.equals(t.children[n])})},a.prototype[Symbol.iterator]=a.prototype.iterate=function(){var t=-1;return{items:this.children,next:function(){t++;var e=this.items[t];if(!e)return{done:!0};for(var n=e.time,i=[];this.items[t+1]&&n===this.items[t+1].time;)i.push(this.items[t+1]),t++;return{done:!1,value:[e].concat(i)}}}},a.prototype.breakDurations=function(t){var e=0,n=this.children.reduce(function(n,i){return i.time>=t[e]&&(e=h.default.findIndex(t,function(t){return t>i.time})),n.concat((0,b.divide)(t[e],i))},[]);this.children=n},e.default=a},function(t,e,n){function i(t){if(!(this instanceof i))return new i(t);this.coord=t}var r=n(13),a=n(40),o=n(61);i.prototype={name:function(){return r.intervalsIndex[this.number()-1]},semitones:function(){return a.sum(a.mul(this.coord,[12,7]))},number:function(){return Math.abs(this.value())},value:function(){var t,e,n=a.sub(this.coord,a.mul(r.sharp,Math.floor((this.coord[1]-2)/7)+1));return t=r.intervalFromFifth[n[1]+5],e=r.stepNumber[t]+7*(n[0]-r.intervals[t][0]),e>0?e:e-2},type:function(){return r.intervals[this.base()][0]<=1?"perfect":"minor"},base:function(){var t,e=a.sub(this.coord,a.mul(r.sharp,this.qualityValue()))[1];return e=this.value()>0?e+5:-(e-5)%7,e=e<0?r.intervalFromFifth.length+e:e,t=r.intervalFromFifth[e],"unison"===t&&this.number()>=8&&(t="octave"),t},direction:function(t){if(t){return(this.value()>=1?"up":"down")!==t&&(this.coord=a.mul(this.coord,-1)),this}return this.value()>=1?"up":"down"},simple:function(t){var e=r.intervals[this.base()];return e=a.add(e,a.mul(r.sharp,this.qualityValue())),t||(e="down"===this.direction()?a.mul(e,-1):e),new i(e)},isCompound:function(){return this.number()>8},octaves:function(){var t,e;return"up"===this.direction()?(t=a.sub(this.coord,a.mul(r.sharp,this.qualityValue())),e=t[0]-r.intervals[this.base()][0]):(t=a.sub(this.coord,a.mul(r.sharp,-this.qualityValue())),e=-(t[0]+r.intervals[this.base()][0])),e},invert:function(){var t=this.base(),e=this.qualityValue(),n="minor"===this.type()?-(e-1):-e,o=r.intervals[r.intervalsIndex[9-r.stepNumber[t]-1]];return o=a.add(o,a.mul(r.sharp,n)),new i(o)},quality:function(t){var e=r.alterations[this.type()][this.qualityValue()+2];return t?r.qualityLong[e]:e},qualityValue:function(){return"down"===this.direction()?Math.floor((-this.coord[1]-2)/7)+1:Math.floor((this.coord[1]-2)/7)+1},equal:function(t){return this.coord[0]===t.coord[0]&&this.coord[1]===t.coord[1]},greater:function(t){var e=this.semitones(),n=t.semitones();return e===n?this.number()>t.number():e>n},smaller:function(t){return!this.equal(t)&&!this.greater(t)},add:function(t){return new i(a.add(this.coord,t.coord))},toString:function(t){var e=t?this.number():this.value();return this.quality()+e}},i.toCoord=function(t){var e=o(t);if(!e)throw new Error("Invalid simple format interval");return new i(e)},i.from=function(t,e){return t.interval(e)},i.between=function(t,e){return new i(a.sub(e.coord,t.coord))},i.invert=function(t){return i.toCoord(t).invert().toString()},t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return f.default.map(t,function(t){return f.default.reduce(t.voices,function(t,n){if(f.default.isString(n)){var i=f.default.find(e,function(t){return t.name===n});return i?t.concat(i.children):t}if(!f.default.isObject(n))return t},[])})}function a(t){var e=Scored.config.note.head.width;return f.default.map((0,d.partitionBy)(t,function(t){return t.time.measure}),function(t){var n=f.default.reduce(t,function(t,e){var n=e.length;return[t[0]+n[0],t[1]+n[1]]},[0,0]),i=c(n,2),r=i[0],a=i[1];return r+(a?a:Scored.config.measure.length)+e})}function o(t,e){for(var n=[],i=0;i<t;i++){var r=e[i];r?n.push(r):n.push(Scored.config.measure.length+Scored.config.note.head.width)}return n}function s(t){return t&&t.time?t.time.time:void 0}function u(t){var e=f.default.map(t,f.default.first);if(!f.default.compact(e).length)return[];for(var n=f.default.min(e,s).time.time,i=[],r=[],a=0;a<e.length;a++)s(e[a])===n?(i.push(e[a]),r.push(f.default.rest(t[a]))):(i.push(null),r.push(t[a]));return[i,r]}function l(t,e){for(var n=u(e),i=c(n,2),r=i[0],a=i[1],o=[];f.default.compact(r).length;){o.push(t(r));var s=u(a),l=c(s,2);r=l[0],a=l[1]}return o}Object.defineProperty(e,"__esModule",{value:!0}),e.iterateByTime=e.nextTimes=e.addDefaultMeasureLengths=e.calculateMeasureLengths=e.getStaffItems=void 0;var c=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=n(0),f=i(h),d=n(2);e.getStaffItems=r,e.calculateMeasureLengths=a,e.addDefaultMeasureLengths=o,e.nextTimes=u,e.iterateByTime=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.value,n=t.measure,i=t.beat,r=t.time;this.value=e,this.measure=n,this.beat=i,this.time=r}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=i(a),s=n(5),u=o.default.type.chordSymbol;r.prototype.type=u,r.prototype.render=function(){var t=this.group=(0,s.drawChordSymbol)(this.value);return t.name=u,t},e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.value,n=t.time;this.value=e,this.time=n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=i(a),s=n(5),u=n(14),l=o.default.type.dynamic;r.prototype.type=l,r.prototype.render=function(){var t=this.group=(0,s.drawDynamic)(this.value);return t.name=l,t},r.prototype.equals=function(t){return(0,u.dynamicEquals)(this,t)},e.default=r},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=t.value,n=void 0===e?"C":e,i=t.measure,r=t.beat;this.value=n,this.measure=i,this.beat=r}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(3),u=r(s),l=n(5),c=n(8),h=i(c),f=n(1),d=r(f),g=d.default.type.key,p={C:["c","d","e","f","g","a","b"],"C#":["c#","d#","e#","f#","g#","a#","b#"],Db:["db","eb","f","gb","ab","bb","c"],D:["d","e","f#","g","a","b","c#"],"D#":["d#","e#","fx","g#","a#","b#","cx"],Eb:["eb","f","g","ab","bb","c","d"],E:["e","f#","g#","a","b","c#","d#"],F:["f","g","a","bb","c","d","e"],"F#":["f#","g#","a#","b","c#","d#","e#"],Gb:["gb","ab","bb","cb","db","eb","f"],G:["g","a","b","c","d","e","f#"],"G#":["g#","a#","b#","c#","d#","e#","fx"],Ab:["ab","bb","c","db","eb","f","g"],A:["a","b","c#","d","e","f#","g#"],"A#":["a#","b#","cx","d#","e#","fx","gx"],Bb:["bb","c","d","eb","f","g","a"],B:["b","c#","d#","e","f#","g#","a#"],a:["a","b","c","d","e","f","g"],"a#":["a#","b#","c#","d#","e#","f#","g#"],bb:["bb","c","db","eb","f","gb","ab"],b:["b","c#","d","e","f#","g","a"],c:["c","d","eb","f","g","ab","bb"],"c#":["c#","d#","e","f#","g#","a","b"],db:["db","eb","fb","gb","ab","bbb","cb"],d:["d","e","f","g","a","bb","c"],"d#":["d#","e#","f#","g#","a#","b","c#"],eb:["eb","f","gb","ab","bb","cb","db"],e:["e","f#","g","a","b","c","d"],f:["f","g","ab","bb","c","db","eb"],"f#":["f#","g#","a","b","c#","d","e"],gb:["gb","ab","bbb","cb","db","ebb","fb"],g:["g","a","bb","c","d","eb","f"],"g#":["g#","a#","b","c#","d#","e","f#"],ab:["ab","bb","cb","db","eb","fb","gb"]},v=[[],[0],[0,-3],[0,-3,1],[0,-3,1,-2],[0,-3,1,-2,2],[0,-3,1,-2,2,-1],[0,-3,1,-2,2,-1,3]],_=[[],[-4],[-4,-1],[-4,-1,-5],[-4,-1,-5,-2],[-4,-1,-5,-2,1],[-4,-1,-5,-2,1,-3],[-4,-1,-5,-2,1,-3,0]],m="#",y="b",w={C:[[],""],a:[[],""],G:[_[1],m],D:[_[2],m],A:[_[3],m],E:[_[4],m],B:[_[5],m],"F#":[_[6],m],"C#":[_[7],m],e:[_[1],m],b:[_[2],m],"f#":[_[3],m],"c#":[_[4],m],"g#":[_[5],m],"d#":[_[6],m],"a#":[_[7],m],F:[v[1],y],Bb:[v[2],y],Eb:[v[3],y],Ab:[v[4],y],Db:[v[5],y],Gb:[v[6],y],Cb:[v[7],y],d:[v[1],y],g:[v[2],y],c:[v[3],y],f:[v[4],y],bb:[v[5],y],eb:[v[6],y],ab:[v[7],y]};a.prototype.type=g,a.prototype.render=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.group=new u.default.Group({name:g}),n=t&&t.clef?t.clef.value:"treble",i={treble:[0,0],bass:[0,2*Scored.config.layout.stepSpacing],alto:[0,Scored.config.layout.stepSpacing],tenor:[0,-Scored.config.layout.stepSpacing]},r=o(w[this.value],2),a=r[0],s=r[1],c=new u.default.Point(i[n]),f=0;f<a.length;f++){var d=(0,l.drawAccidental)(s),p=h.calculateAccidentalYpos(a[f],Scored.config.lineSpacing/2);d.position=c.add([0,p]),c=c.add([7,0]),e.addChild(d)}return e},a.prototype.getPitches=function(){return p[this.value]},a.prototype.equals=function(t){return this.type===t.type&&this.value===t.value&&this.measure===t.measure&&this.beat===t.beat},e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.voice,n=void 0===e?0:e,i=t.value,r=void 0===i?4:i,a=t.dots,o=void 0===a?0:a,s=t.tuplet,u=t.time,l=t.slur;this.voice=n,this.value=r,this.dots=o,this.tuplet=s,this.time=u,this.slur=l}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=i(a),s=n(5),u=n(1),l=i(u),c=n(14),h=l.default.type.rest;r.render=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.render(e)},r.prototype.type=h,r.prototype.render=function(t){var e=this.group=new o.default.Group({name:h});return e.addChild((0,s.drawRest)(this.value)),e.position=[0,0],this.dots&&this.drawDots(this.dots,t.clef),e},r.prototype.drawDots=function(t){var e=this.group.bounds.center.y+Scored.config.note.head.yOffset,n=e-Scored.config.layout.stepSpacing,i=new o.default.Point(this.group.bounds.right+Scored.config.note.head.width/2,n),r=(0,s.drawDots)(i,t);this.group.addChildren(r)},r.prototype.drawGroupBounds=function(t){var e=new o.default.Path.Rectangle(new o.default.Rectangle(t.bounds));e.name="bounds",t.insertChild(0,e)},r.prototype.equals=function(t){return(0,c.restEquals)(this,t)},e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){var e=t.pageWidth,n=void 0===e?595:e,i=t.pageHeight,r=void 0===i?842:i,a=t.length,o=t.title,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=m.default.groupBy(s,function(t){return t.type});this.timeSigs=u.timeSig||[],this.lines=u.line||[],this.systems=u.system||[],this.pages=u.page||[],this.length=a,this.pageWidth=n,this.pageHeight=r,this.title=d(o)}function o(t,e){return m.default.some(e,function(e){return m.default.some(e.voices,function(e){return e===t.name})})}function s(t,e){return t.lines.map(function(t){return t.contextAt(e)})}function u(t,e){var n=m.default.sum(t.systems,function(t){return t.measures});return(0,M.createMeasures)(n,[].concat(r(t.timeSigs),r(e)))}function l(t,e){return{context:e,items:[(0,k.clone)(e.clef),(0,k.clone)(e.key),(0,k.clone)(e.timeSig)],time:t}}function c(t,e,n,i){var r=(0,E.getStaffItems)(t,e),a=(0,k.map)(function(t,e){return(0,I.getTimeContexts)(t,n,e)},t,r);return m.default.each(a,function(t){var e=(0,L.getAccidentalContexts)(t);m.default.each(t,function(t,n){return t.context.accidentals=e[n]})}),(0,E.iterateByTime)(function(t){var e=m.default.partition(i,function(e){var i=(0,j.getTime)(n,e),r=m.default.find(t,function(t){return!!t}).time;return(0,j.equals)(r,i)}),r=g(e,1),a=r[0];return new x.default(t,a)},a)}function h(t,e){var n=0,i=m.default.reduce(t,function(t,i){var r=i.time.measure;if(r>=e[n+1]){for(n++;r>=e[n+1];)t.push([]),n++;var a=[i];t.push(a)}else t[t.length-1]?t[t.length-1].push(i):t.push([i]);return t},[]);return m.default.each(m.default.drop(e,n+2),function(){return i.push([])}),i}function f(t,e){return m.default.find(e,function(e){return m.default.indexOf(e.voices,t)!==-1})}function d(t){return(0,z.isText)(t)?t:m.default.isObject(t)?new P.default(t):m.default.isString(t)?new P.default({value:t}):null}Object.defineProperty(e,"__esModule",{value:!0});var g=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.scoreToMeasures=u,e.createLineTimeContext=l,e.partitionBySystem=h;var p=n(3),v=i(p),_=n(0),m=i(_),y=n(18),w=i(y),b=n(49),x=i(b),S=n(48),C=i(S),A=n(35),P=i(A),M=n(17),O=n(1),T=i(O),k=n(2),I=n(9),E=n(21),L=n(11),j=n(6),z=n(4),N=T.default.type.score;a.prototype.type=N,a.render=function(t,e){var n=e.measures,i=e.voices,a=void 0===i?[]:i,f=e.chordSymbols,d=void 0===f?[]:f,g=e.repeats,p=void 0===g?[]:g,v=e.pages,_=void 0===v?[0]:v,y=t.render();n=n||u(t,p),function(){var t=n.map(function(t){return t.startsAt});a.map(function(e){e.breakDurations(t)})}();var b=m.default.reduce(t.systems,function(t,e,n){return m.default.contains(_,e.page)?(0,k.concat)(t,{system:e,index:n}):t},[]);return b.length&&function(){var e=(0,k.reductions)(function(t,e){return t+e.measures},t.systems,0),i=e.map(function(t){return(0,j.getTime)(n,{measure:t})}),u=[i[m.default.first(b).index],i[m.default.last(b).index+1]],f=a.map(function(e){return o(e,t.lines)?e.getTimeFrame(u[0].time,u[1].time):null}),g=f.map(function(t){return C.default.groupSlurs(t,i).map(function(t){var e=(m.default.first(t).time,m.default.last(t).time),n=m.default.contains(i.map(function(t){return t.time}),e),r=!!n&&1===t.length;return C.default.of({systemBreak:n,isEnd:r},t)})}),p=h(c(t.lines,a,n,d),e);(0,k.map)(function(e){var n=e.index,a=p[n],o=m.default.first(a),u=i[n],c=s(t,u);if(o){var h=o.time;if(u.time<h.time){var f=m.default.map(c,m.default.partial(l,u));p[n]=[new x.default(f)].concat(r(a))}else m.default.each(o.lines,function(t,e){if(t){var n=t.context,i=t.items;m.default.find(t.items,z.isClef)||i.push((0,k.clone)(n.clef)),m.default.find(t.items,z.isKey)||i.push((0,k.clone)(n.key)),m.default.find(t.items,z.isTimeSignature)||i.push((0,k.clone)(n.timeSig))}else o.lines[e]=l(u,c[e])})}else{var d=m.default.map(c,m.default.partial(l,u));a.push(new x.default(d))}},b);var v=0;if(t.title&&m.default.contains(_,0)){var S=t.title.render(),A=(t.length||t.pageWidth)/2;S.translate(A,0),v=S.bounds.height,y.addChild(S)}var P=m.default.map(b,function(i,r){var o=i.system,s=i.index,u=e[s]+o.measures,l=m.default.slice(n,e[s],u),c=p[s],h=w.default.renderTimeContexts({system:o,voices:a,timeContexts:c,chordSymbols:d,lines:t.lines,measures:l,length:o.length||t.length}),f=m.default.contains(_,o.page)?t.pages[o.page].staffSpacing[r]||250*r+m.default.indexOf(_,o.page)*t.pageHeight:t.pages[o.page].staffSpacing[r]||250*r;return h.translate(o.indentation,f+v),h}),M=m.default.flatten(g).map(function(t){return t.render()});y.addChildren(M),y.addChildren(P)}(),y},a.prototype.render=function(){return new v.default.Group({name:N})},a.getLineByVoice=f,e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.value,n=void 0===e?"4/4":e,i=t.measure,r=t.beatStructure;this.value=n,this.measure=i,this.beatStructure=r||f[n]}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=i(a),s=n(0),u=n(5),l=n(1),c=i(l),h=c.default.type.timeSig,f={"4/4":[1,1,1,1],"2/4":[1,1],c:[2,2],h:[2,2],"3/4":[1,1,1],"12/8":[3,3,3,3],"9/8":[3,3,3],"6/8":[3,3],"3/8":[3]};r.prototype.type=h,r.prototype.render=function(){var t={top:0,left:2,bottom:0,right:10},e=this.group=new o.default.Group({name:h});return e.addChild((0,u.drawTimeSig)(this.value,t)),e.position=[0,0],e},r.prototype.equals=function(t){return this.type===t.type&&this.value===t.value&&this.measure===t.measure&&(0,s.isEqual)(this.beatStructure,t.beatStructure)},e.default=r},function(t,e,n){(function(e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e){var a=i(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([a]).join("\n")}return[n].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+new e(JSON.stringify(t)).toString("base64")+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}}).call(e,n(52).Buffer)},function(t,e){var n={bb:-2,b:-1,"":0,"#":1,x:2};t.exports=function(t){return n[t]},t.exports.interval=function(t){var e=n[t];return[-4*e,7*e]}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){var i=void 0,r=void 0;if(e===g){i=t.children[0].noteHead.bounds.rightCenter.add(0,Scored.config.note.head.yOffset),r=i.subtract([0,n])}else if(e===p){var a=c.default.last(t.children);i=a.noteHead.bounds.leftCenter.add(0,Scored.config.note.head.yOffset),r=i.add([0,n])}return r}function o(t,e,n){var i=3.5*Scored.config.lineSpacing,r=Math.abs(d.getSteps(t.children[0].pitch,c.default.last(t.children).pitch)*Scored.config.layout.stepSpacing);if(!e)return i+r;var a=d.getSteps(e,t.children[0].pitch);if("up"===n&&a>=0)return i+r;if("down"===n&&a<0)return i+r;var o=a*Scored.config.stepSpacing;return Math.max(i,Math.abs(o))+r}function s(t){for(var e=t.children,n=[],i=1;i<e.length;i++){var r=e[i-1],a=e[i];d.getSteps(r.pitch,a.pitch)<=1&&n.push([r,a])}return n}function u(t){for(var e=0,n=t-1,i=new Array(t),r=0;r<t;r++)(0,h.isEven)(r)?(i[r]=n,n--):(i[r]=e,e++);return i}Object.defineProperty(e,"__esModule",{value:!0}),e.getAccidentalOrdering=e.getOverlappingNotes=e.getStemLength=e.defaultStemPoint=void 0;var l=n(0),c=r(l),h=n(2),f=n(7),d=i(f),g="up",p="down";e.defaultStemPoint=a,e.getStemLength=o,e.getOverlappingNotes=s,e.getAccidentalOrdering=u},function(t,e,n){"use strict";function i(t,e,n){var i=t-e.x;return e.add(i,n.y/n.x*i)}Object.defineProperty(e,"__esModule",{value:!0}),e.getLinePoint=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){var e=(0,d.map)(t.children,a);return W[t.type](t.props,e)}function o(t){var e=[].concat(r(t.timeSignatures)).map(function(t){return new D.default({value:h(t.value),measure:t.measure})}),n=t.lines.map(c.bind(null,e)),i=u(t.pages),a=s(t.pages,t.systems);return new U.default({title:t.title},[].concat(r(e),r(i),r(a),r(n)))}function s(t,e){var n=0,i=1;return e.map(function(e){var r=new O.default(Object.assign({},e,{lineHeights:e.lineSpacing,page:n}));return t[n]?i===t[n].systems?(n++,i=1):i++:n++,r})}function u(t){return t.map(function(t){return new H.default(t)})}function l(t){var e=t.root,n=t.mode;return Z[e][n]}function c(t,e){return new k.default({voices:e.voices},[].concat(r(e.clefs.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new j.default(t)})),r(e.keys.map(function(t){return new N.default(Object.assign({},t,{value:l(t)}))})),r(t.map(g.clone))))}function h(t){var e=f(t,2);return e[0]+"/"+e[1]}Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.parse=a,e.parseLayout=o;var d=n(0),g=n(2),p=n(19),v=i(p),_=n(12),m=i(_),y=n(25),w=i(y),b=n(34),x=i(b),S=n(15),C=i(S),A=n(22),P=i(A),M=n(18),O=i(M),T=n(16),k=i(T),I=n(17),E=i(I),L=n(10),j=i(L),z=n(24),N=i(z),B=n(27),D=i(B),R=n(23),F=i(R),q=n(26),U=i(q),V=n(33),H=i(V),W={voice:function(t,e){return new v.default(t,e)},note:function(t,e){return new m.default(t,e)},rest:function(t,e){return new w.default(t,e)},repeat:function(t,e){return new x.default(t,e)},chord:function(t,e){return new C.default(t,e)},chordSymbol:function(t,e){return new P.default(t,e)},system:function(t,e){return new O.default(t,e)},line:function(t,e){return new k.default(t,e)},measure:function(t,e){return new E.default(t,e)},clef:function(t,e){return new j.default(t,e)},key:function(t,e){return new N.default(t,e)},timeSig:function(t,e){return new D.default(t,e)},dynamic:function(t,e){return new F.default(t,e)},score:function(t,e){return new U.default(t,e)}},Y=["Ab","A","A#","Bb","B","B#","Cb","C","C#","Db","D","D#","Eb","E","E#","Fb","F","F#","Gb","G","G#"],G=["major","minor"],Z=Y.reduce(function(t,e){return t[e]=G.reduce(function(t,n){return t[n]="minor"===n?e.toLowerCase():e,t},{}),t},{})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.staffSpacing,n=void 0===e?[]:e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.children=i,this.staffSpacing=n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=i(a);r.prototype.type=o.default.type.page,e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.value,n=t.measure;this.value=e,this.measure=n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=i(a),s=n(5),u=o.default.type.repeat;r.prototype.type=u,r.prototype.render=function(){return this.group=(0,s.drawRepeat)()},e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),o=n(1),s=i(o),u=function(t){var e=t.value,n=void 0===e?"":e,i=t.fontSize,r=void 0===i?32:i,a=t.fontFamily,o=void 0===a?"gonvillealpha":a,s=t.fillColor,u=void 0===s?"black":s;this.value=n,this.fontSize=r,this.fontFamily=o,this.fillColor=u};u.prototype.type=s.default.type.text,u.prototype.render=function(){return new a.default.Group({name:s.default.type.text,children:[new a.default.PointText({content:this.value,fontFamily:this.fontFamily,fontSize:this.fontSize,fillColor:this.fillColor})]})},e.default=u},function(t,e,n){var i,r;/**
 * @license Fraction.js v3.3.1 09/09/2015
 * http://www.xarg.org/2014/03/precise-calculations-in-javascript/
 *
 * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
!function(n){"use strict";function a(t,e){return isNaN(t=parseInt(t,10))&&o(),t*e}function o(){throw"Invalid Param"}function s(t,e){if(!(this instanceof s))return new s(t,e);c(t,e),t=s.REDUCE?g(l.d,l.n):1,this.s=l.s,this.n=l.n/t,this.d=l.d/t}var u=2e3,l={s:1,n:0,d:1},c=function(t,e){var n,i=0,r=1,s=1,u=0,c=0,h=0,f=1,d=1,g=0,p=1,v=1,_=1,m=1e7;if(void 0===t||null===t);else if(void 0!==e)i=t,r=e,s=i*r;else switch(typeof t){case"object":"d"in t&&"n"in t?(i=t.n,r=t.d,"s"in t&&(i*=t.s)):0 in t?(i=t[0],1 in t&&(r=t[1])):o(),s=i*r;break;case"number":if(t<0&&(s=t,t=-t),t%1==0)i=t;else if(t>0){for(t>=1&&(d=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=d);p<=m&&_<=m;){if(n=(g+v)/(p+_),t===n){p+_<=m?(i=g+v,r=p+_):_>p?(i=v,r=_):(i=g,r=p);break}t>n?(g+=v,p+=_):(v+=g,_+=p),p>m?(i=v,r=_):(i=g,r=p)}i*=d}else(isNaN(t)||isNaN(e))&&(r=i=NaN);break;case"string":if(p=t.match(/\d+|./g),"-"===p[g]?(s=-1,g++):"+"===p[g]&&g++,p.length===g+1?c=a(p[g++],s):"."===p[g+1]||"."===p[g]?("."!==p[g]&&(u=a(p[g++],s)),g++,(g+1===p.length||"("===p[g+1]&&")"===p[g+3]||"'"===p[g+1]&&"'"===p[g+3])&&(c=a(p[g],s),f=Math.pow(10,p[g].length),g++),("("===p[g]&&")"===p[g+2]||"'"===p[g]&&"'"===p[g+2])&&(h=a(p[g+1],s),d=Math.pow(10,p[g+1].length)-1,g+=3)):"/"===p[g+1]||":"===p[g+1]?(c=a(p[g],s),f=a(p[g+2],1),g+=3):"/"===p[g+3]&&" "===p[g+1]&&(u=a(p[g],s),c=a(p[g+2],s),f=a(p[g+4],1),g+=5),p.length<=g){r=f*d,s=i=h+r*u+d*c;break}default:o()}if(0===r)throw"DIV/0";l.s=s<0?-1:1,l.n=Math.abs(i),l.d=Math.abs(r)},h=function(t,e,n){for(var i=1;e>0;t=t*t%n,e>>=1)1&e&&(i=i*t%n);return i},f=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var n=10%e,i=1;1!==n;i++)if(n=10*n%e,i>u)return 0;return i},d=function(t,e,n){for(var i=1,r=h(10,n,e),a=0;a<300;a++){if(i===r)return a;i=10*i%e,r=10*r%e}return 0},g=function(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}};s.REDUCE=1,s.prototype={s:1,n:0,d:1,abs:function(){return new s(this.n,this.d)},neg:function(){return new s(-this.s*this.n,this.d)},add:function(t,e){return c(t,e),new s(this.s*this.n*l.d+l.s*this.d*l.n,this.d*l.d)},sub:function(t,e){return c(t,e),new s(this.s*this.n*l.d-l.s*this.d*l.n,this.d*l.d)},mul:function(t,e){return c(t,e),new s(this.s*l.s*this.n*l.n,this.d*l.d)},div:function(t,e){return c(t,e),new s(this.s*l.s*this.n*l.d,this.d*l.n)},clone:function(){return new s(this)},mod:function(t,e){return isNaN(this.n)||isNaN(this.d)?new s(NaN):void 0===t?new s(this.s*this.n%this.d,1):(c(t,e),0===l.n&&0===this.d&&s(0,0),new s(this.s*l.d*this.n%(l.n*this.d),l.d*this.d))},gcd:function(t,e){return c(t,e),new s(g(l.n,this.n),l.d*this.d/g(l.d,this.d))},lcm:function(t,e){return c(t,e),0===l.n&&0===this.n?new s:new s(l.n*this.n/g(l.n,this.n),g(l.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):new s(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):new s(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):new s(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return new s(this.s*this.d,this.n)},pow:function(t){return t<0?new s(Math.pow(this.s*this.d,-t),Math.pow(this.n,-t)):new s(Math.pow(this.s*this.n,t),Math.pow(this.d,t))},equals:function(t,e){return c(t,e),this.s*this.n*l.d==l.s*l.n*this.d},compare:function(t,e){c(t,e);var n=this.s*this.n*l.d-l.s*l.n*this.d;return(0<n)-(n<0)},divisible:function(t,e){return c(t,e),!(!(l.n*this.d)||this.n*l.d%(l.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(t&&(e=Math.floor(i/r))>0&&(n+=e,n+=" ",i%=r),n+=i,n+="/",n+=r),n},toLatex:function(t){var e,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(t&&(e=Math.floor(i/r))>0&&(n+=e,i%=r),n+="\\frac{",n+=i,n+="}{",n+=r,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,i=[];do{i.push(Math.floor(e/n)),t=e%n,e=n,n=t}while(1!==e);return i},toString:function(){var t,e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";s.REDUCE||(t=g(e,n),e/=t,n/=t);for(var i=String(e).split(""),r=0,a=[~this.s?"":"-","",""],o="",u=f(e,n),l=d(e,n,u),c=-1,h=1,p=15+u+l+i.length,v=0;v<p;v++,r*=10){if(v<i.length?r+=Number(i[v]):(h=2,c++),u>0)if(c===l)a[h]+=o+"(",o="";else if(c===u+l){a[h]+=o+")";break}r>=n?(a[h]+=o+(r/n|0),o="",r%=n):h>1?o+="0":a[h]&&(a[h]+="0")}return a[0]+=a[1]||"0",a[2]?a[0]+"."+a[2]:a[0]}},i=[],void 0!==(r=function(){return s}.apply(e,i))&&(t.exports=r)}()},function(t,e){var n={c:[0,0],d:[-1,2],e:[-2,4],f:[1,-1],g:[0,1],a:[-1,3],b:[-2,5],h:[-2,5]};t.exports=function(t){return t in n?[n[t][0],n[t][1]]:null},t.exports.notes=n,t.exports.A4=[3,3],t.exports.sharp=[-4,7]},function(t,e,n){function i(t,e){if("string"==typeof t)return u.toCoord(t);if("string"==typeof e&&t instanceof s)return u.from(t,u.toCoord(e));if(e instanceof u&&t instanceof s)return u.from(t,e);if(e instanceof s&&t instanceof s)return u.between(t,e);throw new Error("Invalid parameters")}function r(t,e){return"string"==typeof t?s.fromString(t,e):new s(t,e)}function a(t,e){if("string"==typeof t){var n,i;if((n=t.match(/^([a-h])(x|#|bb|b?)/i))&&n[0])return i="number"==typeof e?e.toString(10):"4",new l(s.fromString(n[0].toLowerCase()+i),t.substr(n[0].length))}else if(t instanceof s)return new l(t,e);throw new Error("Invalid Chord. Couldn't find note name")}function o(t,e){return t=t instanceof s?t:h.note(t),new c(t,e)}var s=n(39),u=n(20),l=n(66),c=n(67);i.toCoord=u.toCoord,i.from=u.from,i.between=u.between,i.invert=u.invert,r.fromString=s.fromString,r.fromKey=s.fromKey,r.fromFrequency=s.fromFrequency,r.fromMIDI=s.fromMIDI;var h={note:r,chord:a,interval:i,scale:o,Note:s,Chord:l,Scale:c,Interval:u};n(68)(h),t.exports=h},function(t,e,n){function i(t,e,n){for(;n>0;n--)t+=e;return t}function r(t,e){if(!(this instanceof r))return new r(t,e);e=e||{},this.duration={value:e.value||4,dots:e.dots||0},this.coord=t}var a=n(63),o=n(59),s=n(13),u=n(40),l=n(20);r.prototype={octave:function(){return this.coord[0]+s.A4[0]-s.notes[this.name()][0]+4*this.accidentalValue()},name:function(){return s.fifths[this.coord[1]+s.A4[1]-7*this.accidentalValue()+1]},accidentalValue:function(){return Math.round((this.coord[1]+s.A4[1]-2)/7)},accidental:function(){return s.accidentals[this.accidentalValue()+2]},key:function(t){return t?7*this.coord[0]+4*this.coord[1]+29:12*this.coord[0]+7*this.coord[1]+49},midi:function(){return this.key()+20},fq:function(t){return(t=t||440)*Math.pow(2,(12*this.coord[0]+7*this.coord[1])/12)},chroma:function(){var t=(u.sum(u.mul(this.coord,[12,7]))-3)%12;return t<0?t+12:t},interval:function(t){return"string"==typeof t&&(t=l.toCoord(t)),t instanceof l?new r(u.add(this.coord,t.coord)):t instanceof r?new l(u.sub(t.coord,this.coord)):void 0},transpose:function(t){return this.coord=u.add(this.coord,t.coord),this},helmholtz:function(){var t=this.octave(),e=this.name();e=t<3?e.toUpperCase():e.toLowerCase();var n=t<3?",":"'",r=t<2?2-t:t-3;return i(e+this.accidental(),n,r)},scientific:function(){return this.name().toUpperCase()+this.accidental()+this.octave()},enharmonics:function(t){var e=this.key(),n=t?2:3;return["m3","m2","m-2","m-3"].map(this.interval.bind(this)).filter(function(t){var i=t.accidentalValue(),r=e-(t.key()-i);if(r<n&&r>-n)return t.coord=u.add(t.coord,u.mul(s.sharp,r-i)),!0})},solfege:function(t,e){var n,r,a,o=t.tonic.interval(this);return"down"===o.direction()&&(o=o.invert()),e&&(a=(this.key(!0)-t.tonic.key(!0))/7,a=a>=0?Math.floor(a):-Math.ceil(-a),r=a>=0?"'":","),n=s.intervalSolfege[o.simple(!0).toString()],e?i(n,r,Math.abs(a)):n},scaleDegree:function(t){var e=t.tonic.interval(this);return("down"===e.direction()||0===e.coord[1]&&0!==e.coord[0])&&(e=e.invert()),e=e.simple(!0).coord,t.scale.reduce(function(t,n,i){var r=l.toCoord(n).coord;return r[0]===e[0]&&r[1]===e[1]?i+1:t},0)},durationName:function(){return s.durations[this.duration.value]},durationInSeconds:function(t,e){var n=60/t/(this.duration.value/4)/(e/4);return 2*n-n/Math.pow(2,this.duration.dots)},toString:function(t){return this.name()+this.accidental()+(t?"":this.octave())}},r.fromString=function(t,e){var n=a(t);return n||(n=o(t)),new r(n,e)},r.fromKey=function(t){var e=Math.floor((t-4)/12),n=t-12*e-4,i=s.fifths[(2*Math.round(n/2)+1)%7],a=u.add(u.sub(s.notes[i],s.A4),[e+1,0]),o=t-49-u.sum(u.mul(a,[12,7]));return new r(o?u.add(a,u.mul(s.sharp,o)):a)},r.fromFrequency=function(t,e){var n,i,a;return e=e||440,n=49+(Math.log(t)-Math.log(e))/Math.log(2)*12,n=Math.round(n),a=e*Math.pow(2,(n-49)/12),i=Math.log(t/a)/Math.log(2)*1200,{note:r.fromKey(n),cents:i}},r.fromMIDI=function(t){return r.fromKey(t-20)},t.exports=r},function(t,e){t.exports={add:function(t,e){return[t[0]+e[0],t[1]+e[1]]},sub:function(t,e){return[t[0]-e[0],t[1]-e[1]]},mul:function(t,e){return"number"==typeof e?[t[0]*e,t[1]*e]:[t[0]*e[0],t[1]*e[1]]},sum:function(t){return t[0]+t[1]}}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.innerHTML='<canvas class="scored-canvas parnassus"><canvas>',document.getElementsByClassName("scored-canvas")}function a(t){var e=r(document.getElementById("music")),n=new l.default;n.setup(e[0]);s.default.load({custom:{families:["gonville","gonvillealpha"]},active:function(){t(n)}});n.project.view.update()}Object.defineProperty(e,"__esModule",{value:!0}),e.start=a;var o=n(69),s=i(o),u=n(44),l=i(u)},function(t,e,n){var i=n(54);"string"==typeof i&&(i=[[t.i,i,""]]);n(64)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(3),s=r(o),u=n(45),l=r(u),c=n(19),h=r(c),f=n(12),d=r(f),g=n(25),p=r(g),v=n(15),_=r(v),m=n(18),y=r(m),w=n(16),b=r(w),x=n(17),S=r(x),C=n(10),A=r(C),P=n(24),M=r(P),O=n(35),T=r(O),k=n(27),I=r(k),E=n(23),L=r(E),j=n(22),z=r(j),N=n(26),B=r(N),D=n(33),R=r(D),F=n(34),q=r(F),U=n(32),V=n(9),H=(i(V),n(7)),W=(i(H),n(11)),Y=(i(W),n(2)),G=i(Y),Z=n(6),$=(i(Z),n(1)),J=r($),X=n(50),K=(r(X),function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.config=new l.default(e.config)});K.prototype.setup=function(t){this.project=s.default.setup(t).project},K.prototype.render=function(t,e){var n=void 0;if(!t.type)throw new Error("Layout must have a type");switch(t.type){case J.default.type.note:n=d.default.render(t,e);break;case J.default.type.rest:n=p.default.render(t,e);break;case J.default.type.chord:n=_.default.render(t,e);break;case J.default.type.system:n=y.default.render(t,e);break;case J.default.type.score:n=t instanceof B.default?B.default.render(t,e):B.default.render((0,U.parseLayout)(t),e)}return s.default.view.update(),n},K.prototype.serialize=function(t){return G.serialize(t)},K.prototype.note=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new d.default(t)},K.prototype.rest=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new p.default(t)},K.prototype.clef=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new A.default(t)},K.prototype.key=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new M.default(t)},K.prototype.text=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new T.default(t)},K.prototype.timeSig=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new I.default(t)},K.prototype.dynamic=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new L.default(t)},K.prototype.chordSymbol=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new z.default(t)},K.prototype.chord=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new _.default(t,e)},K.prototype.voice=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new h.default(t,e)},K.prototype.page=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new R.default(t,e)},K.prototype.measure=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return new S.default(t,e)},K.prototype.line=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return new b.default(t,e)},K.prototype.system=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return new y.default(t,e)},K.prototype.score=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return new B.default(t,e)},K.prototype.repeat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new q.default(t)},K.prototype.clone=G.clone,K.parse=U.parse,e.default=K,"object"===("undefined"==typeof window?"undefined":a(window))&&(window.Scored=K)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),o=function(){function t(t){return e(a.default.extend({},l,t))}function e(t){return t.note.head.width=r(t.fontSize),t.note.head.yOffset=i(t.fontSize),t.layout.lineSpacing=t.lineSpacing=n(t.fontSize,t.fontFamily),t.layout.stepSpacing=t.stepSpacing=t.layout.lineSpacing/2,t}function n(t){return 5*t/18}function i(){return 9}function r(){return 10.5}function o(){return 10}var s=32,u="gonville",l={fontSize:s,fontFamily:u,shortestDuration:.0625,note:{minWidth:45,head:{width:r(s),height:o(s),yOffset:i(s)},accidental:{xOffset:r(s),yOffset:-o(s)}},layout:{lineSpacing:null,lineLength:1e3,lineDistance:100,stepSpacing:null},measure:{length:100},maxBeamAngle:13,minStemLength:10};return t}();e.default=o},function(t,e,n){"use strict";function i(t,e){if(!t)return e;if((0,a.gte)(e.time,t))return e;var n=(0,a.calculateDuration)(e).valueOf();if((0,a.lte)(e.time+n,t))return e;var i=(0,a.absoluteToRelativeDuration)(t-e.time),l=(0,a.absoluteToRelativeDuration)(e.time+n-t);if((0,s.isNote)(e)||(0,s.isChord)(e))return[(0,o.clone)(e,r({},i,{slur:u})),(0,o.clone)(e,r({},l,{time:t,slur:u}))];if((0,s.isRest)(e))return[(0,o.clone)(e,r({},i)),(0,o.clone)(e,r({},l,{time:t}))];throw new Error("Unsure how to divide item")}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e.divide=i;var a=n(6),o=n(2),s=n(4),u="BREAK"},function(t,e,n){"use strict";function i(t,e){for(var n=t.iterate(),i=e.iterate(),a=[],o=n.next(),u=i.next();!o.done||!u.done;){var l=r(o),c=r(u);l===c?(o.value.length===u.value.length&&(0,s.every)(o.value,function(t,e){return t.equals(u.value[e])})||a.push(l),o=n.next(),u=i.next()):l<c?(a.push(l),o=n.next()):l>c&&(a.push(c),u=i.next())}return a}function r(t){return t.done?1/0:t.value[0].time}function a(t,e){for(var n=Math.max(t.length,e.length),i=[],r=0;r<n;r++)t[r]!==e[r]&&i.push(r);return i}function o(t,e){return _.sum(t.systems,function(t){return t.measures})!==_.sum(e.systems,function(t){return t.measures})}Object.defineProperty(e,"__esModule",{value:!0}),e.voices=i,e.arrays=a,e.measures=o;var s=n(0)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.systemBreak,n=t.isEnd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.systemBreak=e,this.isEnd=n,this.children=i}function a(t,e,n){n=n||t.getStemDirection();var i=(0,d.isChord)(t)?t.getBaseNote(n).noteHead:t.noteHead;return e?e.y<0?i.bounds.center:i.bounds.bottomCenter:"down"===n?i.bounds.center:i.bounds.bottomCenter}function o(t){var e="up"===t?10:-10;return new l.default.Point([0,e])}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n(3),l=i(u),c=n(0),h=n(1),f=i(h),d=n(4),g=n(2),p=n(7),v=f.default.type.slur;r.prototype.type=v,r.of=function(t,e){return new r(t,e)},r.prototype.render=function(){var t=new l.default.Group({name:v}),e=(0,c.first)(this.children),n=(0,c.last)(this.children);if(1===this.children.length)if(this.isEnd){var i=n.getStemDirection(),r=a(n,null,i),s=r.subtract(20,0),u=o(i);t.addChild((0,p.slur)(s,r,u))}else{var h=e.getStemDirection(),f=a(e,null,h),d=f.add(20,0),g=o(h);t.addChild((0,p.slur)(f,d,g))}else if(this.systemBreak){var _=e.getStemDirection(),m=a(e,null,_),y=m.add(20,0),w=o(_),b=(0,p.slur)(m,y,w),x=n.getStemDirection(),S=a(n,null,x),C=S.subtract(20,0),A=o(x),P=(0,p.slur)(C,S,A);t.addChildren([b,P])}else{var M=e.getStemDirection(),O=a(e,null,M),T=o(M),k=a(n,T);t.addChild((0,p.slur)(O,k,T))}return t},r.groupSlurs=function(t){return(0,c.filter)((0,g.partitionBy)(t,function(t){return t.slur}),function(t){return!!s(t,1)[0].slur})},e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.lines=t,this.time=g.default.find(t,function(t){return!!t}).time,this.symbols=e}function a(t,e,n){var i=(0,y.isNote)(n)?n:n.children[0],r=(0,w.calculateNoteYpos)(i,Scored.config.lineSpacing/2,(0,w.getClefBase)(e.clef.value),4);n.group.translate(t.add([0,r]))}function o(t){var e=t.items,n=t.context;return g.default.map(e,function(t){return s(t,n)})}function s(t,e){return(0,y.isNote)(t)?u(t,e):(0,y.isChord)(t)?l(t,e):t.render(e)}function u(t,e){var n=t.render(e);return v.default.renderAccidental(t,e.accidentals,e.key),v.default.renderDots(t,e.clef),n}function l(t,e){var n=t.render(e);return m.default.renderAccidentals(t,e),n}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=n(3),f=i(h),d=n(0),g=i(d),p=n(12),v=i(p),_=n(15),m=i(_),y=n(4),w=n(8),b=n(9);r.prototype.render=function(t){var e=this.group=new f.default.Group,n=g.default.map(this.lines,function(n,i){if(n){var r=function(){var r=o(n),s=(g.default.filter(n.items,y.isMarking),g.default.filter(n.items,y.isPitched)),u=g.default.filter(n.items,y.isRest),l=g.default.filter(n.items,y.isDynamic),c=new f.default.Point(0,t[i]),h=(0,b.positionMarkings)(c,0,n);return s.length&&function(){var t=g.default.max(s,function(t){return t.group.bounds.width});a(c,n.context,t),(0,w.placeAt)(h,t),g.default.remove(s,function(e){return e===t}),g.default.each(s,g.default.partial(a,c,n.context));var e=(0,y.isNote)(t)?t.noteHead:t.children[0].noteHead;(0,w.alignNoteHeads)(e.bounds.center.x,s)}(),u.map(function(t){t.group.translate(c.add(0,(0,w.getYOffset)(t))),(0,w.placeAt)(h,t)}),l.map(function(t){t.group.translate(c.add(0,7.5*Scored.config.layout.lineSpacing)),(0,w.placeAt)(h,t)}),e.addChildren(r),{v:h}}();if("object"===(void 0===r?"undefined":c(r)))return r.v}}),i=Math.min.apply(null,g.default.compact(n)),r=g.default.isFinite(i)?i:0,s=this.symbols.map(function(t){var e=t.render();return e.translate(r,(0,w.getYOffset)(t)),e});return e.addChildren(s),e},r.prototype.calculateCursor=function(){return this.lines.map(function(t){if(t){return g.default.filter(t.items,y.isMarking).reduce(function(t,e){return(0,w.calculateCursor)(e)+t},0)+g.default.min(g.default.filter(t.items,y.hasDuration).map(w.calculateCursor))}})},e.default=r},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=e.voices,i=void 0===n?[]:n,r=e.pages,a=void 0===r?[1]:r;o(I.voices,i);I.score&&!O.measures(I.score,t)||(L=(0,S.scoreToMeasures)(t));var u=O.arrays(I.score.systemHeights||[],t.systemHeights);return E&&I.score.systemHeights&&u.length?u.map(function(e){I.systemGroups[e]&&I.systemGroups[e].translate(0,t.systemHeights[e]-I.score.systemHeights[e])}):function(){E&&E.remove(),E=t.render(),j=(0,A.reductions)(function(t,e){return t+e.measures},t.systems,0);var e=l.default.dropRight(j).map(function(t){return(0,P.getTime)(L,{measure:t})}),n=e.map(function(e){return t.lines.map(function(t){return t.contextAt(e)})}),r=(0,S.getSystemTimeContexts)(t,i,L,j);(0,A.map)(function(t,e,n){var i=l.default.first(t);if(i){var r=l.default.find(i,function(t){return!!t}).time;if(n.time<r.time)throw new Error("Gap in time");l.default.each(i,function(t,r){if(t){var a=t.context,o=t.items;l.default.find(t.items,T.isClef)||o.push((0,A.clone)(a.clef)),l.default.find(t.items,T.isKey)||o.push((0,A.clone)(a.key)),l.default.find(t.items,T.isTimeSignature)||o.push((0,A.clone)(a.timeSig))}else i[r]=(0,S.createLineTimeContext)(n,e[r])})}else{var a=l.default.map(e,l.default.partial(S.createLineTimeContext,n));t.push(a)}},r,n,e);var o=l.default.reduce(t.systems,function(t,e,n){return l.default.contains(a,e.page)?(0,A.concat)(t,[e,r[n],n]):t},[]);z=l.default.reduce(o,function(e,n){var r=s(n,3),o=r[0],u=r[1],c=r[2],h=j[c]+o.measures,f=l.default.slice(L,j[c],h),d=p.default.renderTimeContexts(o,t.lines,f,i,u,t.length),g=l.default.contains(a,o.page-1)?t.systemHeights[c]+l.default.indexOf(a,o.page)*t.pageHeight:t.systemHeights[c];return d.translate(0,g),(0,A.set)(e,c,d)},[]),E.addChildren(z),(0,S.renderDecorations)(E,i)}(),t&&(I.score=t),j&&(I.startMeasures=j),z&&(I.systemGroups=z),i&&(I.voices=i),E}function o(t,e){var n=l.default.groupBy(t,function(t){return t.name}),i=l.default.groupBy(e,function(t){return t.name}),r=n.length>i.length?n:i,a=[];for(var o in r){if(!n[o]||!i[o])return k;a=a.concat(O.voices(n[o][0],i[o][0]))}return l.default.uniq(l.default.sortBy(a))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=a;var u=n(0),l=r(u),c=n(19),h=(r(c),n(12)),f=(r(h),n(25)),d=(r(f),n(15)),g=(r(d),n(18)),p=r(g),v=n(16),_=(r(v),n(17)),m=(r(_),n(10)),y=(r(m),n(24)),w=(r(y),n(27)),b=(r(w),n(23)),x=(r(b),n(22)),S=(r(x),n(26)),C=(r(S),n(1)),A=(r(C),n(2)),P=(n(9),n(21),n(11),n(6)),M=n(47),O=i(M),T=(n(32),n(4)),k="RENDERALL",I={score:{},startMeasures:[],voices:[],systemGroups:[]},E=void 0,L=void 0,j=void 0,z=void 0},function(t,e,n){"use strict";function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-i(t)}function a(t){var e,n,r,a,o,s,u=t.length;o=i(t),s=new h(3*u/4-o),r=o>0?u-4:u;var l=0;for(e=0,n=0;e<r;e+=4,n+=3)a=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[l++]=a>>16&255,s[l++]=a>>8&255,s[l++]=255&a;return 2===o?(a=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[l++]=255&a):1===o&&(a=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[l++]=a>>8&255,s[l++]=255&a),s}function o(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function s(t,e,n){for(var i,r=[],a=e;a<n;a+=3)i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],r.push(o(i));return r.join("")}function u(t){for(var e,n=t.length,i=n%3,r="",a=[],o=16383,u=0,c=n-i;u<c;u+=o)a.push(s(t,u,u+o>c?c:u+o));return 1===i?(e=t[n-1],r+=l[e>>2],r+=l[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=l[e>>10],r+=l[e>>4&63],r+=l[e<<2&63],r+="="),a.push(r),a.join("")}e.byteLength=r,e.toByteArray=a,e.fromByteArray=u;for(var l=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,g=f.length;d<g;++d)l[d]=f[d],c[f.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e,n){"use strict";(function(t){function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,e,n)}function s(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,n,i):"string"==typeof e?h(t,e,n):g(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,n,i){return u(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}function c(t,e){if(u(e),t=a(t,e<0?0:0|p(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(e,n);t=a(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=f(t,e),t}function g(t,e){if(o.isBuffer(e)){var n=0|p(e.length);return t=a(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||J(e.length)?a(t,0):f(t,e);if("Buffer"===e.type&&Q(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),o.alloc(+t)}function _(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(t).length;default:if(i)return W(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function w(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=o.from(e,i)),o.isBuffer(e))return 0===e.length?-1:b(t,e,n,i,r);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,i,r){function a(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,s=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}var l;if(r){var c=-1;for(l=n;l<s;l++)if(a(t,l)===a(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*o}else c!==-1&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(a(t,l+f)!==a(e,f)){h=!1;break}if(h)return l}return-1}function x(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function S(t,e,n,i){return $(W(e,t.length-n),t,n,i)}function C(t,e,n,i){return $(Y(e),t,n,i)}function A(t,e,n,i){return C(t,e,n,i)}function P(t,e,n,i){return $(Z(e),t,n,i)}function M(t,e,n,i){return $(G(e,t.length-n),t,n,i)}function O(t,e,n){return 0===e&&n===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var a=t[r],o=null,s=a>239?4:a>223?3:a>191?2:1;if(r+s<=n){var u,l,c,h;switch(s){case 1:a<128&&(o=a);break;case 2:u=t[r+1],128==(192&u)&&(h=(31&a)<<6|63&u)>127&&(o=h);break;case 3:u=t[r+1],l=t[r+2],128==(192&u)&&128==(192&l)&&(h=(15&a)<<12|(63&u)<<6|63&l)>2047&&(h<55296||h>57343)&&(o=h);break;case 4:u=t[r+1],l=t[r+2],c=t[r+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(h=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&h<1114112&&(o=h)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=s}return k(i)}function k(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return n}function I(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function E(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function L(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=e;a<n;++a)r+=H(t[a]);return r}function j(t,e,n){for(var i=t.slice(e,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function z(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,i,r,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<a)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function B(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,a=Math.min(t.length-n,2);r<a;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function D(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,a=Math.min(t.length-n,4);r<a;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function R(t,e,n,i,r,a){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,i,r){return r||R(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,n,i,23,4),n+4}function q(t,e,n,i,r){return r||R(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,n,i,52,8),n+8}function U(t){if(t=V(t).replace(et,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function V(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var n,i=t.length,r=null,a=[],o=0;o<i;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function G(t,e){for(var n,i,r,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),i=n>>8,r=n%256,a.push(r),a.push(i);return a}function Z(t){return X.toByteArray(U(t))}function $(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function J(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var X=n(51),K=n(60),Q=n(62);e.Buffer=o,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),e.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return s(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return l(null,t,e,n)},o.allocUnsafe=function(t){return c(null,t)},o.allocUnsafeSlow=function(t){return c(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,a=Math.min(n,i);r<a;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=o.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},o.byteLength=_,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):m.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,i,r){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var a=r-i,s=n-e,u=Math.min(a,s),l=this.slice(i,r),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},o.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},o.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return P(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var i;if(o.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=o.prototype;else{var r=e-t;i=new o(r,void 0);for(var a=0;a<r;++a)i[a]=this[a+t]}return i},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);for(var i=this[t],r=1,a=0;++a<e&&(r*=256);)i+=this[t+a]*r;return i},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},o.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);for(var i=this[t],r=1,a=0;++a<e&&(r*=256);)i+=this[t+a]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);for(var i=e,r=1,a=this[t+--i];i>0&&(r*=256);)a+=this[t+--i]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*e)),a},o.prototype.readInt8=function(t,e){return e||z(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},o.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){N(this,t,e,n,Math.pow(2,8*n)-1,0)}var r=1,a=0;for(this[e]=255&t;++a<n&&(r*=256);)this[e+a]=t/r&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){N(this,t,e,n,Math.pow(2,8*n)-1,0)}var r=n-1,a=1;for(this[e+r]=255&t;--r>=0&&(a*=256);)this[e+r]=t/a&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},o.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return q(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return q(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,a=i-n;if(this===t&&n<e&&e<i)for(r=a-1;r>=0;--r)t[r+e]=this[r+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=o.isBuffer(t)?t:W(new o(t,i).toString()),u=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%u]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,n(41))},function(t,e,n){e=t.exports=n(28)(void 0),e.push([t.i,"@font-face {\n\tfont-family: 'gonville';\n\tsrc: url("+n(58)+") format('truetype');\n}\n\n@font-face {\n\tfont-family: 'gonvillealpha';\n\tsrc: url("+n(57)+") format('truetype');\n}\n\np {\n\tfont-family: 'gonville';\n\tfont-size: 2em;\n}",""])},function(t,e,n){e=t.exports=n(28)(void 0),e.i(n(55),""),e.i(n(53),""),e.push([t.i,".layout-code {\n\tborder: 1px solid #000;\n}\n\n.border {\n  border: 1px solid #000;\n}\n\n.float-right {\n  float: right;\n}\n\n.display-none {\n\tdisplay: none;\n}\n\n/* Header bar */\n.header {\n  /*position: fixed;*/\n  background-color: #3E2723;\n  color: #FFF;\n  width: 100%;\n  padding: 10px 0px 10px 0px;\n}\n\n.palate-wrapper {\n\twidth: 50%;\n\t/*height: 300px;*/\n}\n\n.mirror-height {\n\theight: 300px;\n}\n\n.output-structure {\n\twidth: 100%;\n\theight: 50%;\n}\n\n.palate-wrapper-left {\n  /*position: relative;*/\n  left: -45%;\n  top: 0px;\n  width: 50%;\n  height: 100%;\n}\n\n.palate-wrapper-right {\n  /*position: relative;*/\n  /*top: 0px;*/\n  right: -45%;\n  width: 50%;\n}\n\n.mrs {\n\tmargin-right: 10px;\n}\n\n.mrm {\n\tmargin-right: 20px;\n}\n\n.mls {\n\tmargin-left: 10px;\n}\n\n.mlm {\n\tmargin-left: 20px;\n}\n",""])},function(t,e,n){e=t.exports=n(28)(void 0),e.push([t.i,"/*\n * Material Brown theme\n *  50 - #EFEBE9\n * 100 - #D7CCC8\n * 200 - #BCAAA4\n * 300 - #A1887F\n * 400 - #8D6E63\n * 500 - #795548\n * 600 - #6D4C41\n * 700 - 5D4037\n * 800 - #4E342E\n * 900 - #3E2723\n */\n\nbody {\n  padding: 0px;\n  margin: 0px;\n}\n\ncanvas.full-screen {\n  width: 100%;\n  height: 100%;\n}\n\n.sheet {\n  position: relative;\n  width: 902px;\n  height: 1167px;\n  border: 1px solid #000;\n  top: 50px;\n  left: 150px;\n}\n\n.parnassus {\n  position: relative;\n  width: 1425px;\n  height: 1167px;\n  border: 1px solid #000;\n  top: 50px;\n  left: 10px;\n}\n\n.flex-container {\n  display: flex;\n}\n\n.toolbar-container {\n  display: block;\n  width: 100%;\n  height: 45px;\n}\n",""])},function(t,e){var n={m:["m3","P5"],mi:["m3","P5"],min:["m3","P5"],"-":["m3","P5"],M:["M3","P5"],ma:["M3","P5"],"":["M3","P5"],"+":["M3","A5"],aug:["M3","A5"],dim:["m3","d5"],o:["m3","d5"],maj:["M3","P5","M7"],dom:["M3","P5","m7"],"ø":["m3","d5","m7"],5:["P5"],"6/9":["M3","P5","M6","M9"]};t.exports=function(t){function e(t){for(var e=n[t],i=0,r=e.length;i<r;i++)u[i+1]=e[i];s=e.length}var i,r,a="quality",o=[],s=2,u=["P1","M3","P5","m7","M9","P11","M13"],l=!1;t=t.replace(/[,\s\(\)]/g,"");for(var c=0,h=t.length;c<h;c++){if(!(i=t[c]))return;if("quality"===a){var f=c+2<h?t.substr(c,3).toLowerCase():null,d=c+1<h?t.substr(c,2).toLowerCase():null;r=f in n?f:d in n?d:i in n?i:"",r&&e(r),"M"!==r&&"ma"!==r&&"maj"!==r||(l=!0),c+=r.length-1,a="extension"}else if("extension"===a){if(i="1"===i&&t[c+1]?+t.substr(c,2):+i,isNaN(i)||6===i)6===i?(u[3]="M6",s=Math.max(3,s)):c-=1;else{if((s=(i-1)/2)!==Math.round(s))return new Error("Invalid interval extension: "+i.toString(10));"o"===r||"dim"===r?u[3]="d7":l&&(u[3]="M7"),c+=i>=10?1:0}a="alterations"}else if("alterations"===a){var g=t.substr(c).split(/(#|b|add|maj|sus|M)/i),p=!1,v=!1;if(1===g.length)return new Error("Invalid alteration");if(0!==g[0].length)return new Error("Invalid token: '"+g[0]+"'");var _=!1;g.forEach(function(t,e,n){if(_||!t.length)return _=!1;var i=n[e+1],r=t.toLowerCase();if("M"===t||"maj"===r)"7"===i&&(_=!0),s=Math.max(3,s),u[3]="M7";else if("sus"===r){var a="P4";"2"!==i&&"4"!==i||(_=!0,"2"===i&&(a="M2")),u[1]=a}else if("add"===r)"9"===i?o.push("M9"):"11"===i?o.push("P11"):"13"===i&&o.push("M13"),_=!0;else if("b"===r)p=!0;else if("#"===r)v=!0;else{var l,c,h=+t;if(isNaN(h)||String(h).length!==t.length)return new Error("Invalid token: '"+t+"'");if(6===h)return u[3]=v?"A6":p?"m6":"M6",void(s=Math.max(3,s));if(c=(h-1)/2,s<c&&(s=c),h<5||7===h||c!==Math.round(c))return new Error("Invalid interval alteration: "+h);l=u[c][0],v?"d"===l?l="m":"m"===l?l="M":"M"!==l&&"P"!==l||(l="A"):p&&("A"===l?l="M":"M"===l?l="m":"m"!==l&&"P"!==l||(l="d")),v=p=!1,u[c]=l+h}}),a="ended"}else if("ended"===a)break}return u.slice(0,s+1).concat(o)}},function(t,e,n){t.exports=n.p+"./site/styles/fonts/gonvillealpha11.ttf"},function(t,e,n){t.exports=n.p+"./site/styles/fonts/gonvillepart1.ttf"},function(t,e,n){var i=n(37),r=n(29);t.exports=function(t){var t=t.replace(/\u2032/g,"'").replace(/\u0375/g,","),e=t.match(/^(,*)([a-h])(x|#|bb|b?)([,\']*)$/i);if(!e||t!==e[0])throw new Error("Invalid formatting");var n,a=e[2],o=e[1],s=e[4],u=a===a.toLowerCase();if(o){if(u)throw new Error("Invalid formatting - found commas before lowercase note");n=2-o.length}else if(s)if(s.match(/^'+$/)&&u)n=3+s.length;else{if(!s.match(/^,+$/)||u)throw new Error("Invalid formatting - mismatch between octave indicator and letter case");n=2-s.length}else n=u?3:2;var l=r.interval(e[3].toLowerCase()),c=i(a.toLowerCase());return c[0]+=n,c[0]+=l[0]-i.A4[0],c[1]+=l[1]-i.A4[1],c}},function(t,e){e.read=function(t,e,n,i,r){var a,o,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+t[e+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),a-=l}return(d?-1:1)*o*Math.pow(2,a-i)},e.write=function(t,e,n,i,r,a){var o,s,u,l=8*a-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,g=i?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),e+=o+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*u-1)*Math.pow(2,r),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&s,d+=g,s/=256,r-=8);for(o=o<<r|s,l+=r;l>0;t[n+d]=255&o,d+=g,o/=256,l-=8);t[n+d-g]|=128*p}},function(t,e){var n=/^(AA|A|P|M|m|d|dd)(-?\d+)$/,i=[-4,7],r=["dd","d","P","A","AA"],a=["dd","d","m","M","A","AA"],o=[[0,0],[3,-5],[2,-3],[1,-1],[0,1],[3,-4],[2,-2],[1,0]];t.exports=function(t){var e=t.match(n);if(!e)return null;var s=e[1],u=+e[2],l=u<0?-1:1;u=l<0?-u:u;var c=u>8?u%7||7:u,h=(u-c)/7,f=o[c-1],d=f[0]<=1?r:a,g=d.indexOf(s)-2;return g===-3?null:[l*(f[0]+h+i[0]*g),l*(f[1]+i[1]*g)]},t.exports.coords=o.slice(0)},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var i=n(37),r=n(29);t.exports=function(t){var e=/^([a-h])(x|#|bb|b?)(-?\d*)/i,n=t.match(e);if(n&&t===n[0]&&n[3].length){var a=n[1],o=+n[3],s=n[2].length?n[2].toLowerCase():"",u=r.interval(s),l=i(a.toLowerCase());return l[0]+=o,l[0]+=u[0]-i.A4[0],l[1]+=u[1]-i.A4[1],l}}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=g[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(c(i.parts[a],e))}else{for(var o=[],a=0;a<i.parts.length;a++)o.push(c(i.parts[a],e));g[i.id]={id:i.id,refs:1,parts:o}}}}function r(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],a=r[0],o=r[1],s=r[2],u=r[3],l={css:o,media:s,sourceMap:u};n[a]?n[a].parts.push(l):e.push(n[a]={id:a,parts:[l]})}return e}function a(t,e){var n=_(),i=w[w.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),w.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function o(t){t.parentNode.removeChild(t);var e=w.indexOf(t);e>=0&&w.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",l(e,t.attrs),a(t,e),e}function u(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",l(e,t.attrs),a(t,e),e}function l(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function c(t,e){var n,i,r;if(e.singleton){var a=y++;n=m||(m=s(e)),i=h.bind(null,n,a,!1),r=h.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),i=d.bind(null,n,e),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),i=f.bind(null,n),r=function(){o(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function h(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=x(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function f(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e,n){var i=n.css,r=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||a)&&(i=b(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var g={},p=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},v=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),_=p(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,w=[],b=n(65);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},void 0===e.singleton&&(e.singleton=v()),void 0===e.insertAt&&(e.insertAt="bottom");var n=r(t);return i(n,e),function(t){for(var a=[],o=0;o<n.length;o++){var s=n[o],u=g[s.id];u.refs--,a.push(u)}if(t){i(r(t),e)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete g[u.id]}}}};var x=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url *\( *(.+?) *\)/g,function(t,e){var r=e.replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r))return t;var a;return a=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);e=e||"",this.name=t.name().toUpperCase()+t.accidental()+e,this.symbol=e,this.root=t,this.intervals=[],this._voicing=[];var n=e.split("/");if(2===n.length&&"9"!==n[1].trim()?(e=n[0],n=n[1].trim()):n=null,this.intervals=r(e).map(s.toCoord),this._voicing=this.intervals.slice(),n){var a,u,l=this.intervals;u=o.fromString(n+(t.octave()+1)),a=s.between(t,u),n=a.simple(),a=a.invert().direction("down"),this._voicing=[a];for(var c=0,h=l.length;c<h;c++)l[c].simple().equal(n)||this._voicing.push(l[c])}}var r=n(56),a=n(13),o=n(39),s=n(20);i.prototype={notes:function(){var t=this.root;return this.voicing().map(function(e){return t.interval(e)})},simple:function(){return this.notes().map(function(t){return t.toString(!0)})},bass:function(){return this.root.interval(this._voicing[0])},voicing:function(t){if(!t)return this._voicing;this._voicing=[];for(var e=0,n=t.length;e<n;e++)this._voicing[e]=s.toCoord(t[e]);return this},resetVoicing:function(){this._voicing=this.intervals},dominant:function(t){return t=t||"",new i(this.root.interval("P5"),t)},subdominant:function(t){return t=t||"",new i(this.root.interval("P4"),t)},parallel:function(t){t=t||"";var e=this.quality();if("triad"!==this.chordType()||"diminished"===e||"augmented"===e)throw new Error("Only major/minor triads have parallel chords");return"major"===e?new i(this.root.interval("m3","down"),"m"):new i(this.root.interval("m3","up"))},quality:function(){for(var t,e,n,i=this.intervals,r=0,a=i.length;r<a;r++)3===i[r].number()?t=i[r]:5===i[r].number()?e=i[r]:7===i[r].number()&&(n=i[r]);if(t)return t="down"===t.direction()?t.invert():t,t=t.simple().toString(),e&&(e="down"===e.direction?e.invert():e,e=e.simple().toString()),n&&(n="down"===n.direction?n.invert():n,n=n.simple().toString()),"M3"===t?"A5"===e?"augmented":"P5"===e&&"m7"===n?"dominant":"major":"m3"===t?"P5"===e?"minor":"d5"===e?"m7"===n?"half-diminished":"diminished":"minor":void 0},chordType:function(){var t,e,n,i,r,a=this.intervals.length;if(2===a)return"dyad";if(3===a){for(e={first:!1,third:!1,fifth:!1},i=0;i<a;i++)t=this.intervals[i],n=t.invert(),t.base()in e?e[t.base()]=!0:n.base()in e&&(e[n.base()]=!0);r=e.first&&e.third&&e.fifth?"triad":"trichord"}else if(4===a){for(e={first:!1,third:!1,fifth:!1,seventh:!1},i=0;i<a;i++)t=this.intervals[i],n=t.invert(),t.base()in e?e[t.base()]=!0:n.base()in e&&(e[n.base()]=!0);e.first&&e.third&&e.fifth&&e.seventh&&(r="tetrad")}return r||"unknown"},get:function(t){if("string"==typeof t&&t in a.stepNumber){var e,n,i=this.intervals;for(t=a.stepNumber[t],e=0,n=i.length;e<n;e++)if(i[e].number()===t)return this.root.interval(i[e]);return null}throw new Error("Invalid interval name")},interval:function(t){return new i(this.root.interval(t),this.symbol)},transpose:function(t){return this.root.transpose(t),this.name=this.root.name().toUpperCase()+this.root.accidental()+this.symbol,this},toString:function(){return this.name}},t.exports=i},function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);var n,r;if(!("coord"in t))throw new Error("Invalid Tonic");if("string"==typeof e){if(n=e,!(e=o[e]))throw new Error("Invalid Scale")}else for(r in o)if(o.hasOwnProperty(r)&&o[r].toString()===e.toString()){n=r;break}this.name=n,this.tonic=t,this.scale=e}var r=n(13),a=n(20),o={aeolian:["P1","M2","m3","P4","P5","m6","m7"],blues:["P1","m3","P4","A4","P5","m7"],chromatic:["P1","m2","M2","m3","M3","P4","A4","P5","m6","M6","m7","M7"],dorian:["P1","M2","m3","P4","P5","M6","m7"],doubleharmonic:["P1","m2","M3","P4","P5","m6","M7"],harmonicminor:["P1","M2","m3","P4","P5","m6","M7"],ionian:["P1","M2","M3","P4","P5","M6","M7"],locrian:["P1","m2","m3","P4","d5","m6","m7"],lydian:["P1","M2","M3","A4","P5","M6","M7"],majorpentatonic:["P1","M2","M3","P5","M6"],melodicminor:["P1","M2","m3","P4","P5","M6","M7"],minorpentatonic:["P1","m3","P4","P5","m7"],mixolydian:["P1","M2","M3","P4","P5","M6","m7"],phrygian:["P1","m2","m3","P4","P5","m6","m7"]};o.harmonicchromatic=o.chromatic,o.minor=o.aeolian,o.major=o.ionian,o.flamenco=o.doubleharmonic,i.prototype={notes:function(){for(var t=[],e=0,n=this.scale.length;e<n;e++)t.push(this.tonic.interval(this.scale[e]));return t},simple:function(){return this.notes().map(function(t){return t.toString(!0)})},type:function(){var t=this.scale.length-2;if(t<8)return["di","tri","tetra","penta","hexa","hepta","octa"][t]+"tonic"},get:function(t){return t="string"==typeof t&&t in r.stepNumber?r.stepNumber[t]:t,this.tonic.interval(this.scale[t-1])},solfege:function(t,e){return t?this.get(t).solfege(this,e):this.notes().map(function(t){return t.solfege(this,e)})},interval:function(t){return t="string"==typeof t?a.toCoord(t):t,new i(this.tonic.interval(t),this.scale)},transpose:function(t){var e=this.interval(t);return this.scale=e.scale,this.tonic=e.tonic,this}},t.exports=i},function(t,e,n){var i=n(13);t.exports=function(t){var e=t.Note,n=t.Chord,r=t.Scale;e.prototype.chord=function(t){return t=t in i.chordShort?i.chordShort[t]:t,new n(this,t)},e.prototype.scale=function(t){return new r(this,t)}}},function(t,e,n){var i;!function(){function r(t,e,n){return t.call.apply(t.bind,arguments)}function a(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function o(t,e,n){return o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:a,o.apply(null,arguments)}function s(t,e){this.a=t,this.m=e||t,this.c=this.m.document}function u(t,e,n,i){if(e=t.c.createElement(e),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i&&e.appendChild(t.c.createTextNode(i)),e}function l(t,e,n){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function c(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var a=!1,o=0;o<i.length;o+=1)if(e[r]===i[o]){a=!0;break}a||i.push(e[r])}for(e=[],r=0;r<i.length;r+=1){for(a=!1,o=0;o<n.length;o+=1)if(i[r]===n[o]){a=!0;break}a||e.push(i[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(t,e){for(var n=t.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==e)return!0;return!1}function d(t){if("string"==typeof t.f)return t.f;var e=t.m.location.protocol;return"about:"==e&&(e=t.a.location.protocol),"https:"==e?"https:":"http:"}function g(t){return t.m.location.hostname||t.a.location.hostname}function p(t,e,n){function i(){s&&r&&a&&(s(o),s=null)}e=u(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,a=!0,o=null,s=n||null;st?(e.onload=function(){r=!0,i()},e.onerror=function(){r=!0,o=Error("Stylesheet failed to load"),i()}):setTimeout(function(){r=!0,i()},0),l(t,"head",e)}function v(t,e,n,i){var r=t.c.getElementsByTagName("head")[0];if(r){var a=u(t,"script",{src:e}),o=!1;return a.onload=a.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,n&&n(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&r.removeChild(a))},r.appendChild(a),setTimeout(function(){o||(o=!0,n&&n(Error("Script load timeout")))},i||5e3),a}return null}function _(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,w(t)}}function y(t,e){t.c=e,w(t)}function w(t){0==t.a&&t.c&&(t.c(),t.c=null)}function b(t){this.a=t||"-"}function x(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function S(t){return P(t)+" "+t.f+"00 300px "+C(t.c)}function C(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function A(t){return t.a+t.f}function P(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function M(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function O(t,e){this.c=t,this.f=t.m.document.documentElement,this.h=e,this.a=new b("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function T(t){t.g&&h(t.f,[t.a.c("wf","loading")]),I(t,"loading")}function k(t){if(t.g){var e=f(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),h(t.f,n,i)}I(t,"inactive")}function I(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,A(n)):t.h[e]())}function E(){this.c={}}function L(t,e,n){var i,r=[];for(i in e)if(e.hasOwnProperty(i)){var a=t.c[i];a&&r.push(a(e[i],n))}return r}function j(t,e){this.c=t,this.f=e,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function z(t){l(t.c,"body",t.a)}function N(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+C(t.c)+";font-style:"+P(t)+";font-weight:"+t.f+"00;"}function B(t,e,n,i,r,a){this.g=t,this.j=e,this.a=i,this.c=n,this.f=r||3e3,this.h=a||void 0}function D(t,e,n,i,r,a,o){this.v=t,this.B=e,this.c=n,this.a=i,this.s=o||"BESbswy",this.f={},this.w=r||3e3,this.u=a||null,this.o=this.j=this.h=this.g=null,this.g=new j(this.c,this.s),this.h=new j(this.c,this.s),this.j=new j(this.c,this.s),this.o=new j(this.c,this.s),t=new x(this.a.c+",serif",A(this.a)),t=N(t),this.g.a.style.cssText=t,t=new x(this.a.c+",sans-serif",A(this.a)),t=N(t),this.h.a.style.cssText=t,t=new x("serif",A(this.a)),t=N(t),this.j.a.style.cssText=t,t=new x("sans-serif",A(this.a)),t=N(t),this.o.a.style.cssText=t,z(this.g),z(this.h),z(this.j),z(this.o)}function R(){if(null===lt){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);lt=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return lt}function F(t,e,n){for(var i in ut)if(ut.hasOwnProperty(i)&&e===t.f[ut[i]]&&n===t.f[ut[i]])return!0;return!1}function q(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=R()&&F(t,n,i)),e?ot()-t.A>=t.w?R()&&F(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?V(t,t.v):V(t,t.B):U(t):V(t,t.v)}function U(t){setTimeout(o(function(){q(this)},t),50)}function V(t,e){setTimeout(o(function(){c(this.g.a),c(this.h.a),c(this.j.a),c(this.o.a),e(this.a)},t),0)}function H(t,e,n){this.c=t,this.a=e,this.f=0,this.o=this.j=!1,this.s=n}function W(t){0==--t.f&&t.j&&(t.o?(t=t.a,t.g&&h(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),I(t,"active")):k(t.a))}function Y(t){this.j=t,this.a=new E,this.h=0,this.f=this.g=!0}function G(t,e,n,i,r){var a=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=r||null,s=i||null||{};if(0===n.length&&a)k(e.a);else{e.f+=n.length,a&&(e.j=a);var u,l=[];for(u=0;u<n.length;u++){var c=n[u],f=s[c.c],d=e.a,g=c;d.g&&h(d.f,[d.a.c("wf",g.c,A(g).toString(),"loading")]),I(d,"fontloading",g),d=null,null===ct&&(ct=!!window.FontFace&&(!(g=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))||42<parseInt(g[1],10))),d=ct?new B(o(e.g,e),o(e.h,e),e.c,c,e.s,f):new D(o(e.g,e),o(e.h,e),e.c,c,e.s,t,f),l.push(d)}for(u=0;u<l.length;u++)l[u].start()}},0)}function Z(t,e,n){var i=[],r=n.timeout;T(e);var i=L(t.a,n,t.c),a=new H(t.c,e,r);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load(function(e,n,i){G(t,a,e,n,i)})}function $(t,e){this.c=t,this.a=e}function J(t,e,n){var i=d(t.c);return t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""),i+"//"+t+"/"+e+".js"+(n?"?v="+n:"")}function X(t,e){this.c=t,this.a=e}function K(t,e,n){this.c=t?t:e+ht,this.a=[],this.f=[],this.g=n||""}function Q(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i].split(":");3==r.length&&t.f.push(r.pop());var a="";2==r.length&&""!=r[1]&&(a=":"),t.a.push(r.join(a))}}function tt(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function et(t){this.f=t,this.a=[],this.c={}}function nt(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),r=i[0].replace(/\+/g," "),a=["n4"];if(2<=i.length){var o,s=i[1];if(o=[],s)for(var s=s.split(","),u=s.length,l=0;l<u;l++){var c;if(c=s[l],c.match(/^[\w-]+$/)){var h=pt.exec(c.toLowerCase());if(null==h)c="";else{if(c=h[2],c=null==c||""==c?"n":gt[c],null==(h=h[1])||""==h)h="4";else var f=dt[h],h=f?f:isNaN(h)?"4":h.substr(0,1);c=[c,h].join("")}}else c="";c&&o.push(c)}0<o.length&&(a=o),3==i.length&&(i=i[2],o=[],i=i?i.split(","):o,0<i.length&&(i=ft[i[0]])&&(t.c[r]=i))}for(t.c[r]||(i=ft[r])&&(t.c[r]=i),i=0;i<a.length;i+=1)t.a.push(new x(r,a[i]))}}function it(t,e){this.c=t,this.a=e}function rt(t,e){this.c=t,this.a=e}function at(t,e){this.c=t,this.f=e,this.a=[]}var ot=Date.now||function(){return+new Date},st=!!window.FontFace;b.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},B.prototype.start=function(){var t=this.c.m.document,e=this,n=ot(),i=new Promise(function(i,r){function a(){ot()-n>=e.f?r():t.fonts.load(S(e.a),e.h).then(function(t){1<=t.length?i():setTimeout(a,25)},function(){r()})}a()}),r=new Promise(function(t,n){setTimeout(n,e.f)});Promise.race([r,i]).then(function(){e.g(e.a)},function(){e.j(e.a)})};var ut={D:"serif",C:"sans-serif"},lt=null;D.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=ot(),q(this)};var ct=null;H.prototype.g=function(t){var e=this.a;e.g&&h(e.f,[e.a.c("wf",t.c,A(t).toString(),"active")],[e.a.c("wf",t.c,A(t).toString(),"loading"),e.a.c("wf",t.c,A(t).toString(),"inactive")]),I(e,"fontactive",t),this.o=!0,W(this)},H.prototype.h=function(t){var e=this.a;if(e.g){var n=f(e.f,e.a.c("wf",t.c,A(t).toString(),"active")),i=[],r=[e.a.c("wf",t.c,A(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,A(t).toString(),"inactive")),h(e.f,i,r)}I(e,"fontinactive",t),W(this)},Y.prototype.load=function(t){this.c=new s(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,Z(this,new O(this.c,t),t)},$.prototype.load=function(t){function e(){if(a["__mti_fntLst"+i]){var n,r=a["__mti_fntLst"+i](),o=[];if(r)for(var s=0;s<r.length;s++){var u=r[s].fontfamily;void 0!=r[s].fontStyle&&void 0!=r[s].fontWeight?(n=r[s].fontStyle+r[s].fontWeight,o.push(new x(u,n))):o.push(new x(u))}t(o)}else setTimeout(function(){e()},50)}var n=this,i=n.a.projectId,r=n.a.version;if(i){var a=n.c.m;v(this.c,J(n,i,r),function(r){r?t([]):(a["__MonotypeConfiguration__"+i]=function(){return n.a},e())}).id="__MonotypeAPIScript__"+i}else t([])},X.prototype.load=function(t){var e,n,i=this.a.urls||[],r=this.a.families||[],a=this.a.testStrings||{},o=new _;for(e=0,n=i.length;e<n;e++)p(this.c,i[e],m(o));var s=[];for(e=0,n=r.length;e<n;e++)if(i=r[e].split(":"),i[1])for(var u=i[1].split(","),l=0;l<u.length;l+=1)s.push(new x(i[0],u[l]));else s.push(new x(i[0]));y(o,function(){t(s,a)})};var ht="//fonts.googleapis.com/css",ft={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},dt={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},gt={i:"i",italic:"i",n:"n",normal:"n"},pt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,vt={Arimo:!0,Cousine:!0,Tinos:!0};it.prototype.load=function(t){var e=new _,n=this.c,i=new K(this.a.api,d(n),this.a.text),r=this.a.families;Q(i,r);var a=new et(r);nt(a),p(n,tt(i),m(e)),y(e,function(){t(a.a,a.c,vt)})},rt.prototype.load=function(t){var e=this.a.id,n=this.c.m;e?v(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],r=0;r<e.length;r+=2)for(var a=e[r],o=e[r+1],s=0;s<o.length;s++)i.push(new x(a,o[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}},2e3):t([])},at.prototype.load=function(t){var e=this.f.id,n=this.c.m,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var r=0,a=n.fonts.length;r<a;++r){var o=n.fonts[r];i.a.push(new x(o.name,M("font-weight:"+o.weight+";font-style:"+o.style)))}t(i.a)},v(this.c,d(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+g(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var _t=new Y(window);_t.a.c.custom=function(t,e){return new X(e,t)},_t.a.c.fontdeck=function(t,e){return new at(e,t)},_t.a.c.monotype=function(t,e){return new $(e,t)},_t.a.c.typekit=function(t,e){return new rt(e,t)},_t.a.c.google=function(t,e){return new it(e,t)};var mt={load:o(_t.load,_t)};void 0!==(i=function(){return mt}.call(e,n,e,t))&&(t.exports=i)}()},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){},function(t,e){},function(t,e,n){"use strict";function i(){for(var t=document.createElement("select"),e=0;e<u.length;e++){var n=document.createElement("option");n.innerHTML=u[e],n.value=u[e],t.appendChild(n)}return document.getElementById("exampleList").appendChild(t),t}function r(t,e){return new Promise(function(n,i){fetch("/json/"+t+".json").then(function(i){i.ok?i.json().then(function(i){l[t]=i,n(o(e,i.layout,i.voices,i.chordSymbols).translate(25,50))}):console.error("something is wrong")}).catch(function(t){console.log("fail")})})}function a(t){var e=i(),n=window.location.hash.slice(1)?window.location.hash.slice(1):u[0];e.value=n;var a;r(n,t).then(function(t){a=t}).catch(function(t){console.error(t)}),e.onchange=function(e){var n=e.target.value;window.location.hash=n,a&&a.remove(),r(n,t).then(function(t){a=t}).catch(function(t){console.error(t)})}}function o(t,e,n,i){return t.render(e,{voices:n.map(Scored.parse),pages:[e.currentPage],chordSymbols:i.map(Scored.parse)})}Object.defineProperty(e,"__esModule",{value:!0}),e.run=a,n(43);var s=n(42),u=["error1","error2","error3","tuplet_rest"],l={};(0,s.start)(a)}]);